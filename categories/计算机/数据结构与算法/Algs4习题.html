<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Algs4习题"><meta name="keywords" content=""><meta name="author" content="rcocco,rcocco@qq.com"><meta name="copyright" content="rcocco"><title>Algs4习题 | rcocco's Blog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2f232b8a2af9088714735280ce974c8b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-193110637-1', 'auto');
ga('send', 'pageview');</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC1%E7%AB%A0"><span class="toc-number">1.</span> <span class="toc-text"> 第1章</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.</span> <span class="toc-text"> 1.1 基础编程模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#111"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 1.1.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#112"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 1.1.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#113"><span class="toc-number">1.1.3.</span> <span class="toc-text"> 1.1.3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#114"><span class="toc-number">1.1.4.</span> <span class="toc-text"> 1.1.4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#115"><span class="toc-number">1.1.5.</span> <span class="toc-text"> 1.1.5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#116"><span class="toc-number">1.1.6.</span> <span class="toc-text"> 1.1.6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#117"><span class="toc-number">1.1.7.</span> <span class="toc-text"> 1.1.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#118"><span class="toc-number">1.1.8.</span> <span class="toc-text"> 1.1.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#119"><span class="toc-number">1.1.9.</span> <span class="toc-text"> 1.1.9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1110"><span class="toc-number">1.1.10.</span> <span class="toc-text"> 1.1.10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1111"><span class="toc-number">1.1.11.</span> <span class="toc-text"> 1.1.11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1112"><span class="toc-number">1.1.12.</span> <span class="toc-text"> 1.1.12</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1113"><span class="toc-number">1.1.13.</span> <span class="toc-text"> 1.1.13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1114"><span class="toc-number">1.1.14.</span> <span class="toc-text"> 1.1.14</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1115"><span class="toc-number">1.1.15.</span> <span class="toc-text"> 1.1.15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1116"><span class="toc-number">1.1.16.</span> <span class="toc-text"> 1.1.16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1117"><span class="toc-number">1.1.17.</span> <span class="toc-text"> 1.1.17</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1118"><span class="toc-number">1.1.18.</span> <span class="toc-text"> 1.1.18</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1119"><span class="toc-number">1.1.19.</span> <span class="toc-text"> 1.1.19</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1120"><span class="toc-number">1.1.20.</span> <span class="toc-text"> 1.1.20</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1121"><span class="toc-number">1.1.21.</span> <span class="toc-text"> 1.1.21</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1122"><span class="toc-number">1.1.22.</span> <span class="toc-text"> 1.1.22</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1123"><span class="toc-number">1.1.23.</span> <span class="toc-text"> 1.1.23?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1124"><span class="toc-number">1.1.24.</span> <span class="toc-text"> 1.1.24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1125"><span class="toc-number">1.1.25.</span> <span class="toc-text"> 1.1.25?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1126"><span class="toc-number">1.1.26.</span> <span class="toc-text"> 1.1.26</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1127"><span class="toc-number">1.1.27.</span> <span class="toc-text"> 1.1.27</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1128"><span class="toc-number">1.1.28.</span> <span class="toc-text"> 1.1.28</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1129"><span class="toc-number">1.1.29.</span> <span class="toc-text"> 1.1.29</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1130"><span class="toc-number">1.1.30.</span> <span class="toc-text"> 1.1.30</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1131"><span class="toc-number">1.1.31.</span> <span class="toc-text"> 1.1.31?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1132"><span class="toc-number">1.1.32.</span> <span class="toc-text"> 1.1.32</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1133"><span class="toc-number">1.1.33.</span> <span class="toc-text"> 1.1.33</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1134"><span class="toc-number">1.1.34.</span> <span class="toc-text"> 1.1.34</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1135"><span class="toc-number">1.1.35.</span> <span class="toc-text"> 1.1.35</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1136"><span class="toc-number">1.1.36.</span> <span class="toc-text"> 1.1.36</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1137"><span class="toc-number">1.1.37.</span> <span class="toc-text"> 1.1.37</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1138"><span class="toc-number">1.1.38.</span> <span class="toc-text"> 1.1.38</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1139"><span class="toc-number">1.1.39.</span> <span class="toc-text"> 1.1.39</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E6%95%B0%E6%8D%AE%E6%8A%BD%E8%B1%A1"><span class="toc-number">1.2.</span> <span class="toc-text"> 1.2 数据抽象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#121"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 1.2.1?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#122"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 1.2.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#123"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 1.2.3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#124"><span class="toc-number">1.2.4.</span> <span class="toc-text"> 1.2.4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#125"><span class="toc-number">1.2.5.</span> <span class="toc-text"> 1.2.5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#126"><span class="toc-number">1.2.6.</span> <span class="toc-text"> 1.2.6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#127"><span class="toc-number">1.2.7.</span> <span class="toc-text"> 1.2.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#128"><span class="toc-number">1.2.8.</span> <span class="toc-text"> 1.2.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#129"><span class="toc-number">1.2.9.</span> <span class="toc-text"> 1.2.9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1210"><span class="toc-number">1.2.10.</span> <span class="toc-text"> 1.2.10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1211"><span class="toc-number">1.2.11.</span> <span class="toc-text"> 1.2.11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1212"><span class="toc-number">1.2.12.</span> <span class="toc-text"> 1.2.12</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1213"><span class="toc-number">1.2.13.</span> <span class="toc-text"> 1.2.13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1214"><span class="toc-number">1.2.14.</span> <span class="toc-text"> 1.2.14</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1215"><span class="toc-number">1.2.15.</span> <span class="toc-text"> 1.2.15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1216"><span class="toc-number">1.2.16.</span> <span class="toc-text"> 1.2.16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1217"><span class="toc-number">1.2.17.</span> <span class="toc-text"> 1.2.17</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1218"><span class="toc-number">1.2.18.</span> <span class="toc-text"> 1.2.18？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1219"><span class="toc-number">1.2.19.</span> <span class="toc-text"> 1.2.19</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E8%83%8C%E5%8C%85-%E9%98%9F%E5%88%97%E5%92%8C%E6%A0%88"><span class="toc-number">1.3.</span> <span class="toc-text"> 1.3 背包、队列和栈</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#131"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 1.3.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#132"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 1.3.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#133"><span class="toc-number">1.3.3.</span> <span class="toc-text"> 1.3.3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#134"><span class="toc-number">1.3.4.</span> <span class="toc-text"> 1.3.4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#135"><span class="toc-number">1.3.5.</span> <span class="toc-text"> 1.3.5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#136"><span class="toc-number">1.3.6.</span> <span class="toc-text"> 1.3.6+</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#137"><span class="toc-number">1.3.7.</span> <span class="toc-text"> 1.3.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#138"><span class="toc-number">1.3.8.</span> <span class="toc-text"> 1.3.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#139"><span class="toc-number">1.3.9.</span> <span class="toc-text"> 1.3.9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1310"><span class="toc-number">1.3.10.</span> <span class="toc-text"> 1.3.10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1311"><span class="toc-number">1.3.11.</span> <span class="toc-text"> 1.3.11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1312"><span class="toc-number">1.3.12.</span> <span class="toc-text"> 1.3.12</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1313"><span class="toc-number">1.3.13.</span> <span class="toc-text"> 1.3.13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1314"><span class="toc-number">1.3.14.</span> <span class="toc-text"> 1.3.14</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1315"><span class="toc-number">1.3.15.</span> <span class="toc-text"> 1.3.15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1316"><span class="toc-number">1.3.16.</span> <span class="toc-text"> 1.3.16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1317"><span class="toc-number">1.3.17.</span> <span class="toc-text"> 1.3.17</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1318"><span class="toc-number">1.3.18.</span> <span class="toc-text"> 1.3.18</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1319"><span class="toc-number">1.3.19.</span> <span class="toc-text"> 1.3.19</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1320"><span class="toc-number">1.3.20.</span> <span class="toc-text"> 1.3.20</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1321"><span class="toc-number">1.3.21.</span> <span class="toc-text"> 1.3.21</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1322"><span class="toc-number">1.3.22.</span> <span class="toc-text"> 1.3.22</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1323"><span class="toc-number">1.3.23.</span> <span class="toc-text"> 1.3.23</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1324"><span class="toc-number">1.3.24.</span> <span class="toc-text"> 1.3.24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1325"><span class="toc-number">1.3.25.</span> <span class="toc-text"> 1.3.25</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1326"><span class="toc-number">1.3.26.</span> <span class="toc-text"> 1.3.26</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1327"><span class="toc-number">1.3.27.</span> <span class="toc-text"> 1.3.27</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1328"><span class="toc-number">1.3.28.</span> <span class="toc-text"> 1.3.28</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1329"><span class="toc-number">1.3.29.</span> <span class="toc-text"> 1.3.29</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1330"><span class="toc-number">1.3.30.</span> <span class="toc-text"> 1.3.30</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1331"><span class="toc-number">1.3.31.</span> <span class="toc-text"> 1.3.31</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1332"><span class="toc-number">1.3.32.</span> <span class="toc-text"> 1.3.32</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1333"><span class="toc-number">1.3.33.</span> <span class="toc-text"> 1.3.33</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1334"><span class="toc-number">1.3.34.</span> <span class="toc-text"> 1.3.34</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1335"><span class="toc-number">1.3.35.</span> <span class="toc-text"> 1.3.35</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1336"><span class="toc-number">1.3.36.</span> <span class="toc-text"> 1.3.36</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1337"><span class="toc-number">1.3.37.</span> <span class="toc-text"> 1.3.37</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1338"><span class="toc-number">1.3.38.</span> <span class="toc-text"> 1.3.38</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1339"><span class="toc-number">1.3.39.</span> <span class="toc-text"> 1.3.39</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1340"><span class="toc-number">1.3.40.</span> <span class="toc-text"> 1.3.40</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1341"><span class="toc-number">1.3.41.</span> <span class="toc-text"> 1.3.41</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1342"><span class="toc-number">1.3.42.</span> <span class="toc-text"> 1.3.42</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1343"><span class="toc-number">1.3.43.</span> <span class="toc-text"> 1.3.43</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1344"><span class="toc-number">1.3.44.</span> <span class="toc-text"> 1.3.44</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1345"><span class="toc-number">1.3.45.</span> <span class="toc-text"> 1.3.45</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1346"><span class="toc-number">1.3.46.</span> <span class="toc-text"> 1.3.46</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1347"><span class="toc-number">1.3.47.</span> <span class="toc-text"> 1.3.47</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1348"><span class="toc-number">1.3.48.</span> <span class="toc-text"> 1.3.48</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1349"><span class="toc-number">1.3.49.</span> <span class="toc-text"> 1.3.49?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1350"><span class="toc-number">1.3.50.</span> <span class="toc-text"> 1.3.50</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90"><span class="toc-number">1.4.</span> <span class="toc-text"> 1.4 算法分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#141"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 1.4.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#142"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 1.4.2？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#143"><span class="toc-number">1.4.3.</span> <span class="toc-text"> 1.4.3?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#144"><span class="toc-number">1.4.4.</span> <span class="toc-text"> 1.4.4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#145"><span class="toc-number">1.4.5.</span> <span class="toc-text"> 1.4.5?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#146"><span class="toc-number">1.4.6.</span> <span class="toc-text"> 1.4.6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#147"><span class="toc-number">1.4.7.</span> <span class="toc-text"> 1.4.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#148"><span class="toc-number">1.4.8.</span> <span class="toc-text"> 1.4.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#149"><span class="toc-number">1.4.9.</span> <span class="toc-text"> 1.4.9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1410"><span class="toc-number">1.4.10.</span> <span class="toc-text"> 1.4.10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1411"><span class="toc-number">1.4.11.</span> <span class="toc-text"> 1.4.11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1412"><span class="toc-number">1.4.12.</span> <span class="toc-text"> 1.4.12</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1413"><span class="toc-number">1.4.13.</span> <span class="toc-text"> 1.4.13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1414"><span class="toc-number">1.4.14.</span> <span class="toc-text"> 1.4.14</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1415"><span class="toc-number">1.4.15.</span> <span class="toc-text"> 1.4.15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1416"><span class="toc-number">1.4.16.</span> <span class="toc-text"> 1.4.16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1417"><span class="toc-number">1.4.17.</span> <span class="toc-text"> 1.4.17?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1418"><span class="toc-number">1.4.18.</span> <span class="toc-text"> 1.4.18?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1419"><span class="toc-number">1.4.19.</span> <span class="toc-text"> 1.4.19?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1420"><span class="toc-number">1.4.20.</span> <span class="toc-text"> 1.4.20</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1421"><span class="toc-number">1.4.21.</span> <span class="toc-text"> 1.4.21</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1422"><span class="toc-number">1.4.22.</span> <span class="toc-text"> 1.4.22?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1423"><span class="toc-number">1.4.23.</span> <span class="toc-text"> 1.4.23?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1424"><span class="toc-number">1.4.24.</span> <span class="toc-text"> 1.4.24?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1425"><span class="toc-number">1.4.25.</span> <span class="toc-text"> 1.4.25?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1426"><span class="toc-number">1.4.26.</span> <span class="toc-text"> 1.4.26</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1427"><span class="toc-number">1.4.27.</span> <span class="toc-text"> 1.4.27</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1428"><span class="toc-number">1.4.28.</span> <span class="toc-text"> 1.4.28</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1429"><span class="toc-number">1.4.29.</span> <span class="toc-text"> 1.4.29</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1430"><span class="toc-number">1.4.30.</span> <span class="toc-text"> 1.4.30?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1431"><span class="toc-number">1.4.31.</span> <span class="toc-text"> 1.4.31?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1432"><span class="toc-number">1.4.32.</span> <span class="toc-text"> 1.4.32?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1433"><span class="toc-number">1.4.33.</span> <span class="toc-text"> 1.4.33</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1434"><span class="toc-number">1.4.34.</span> <span class="toc-text"> 1.4.34?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1435"><span class="toc-number">1.4.35.</span> <span class="toc-text"> 1.4.35?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1436"><span class="toc-number">1.4.36.</span> <span class="toc-text"> 1.4.36</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1437"><span class="toc-number">1.4.37.</span> <span class="toc-text"> 1.4.37</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1438"><span class="toc-number">1.4.38.</span> <span class="toc-text"> 1.4.38</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1439"><span class="toc-number">1.4.39.</span> <span class="toc-text"> 1.4.39</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1440"><span class="toc-number">1.4.40.</span> <span class="toc-text"> 1.4.40?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1441"><span class="toc-number">1.4.41.</span> <span class="toc-text"> 1.4.41?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1442"><span class="toc-number">1.4.42.</span> <span class="toc-text"> 1.4.42?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1443"><span class="toc-number">1.4.43.</span> <span class="toc-text"> 1.4.43</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1444"><span class="toc-number">1.4.44.</span> <span class="toc-text"> 1.4.44?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1445"><span class="toc-number">1.4.45.</span> <span class="toc-text"> 1.4.45?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-union-find%E7%AE%97%E6%B3%95"><span class="toc-number">1.5.</span> <span class="toc-text"> 1.5 union-find算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#151"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 1.5.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#152"><span class="toc-number">1.5.2.</span> <span class="toc-text"> 1.5.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#153"><span class="toc-number">1.5.3.</span> <span class="toc-text"> 1.5.3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#154"><span class="toc-number">1.5.4.</span> <span class="toc-text"> 1.5.4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#155"><span class="toc-number">1.5.5.</span> <span class="toc-text"> 1.5.5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#156"><span class="toc-number">1.5.6.</span> <span class="toc-text"> 1.5.6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#157"><span class="toc-number">1.5.7.</span> <span class="toc-text"> 1.5.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#158"><span class="toc-number">1.5.8.</span> <span class="toc-text"> 1.5.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#159"><span class="toc-number">1.5.9.</span> <span class="toc-text"> 1.5.9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1510"><span class="toc-number">1.5.10.</span> <span class="toc-text"> 1.5.10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1511"><span class="toc-number">1.5.11.</span> <span class="toc-text"> 1.5.11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1512"><span class="toc-number">1.5.12.</span> <span class="toc-text"> 1.5.12</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1513"><span class="toc-number">1.5.13.</span> <span class="toc-text"> 1.5.13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1514"><span class="toc-number">1.5.14.</span> <span class="toc-text"> 1.5.14</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1515"><span class="toc-number">1.5.15.</span> <span class="toc-text"> 1.5.15?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1516"><span class="toc-number">1.5.16.</span> <span class="toc-text"> 1.5.16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1517"><span class="toc-number">1.5.17.</span> <span class="toc-text"> 1.5.17</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1518"><span class="toc-number">1.5.18.</span> <span class="toc-text"> 1.5.18</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1519"><span class="toc-number">1.5.19.</span> <span class="toc-text"> 1.5.19</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1520"><span class="toc-number">1.5.20.</span> <span class="toc-text"> 1.5.20</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1521"><span class="toc-number">1.5.21.</span> <span class="toc-text"> 1.5.21</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1522"><span class="toc-number">1.5.22.</span> <span class="toc-text"> 1.5.22</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1523"><span class="toc-number">1.5.23.</span> <span class="toc-text"> 1.5.23</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1524"><span class="toc-number">1.5.24.</span> <span class="toc-text"> 1.5.24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1525"><span class="toc-number">1.5.25.</span> <span class="toc-text"> 1.5.25?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1526"><span class="toc-number">1.5.26.</span> <span class="toc-text"> 1.5.26?</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC2%E7%AB%A0-%E6%8E%92%E5%BA%8F"><span class="toc-number">2.</span> <span class="toc-text"> 第2章 排序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E5%88%9D%E7%BA%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95"><span class="toc-number">2.1.</span> <span class="toc-text"> 2.1 初级排序算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#211"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 2.1.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#212"><span class="toc-number">2.1.2.</span> <span class="toc-text"> 2.1.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#213"><span class="toc-number">2.1.3.</span> <span class="toc-text"> 2.1.3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#214"><span class="toc-number">2.1.4.</span> <span class="toc-text"> 2.1.4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#215"><span class="toc-number">2.1.5.</span> <span class="toc-text"> 2.1.5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#216"><span class="toc-number">2.1.6.</span> <span class="toc-text"> 2.1.6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#217"><span class="toc-number">2.1.7.</span> <span class="toc-text"> 2.1.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#218"><span class="toc-number">2.1.8.</span> <span class="toc-text"> 2.1.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#219"><span class="toc-number">2.1.9.</span> <span class="toc-text"> 2.1.9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2110"><span class="toc-number">2.1.10.</span> <span class="toc-text"> 2.1.10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2111"><span class="toc-number">2.1.11.</span> <span class="toc-text"> 2.1.11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2112"><span class="toc-number">2.1.12.</span> <span class="toc-text"> 2.1.12</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2113"><span class="toc-number">2.1.13.</span> <span class="toc-text"> 2.1.13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2114"><span class="toc-number">2.1.14.</span> <span class="toc-text"> 2.1.14?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2115"><span class="toc-number">2.1.15.</span> <span class="toc-text"> 2.1.15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2116"><span class="toc-number">2.1.16.</span> <span class="toc-text"> 2.1.16</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2117"><span class="toc-number">2.1.17.</span> <span class="toc-text"> 2.1.17</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2118"><span class="toc-number">2.1.18.</span> <span class="toc-text"> 2.1.18</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2119"><span class="toc-number">2.1.19.</span> <span class="toc-text"> 2.1.19?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2120"><span class="toc-number">2.1.20.</span> <span class="toc-text"> 2.1.20</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2121"><span class="toc-number">2.1.21.</span> <span class="toc-text"> 2.1.21</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2122"><span class="toc-number">2.1.22.</span> <span class="toc-text"> 2.1.22</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2123"><span class="toc-number">2.1.23.</span> <span class="toc-text"> 2.1.23</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2124"><span class="toc-number">2.1.24.</span> <span class="toc-text"> 2.1.24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2125"><span class="toc-number">2.1.25.</span> <span class="toc-text"> 2.1.25</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2126"><span class="toc-number">2.1.26.</span> <span class="toc-text"> 2.1.26</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2127"><span class="toc-number">2.1.27.</span> <span class="toc-text"> 2.1.27</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2128"><span class="toc-number">2.1.28.</span> <span class="toc-text"> 2.1.28</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2129"><span class="toc-number">2.1.29.</span> <span class="toc-text"> 2.1.29</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2130"><span class="toc-number">2.1.30.</span> <span class="toc-text"> 2.1.30</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2131"><span class="toc-number">2.1.31.</span> <span class="toc-text"> 2.1.31</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2132"><span class="toc-number">2.1.32.</span> <span class="toc-text"> 2.1.32?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2133"><span class="toc-number">2.1.33.</span> <span class="toc-text"> 2.1.33?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2134"><span class="toc-number">2.1.34.</span> <span class="toc-text"> 2.1.34?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2135"><span class="toc-number">2.1.35.</span> <span class="toc-text"> 2.1.35?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2136"><span class="toc-number">2.1.36.</span> <span class="toc-text"> 2.1.36?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2137"><span class="toc-number">2.1.37.</span> <span class="toc-text"> 2.1.37?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2138"><span class="toc-number">2.1.38.</span> <span class="toc-text"> 2.1.38?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F"><span class="toc-number">2.2.</span> <span class="toc-text"> 2.2 归并排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#221"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 2.2.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#222"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 2.2.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#223"><span class="toc-number">2.2.3.</span> <span class="toc-text"> 2.2.3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#224"><span class="toc-number">2.2.4.</span> <span class="toc-text"> 2.2.4?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#225"><span class="toc-number">2.2.5.</span> <span class="toc-text"> 2.2.5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#226"><span class="toc-number">2.2.6.</span> <span class="toc-text"> 2.2.6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#227"><span class="toc-number">2.2.7.</span> <span class="toc-text"> 2.2.7?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#228"><span class="toc-number">2.2.8.</span> <span class="toc-text"> 2.2.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#229"><span class="toc-number">2.2.9.</span> <span class="toc-text"> 2.2.9</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2210"><span class="toc-number">2.2.10.</span> <span class="toc-text"> 2.2.10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2211"><span class="toc-number">2.2.11.</span> <span class="toc-text"> 2.2.11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2212"><span class="toc-number">2.2.12.</span> <span class="toc-text"> 2.2.12?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2213"><span class="toc-number">2.2.13.</span> <span class="toc-text"> 2.2.13?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2214"><span class="toc-number">2.2.14.</span> <span class="toc-text"> 2.2.14</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2215"><span class="toc-number">2.2.15.</span> <span class="toc-text"> 2.2.15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2216"><span class="toc-number">2.2.16.</span> <span class="toc-text"> 2.2.16？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2217"><span class="toc-number">2.2.17.</span> <span class="toc-text"> 2.2.17</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2218"><span class="toc-number">2.2.18.</span> <span class="toc-text"> 2.2.18?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2219"><span class="toc-number">2.2.19.</span> <span class="toc-text"> 2.2.19?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2220"><span class="toc-number">2.2.20.</span> <span class="toc-text"> 2.2.20</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2221"><span class="toc-number">2.2.21.</span> <span class="toc-text"> 2.2.21</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2222"><span class="toc-number">2.2.22.</span> <span class="toc-text"> 2.2.22</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2223"><span class="toc-number">2.2.23.</span> <span class="toc-text"> 2.2.23</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2224"><span class="toc-number">2.2.24.</span> <span class="toc-text"> 2.2.24</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2225"><span class="toc-number">2.2.25.</span> <span class="toc-text"> 2.2.25</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2226"><span class="toc-number">2.2.26.</span> <span class="toc-text"> 2.2.26</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2227"><span class="toc-number">2.2.27.</span> <span class="toc-text"> 2.2.27</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2228"><span class="toc-number">2.2.28.</span> <span class="toc-text"> 2.2.28</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2229"><span class="toc-number">2.2.29.</span> <span class="toc-text"> 2.2.29</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F"><span class="toc-number">2.3.</span> <span class="toc-text"> 2.3 快速排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#231"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 2.3.1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#232"><span class="toc-number">2.3.2.</span> <span class="toc-text"> 2.3.2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#233"><span class="toc-number">2.3.3.</span> <span class="toc-text"> 2.3.3?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#234"><span class="toc-number">2.3.4.</span> <span class="toc-text"> 2.3.4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#235"><span class="toc-number">2.3.5.</span> <span class="toc-text"> 2.3.5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#236"><span class="toc-number">2.3.6.</span> <span class="toc-text"> 2.3.6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#237"><span class="toc-number">2.3.7.</span> <span class="toc-text"> 2.3.7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#238"><span class="toc-number">2.3.8.</span> <span class="toc-text"> 2.3.8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#239"><span class="toc-number">2.3.9.</span> <span class="toc-text"> 2.3.9?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2310"><span class="toc-number">2.3.10.</span> <span class="toc-text"> 2.3.10?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2311"><span class="toc-number">2.3.11.</span> <span class="toc-text"> 2.3.11</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/avatar.jpg"></div><div class="author-info__name text-center">rcocco</div><div class="author-info__description text-center">personal blog</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/rcocco">我的Github</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">203</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">29</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/bg.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">rcocco's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">Algs4习题</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-03-16</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="第1章"><a class="markdownIt-Anchor" href="#第1章"></a> 第1章</h1>
<span id="more"></span>
<h2 id="11-基础编程模型"><a class="markdownIt-Anchor" href="#11-基础编程模型"></a> 1.1 基础编程模型</h2>
<ul>
<li>1.1.23</li>
<li>1.1.25</li>
</ul>
<h3 id="111"><a class="markdownIt-Anchor" href="#111"></a> 1.1.1</h3>
<ul>
<li>a：7</li>
<li>b：<code>200.00000019999998812636476941406726837158203125</code>或者说二进制<code>0 10000000110 1001000000000000000000000000011010110101111111001010</code></li>
<li>c：<code>false || true</code>结果是<code>true</code></li>
</ul>
<h3 id="112"><a class="markdownIt-Anchor" href="#112"></a> 1.1.2</h3>
<ul>
<li>a：1.618</li>
<li>b：10.0</li>
<li>c：true</li>
<li>d：“33”</li>
</ul>
<h3 id="113"><a class="markdownIt-Anchor" href="#113"></a> 1.1.3</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">isSame</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; args.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(Integer.parseInt(args[i]) != a) <span class="keyword">return</span> <span class="string">&quot;not equal&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;equal&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="114"><a class="markdownIt-Anchor" href="#114"></a> 1.1.4</h3>
<ul>
<li>a：java的判断语句语法没有then</li>
<li>b：判断语句的条件需要放在括号中</li>
<li>c：没有问题</li>
<li>d：语句后面应该有分号来结束</li>
</ul>
<h3 id="115"><a class="markdownIt-Anchor" href="#115"></a> 1.1.5</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">between01</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> x &gt; <span class="number">0</span> &amp;&amp; x &lt; <span class="number">1</span> &amp;&amp; y &gt; <span class="number">0</span> &amp;&amp; y &lt; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="116"><a class="markdownIt-Anchor" href="#116"></a> 1.1.6</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0 1</span><br><span class="line">1 0</span><br><span class="line">1 1</span><br><span class="line">2 1</span><br><span class="line">3 2</span><br></pre></td></tr></table></figure>
<p>斐波那契数列<code>0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610</code></p>
<h3 id="117"><a class="markdownIt-Anchor" href="#117"></a> 1.1.7</h3>
<ul>
<li>a：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(9.0 - 9.0&#x2F;9.0) &gt; 0.001</span><br><span class="line">t &#x3D; (9.0&#x2F;9.0+9.0)&#x2F;2.0 &#x3D; 5</span><br><span class="line">(5 - 9.0&#x2F;5) &gt; 0.001</span><br><span class="line">t &#x3D; (9.0&#x2F;5 + 5) &#x2F; 2.0 &#x3D; 3.4</span><br><span class="line">(3.4 - 9.0&#x2F;3.4) &gt; 0.001</span><br><span class="line">t &#x3D; (9.0&#x2F;3.4 + 3.4) &#x2F; 2.0 &#x3D; 3.0235294117647</span><br><span class="line">(3.0235294117647 - 9.0&#x2F;3.0235294117647) &gt; 0.001</span><br><span class="line">t &#x3D; (9.0&#x2F;3.0235294117647 + 3.0235294117647)&#x2F;2 &#x3D; 3.000091554</span><br><span class="line">(3.000091554 - 9.0 &#x2F; 3.000091554) &#x3D; 0.0001831052 false</span><br><span class="line">小数后面保留5为得到3.00009</span><br></pre></td></tr></table></figure>
<ul>
<li>b：外层循环变量i是几，内层就执行几次。外层循环变量i的范围是从1到999，于是内层循环执行1+2+…+999次等于499500</li>
<li>c：对每个i，内层循环都执行1000次，外层循环变量i的范围是1到512，即2的0次方到2的9次方共10次。于是等于10000</li>
</ul>
<h3 id="118"><a class="markdownIt-Anchor" href="#118"></a> 1.1.8</h3>
<ul>
<li>a：打印<code>b</code></li>
<li>b：打印<code>197</code>，加法运算符只有至少一个操作数类型是String时才会是连接运算符，char类型就是2字节无符号整数，见<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/specs/jls/se15/html/jls-15.html#jls-15.18.2">规范</a></li>
<li>c：打印<code>e</code></li>
</ul>
<h3 id="119"><a class="markdownIt-Anchor" href="#119"></a> 1.1.9</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toBinaryString</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    String s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        s = (N % <span class="number">2</span>) + s;</span><br><span class="line">        N /= <span class="number">2</span>;</span><br><span class="line">    &#125;<span class="keyword">while</span>(N != <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>书本给出的答案（正整数）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toBinaryString</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    String s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n = N; n &gt; <span class="number">0</span>; n /= <span class="number">2</span>)</span><br><span class="line">        s = (n % <span class="number">2</span>) + s;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1110"><a class="markdownIt-Anchor" href="#1110"></a> 1.1.10</h3>
<p>只定义了数组，没有通过new分配内存。</p>
<h3 id="1111"><a class="markdownIt-Anchor" href="#1111"></a> 1.1.11</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">printBoolean</span><span class="params">(<span class="keyword">boolean</span>[][] arr)</span> </span>&#123;</span><br><span class="line">    String s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr[i].length; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[i][j]) s += <span class="string">&quot;*&quot;</span>;</span><br><span class="line">            <span class="keyword">else</span> s += <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        s += <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1112"><a class="markdownIt-Anchor" href="#1112"></a> 1.1.12</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">9 8 7 6 5 4 3 2 1 0</span><br><span class="line">0 1 2 3 4 4 3 2 1 0</span><br></pre></td></tr></table></figure>
<p>打印0-9，打印循环变量i，跟数组无关。</p>
<h3 id="1113"><a class="markdownIt-Anchor" href="#1113"></a> 1.1.13</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] trans(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> M, <span class="keyword">int</span> N) &#123;</span><br><span class="line">    <span class="keyword">int</span>[][] t_matrix = <span class="keyword">new</span> <span class="keyword">int</span>[N][];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        t_matrix[i] = <span class="keyword">new</span> <span class="keyword">int</span>[M];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; M; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++)&#123;</span><br><span class="line">            t_matrix[j][i] = matrix[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t_matrix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1114"><a class="markdownIt-Anchor" href="#1114"></a> 1.1.14</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">lg</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N &lt; <span class="number">1</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">2</span>; t &lt;= N; t *= <span class="number">2</span>) &#123;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1115"><a class="markdownIt-Anchor" href="#1115"></a> 1.1.15</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] histogram(<span class="keyword">int</span>[] a, <span class="keyword">int</span> M) &#123;</span><br><span class="line">    <span class="keyword">int</span>[] count = <span class="keyword">new</span> <span class="keyword">int</span>[M];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] &lt; M)</span><br><span class="line">            count[a[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1116"><a class="markdownIt-Anchor" href="#1116"></a> 1.1.16</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">exR1(3) + 6 + exR1(4) + 6</span><br><span class="line">(exR1(0) + 3 +exR1(1) + 3) + 6 + (exR1(1)+4+exr1(2)+4) + 6</span><br><span class="line">(&quot;&quot;+3+(exR1(-2)+1+exR1(-1)+1)+3) + 6 + ((exR1(-2)+1+exR1(-1)+1) + 4 + (exR1(-1)+2+exR1(0)+2) + 4) + 6</span><br><span class="line">(&quot;&quot;+3+(&quot;&quot;+1+&quot;&quot;+1)+3) + 6 + ((&quot;&quot;+1+&quot;&quot;+1) + 4 + (&quot;&quot;+2+&quot;&quot;+2) + 4) + 6</span><br><span class="line">(&quot;&quot;+3+&quot;11&quot;+3) + 6 + (&quot;11&quot; + 4 + &quot;22&quot; + 4) + 6</span><br><span class="line">&quot;3113&quot; + 6 + &quot;114224&quot; + 6</span><br><span class="line">&quot;311361142246&quot;</span><br></pre></td></tr></table></figure>
<h3 id="1117"><a class="markdownIt-Anchor" href="#1117"></a> 1.1.17</h3>
<p>递归的调用写在基线条件之前，导致递归无法停止直到爆栈。</p>
<h3 id="1118"><a class="markdownIt-Anchor" href="#1118"></a> 1.1.18</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">第二行为奇数对应的第一行的数相加</span><br><span class="line">mystery(2,25)</span><br><span class="line">2 ,4 ,8,16,32,64</span><br><span class="line">25,12,6,3 ,1 ,0</span><br><span class="line">2+16+32&#x3D;50</span><br><span class="line">mystery(3,11)</span><br><span class="line">3 ,6,12,24,48</span><br><span class="line">11,5,2 ,1 ,0</span><br><span class="line">3+6+24&#x3D;33</span><br><span class="line">mystery(2,25)</span><br><span class="line">2, 4, 16,256,65536,4294967296</span><br><span class="line">25,12,6, 3,  1,    0</span><br><span class="line">2*256*65536&#x3D;33554432</span><br><span class="line">mystery(3,11)</span><br><span class="line">3,9,81,6561,43046721</span><br><span class="line">11,5,2,1,0</span><br><span class="line">3*9*6561&#x3D;177147</span><br></pre></td></tr></table></figure>
<h3 id="1119"><a class="markdownIt-Anchor" href="#1119"></a> 1.1.19</h3>
<p>递归版本在40以后就很慢了，算出48需要1分钟<br />
带缓存的递归：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span>[] cache = <span class="keyword">new</span> <span class="keyword">long</span>[<span class="number">100</span>];</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">F</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(N == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(N == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(cache[N] == <span class="number">0</span>)</span><br><span class="line">        cache[N] = F(N-<span class="number">1</span>) + F(N-<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> cache[N];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>循环：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">F</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(N &lt;= <span class="number">1</span>) <span class="keyword">return</span> N;</span><br><span class="line">    <span class="keyword">long</span> a = <span class="number">0</span>, b = <span class="number">1</span>, t;</span><br><span class="line">    <span class="keyword">while</span>(N &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        t = b;</span><br><span class="line">        b = a + b;</span><br><span class="line">        a = t;</span><br><span class="line">        N--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1120"><a class="markdownIt-Anchor" href="#1120"></a> 1.1.20</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">ln</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(N &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">return</span> ln(N-<span class="number">1</span>) + Math.log(N);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1121"><a class="markdownIt-Anchor" href="#1121"></a> 1.1.21</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (!StdIn.isEmpty()) &#123;</span><br><span class="line">    String name = StdIn.readString();</span><br><span class="line">    <span class="keyword">int</span> p = StdIn.readInt();</span><br><span class="line">    <span class="keyword">int</span> t = StdIn.readInt();</span><br><span class="line">    StdOut.printf(<span class="string">&quot;%s\t%d\t%d\t%.3f\n&quot;</span>, name, p, t, (<span class="keyword">double</span>) p / t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1122"><a class="markdownIt-Anchor" href="#1122"></a> 1.1.22</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearch</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> rank(key, a, <span class="number">0</span>, a.length - <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi, <span class="keyword">int</span> deep)</span> </span>&#123;</span><br><span class="line">        StdOut.println(<span class="string">&quot;a[&quot;</span>+lo+<span class="string">&quot;,&quot;</span>+hi+<span class="string">&quot;] &quot;</span>+ deep);</span><br><span class="line">        deep += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (lo &gt; hi) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; a[mid]) <span class="keyword">return</span> rank(key, a, lo, mid - <span class="number">1</span>, deep);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; a[mid]) <span class="keyword">return</span> rank(key, a, mid + <span class="number">1</span>, hi, deep);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] whitelist = In.readInts(args[<span class="number">0</span>]);</span><br><span class="line">        Arrays.sort(whitelist);</span><br><span class="line">        <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">            StdOut.println(<span class="string">&quot;------------&quot;</span>);</span><br><span class="line">            <span class="keyword">int</span> key = StdIn.readInt();</span><br><span class="line">            <span class="keyword">if</span>(rank(key, whitelist) &lt; <span class="number">0</span>)</span><br><span class="line">                StdOut.println(key);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1123"><a class="markdownIt-Anchor" href="#1123"></a> 1.1.23?</h3>
<h3 id="1124"><a class="markdownIt-Anchor" href="#1124"></a> 1.1.24</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">105,24</span><br><span class="line">24,9</span><br><span class="line">9,6</span><br><span class="line">6,3</span><br><span class="line">3,0</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">    StdOut.println(<span class="string">&quot;gcd(&quot;</span>+p+<span class="string">&quot;,&quot;</span>+q+<span class="string">&quot;)&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(q == <span class="number">0</span>) <span class="keyword">return</span> p;</span><br><span class="line">    <span class="keyword">int</span> r = p % q;</span><br><span class="line">    <span class="keyword">return</span> gcd(q,r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1125"><a class="markdownIt-Anchor" href="#1125"></a> 1.1.25?</h3>
<h3 id="1126"><a class="markdownIt-Anchor" href="#1126"></a> 1.1.26</h3>
<p>第一行：若<code>a &gt; b</code>则交换a和b，此时一定有<code>a &lt; b</code><br />
第二行：若<code>a &gt; c</code>则交换a和c，此时一定有<code>a &lt; c</code><br />
至此，a已就位<br />
第三行，若<code>b &gt; c</code>则交换b和c，此时一定有<code>b &lt; c</code><br />
至此，b和c已就位</p>
<h3 id="1127"><a class="markdownIt-Anchor" href="#1127"></a> 1.1.27</h3>
<p>每次递归可以增加两次调用。<br />
当任何一个参数小于0，或者两个参数都等于0时递归停止。<br />
第二个参数是50，先停止，停止时共进行<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="27.639ex" height="2.185ex" role="img" focusable="false" viewBox="0 -883.9 12216.7 965.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(500, 413) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="mo" transform="translate(1125.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(2126, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(500, 413) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(3251.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(4252, 0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(5646.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(6646.4, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(500, 0)"></path></g></g></g><g data-mml-node="mo" transform="translate(8181.3, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(9237.1, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(500, 0)"></path></g></g></g><g data-mml-node="mo" transform="translate(10716.4, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(11716.7, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container>次调用。<br />
第一个参数是100，后停止，假设此前其他调用都没有停止，则此时已进行<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="24.429ex" height="2.185ex" role="img" focusable="false" viewBox="0 -883.9 10797.8 965.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(500, 413) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="mo" transform="translate(1125.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(2126, 0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(3520.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(4520.4, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500, 0)"></path><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" transform="translate(1000, 0)"></path></g></g></g><g data-mml-node="mo" transform="translate(6408.9, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(7464.7, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500, 0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1000, 0)"></path></g></g></g><g data-mml-node="mo" transform="translate(9297.5, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(10297.8, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></svg></mjx-container>次调用，所以估计递归总调用次数是<br />
<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="16.546ex" height="2.565ex" role="img" focusable="false" viewBox="0 -883.9 7313.3 1133.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="msup" transform="translate(278, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(500, 0)"></path></g></g></g><g data-mml-node="mo" transform="translate(1757.3, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(2757.6, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(3257.6, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(3702.2, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500, 0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1000, 0)"></path></g></g></g><g data-mml-node="mo" transform="translate(5535.1, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(6535.3, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(7035.3, 0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">binomial</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span> k, <span class="keyword">double</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span>[][] a = <span class="keyword">new</span> <span class="keyword">double</span>[N+<span class="number">1</span>][k+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= N; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k; j++)&#123;</span><br><span class="line">            a[i][j] = Double.POSITIVE_INFINITY;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> binomial(a, N, k, p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">binomial</span><span class="params">(<span class="keyword">double</span>[][] a, <span class="keyword">int</span> N, <span class="keyword">int</span> k, <span class="keyword">double</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N == <span class="number">0</span> &amp;&amp; k == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">if</span> (N &lt; <span class="number">0</span> || k &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">if</span>(a[N][k] != Double.POSITIVE_INFINITY) <span class="keyword">return</span> a[N][k];</span><br><span class="line">    <span class="keyword">double</span> result = (<span class="number">1.0</span> - p) * binomial(a, N - <span class="number">1</span>, k, p) + p * binomial(a, N - <span class="number">1</span>, k - <span class="number">1</span>, p);</span><br><span class="line">    a[N][k] = result;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1128"><a class="markdownIt-Anchor" href="#1128"></a> 1.1.28</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] removeDuplicate(<span class="keyword">int</span>[] arr)&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; arr.length; j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] != arr[j])&#123;</span><br><span class="line">            i++;</span><br><span class="line">            arr[i] = arr[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span>[] new_arr = <span class="keyword">new</span> <span class="keyword">int</span>[i+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; new_arr.length; j++)&#123;</span><br><span class="line">        new_arr[j] = arr[j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> new_arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1129"><a class="markdownIt-Anchor" href="#1129"></a> 1.1.29</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">0 1 2 3 4 5 6 7 8 9 10</span><br><span class="line">1 2 2 2 4 4 4 8 8 9 10</span><br><span class="line">a[i] &lt;&#x3D; a[i+1]</span><br><span class="line">小于key的元素的数量，即小于key的元素的最大下标max(a[i] &lt; key)</span><br><span class="line">mid &#x3D; lo + (hi - lo)&#x2F;2</span><br><span class="line">if(a[mid] &lt; key)   则a[lo,mid] &lt; key，最大下标不是mid就是在a[mid+1,hi]中</span><br><span class="line">if(a[mid] &lt;&#x3D; key) 则a[lo,mid] &lt;&#x3D; key</span><br><span class="line">if(a[mid] &gt; key)   则a[mid,hi] &gt; key</span><br><span class="line">if(a[mid] &gt;&#x3D; key) 则a[mid,hi] &gt;&#x3D; key   最大下标一定在a[lo,mid-1]中</span><br><span class="line">if(a[mid] &#x3D;&#x3D; key) </span><br><span class="line">2</span><br><span class="line">1 3</span><br><span class="line">hi &lt; lo &#x3D;&#x3D;&#x3D; -1</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">rankless</span><span class="params">(<span class="keyword">int</span> key ,<span class="keyword">int</span>[] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> max_index = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(a[mid] &lt; key)&#123;</span><br><span class="line">            <span class="keyword">if</span>(mid &gt; max_index)</span><br><span class="line">                max_index = mid;</span><br><span class="line">            lo = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            hi = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max_index + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> rankless(key+<span class="number">1</span>,a) - rankless(key,a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1130"><a class="markdownIt-Anchor" href="#1130"></a> 1.1.30</h3>
<p>互质等价于最大公约数为1，<br />
0和1互质<br />
1和任何数都互质<br />
除1以外的任何数和自身都不互质</p>
<p>2,4,6,8,10,12…<br />
[2,2][2,4],[2,6],[2,8]<br />
[4,4][4,6],[4,8]…都不互质 false<br />
如果false就跳过，说明前面判断过了<br />
只用在素数上累加？<br />
[3,6] [3,9]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span>[][] relativelyPrime(<span class="keyword">int</span> N)&#123;</span><br><span class="line">    <span class="keyword">boolean</span>[][] rp = <span class="keyword">new</span> <span class="keyword">boolean</span>[N][N];</span><br><span class="line">    rp[<span class="number">0</span>][<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">    rp[<span class="number">1</span>][<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">    rp[<span class="number">1</span>][<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; rp.length; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; rp[i].length; j++)&#123;</span><br><span class="line">            rp[i][j] = <span class="keyword">true</span>;</span><br><span class="line">            rp[j][i] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> p = <span class="number">2</span>; p &lt; rp.length; p++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = p; i &lt; rp.length; i += p)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + p; j &lt; rp[i].length; j += p)&#123;</span><br><span class="line">                <span class="keyword">if</span>(rp[i][j])&#123;</span><br><span class="line">                    rp[i][j] = <span class="keyword">false</span>;</span><br><span class="line">                    rp[j][i] = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1131"><a class="markdownIt-Anchor" href="#1131"></a> 1.1.31?</h3>
<p>如何在圆周上画间距相等的N个点？<br />
N个点，间距是1/N圆周，可以给一个起始点坐标，下一个点的坐标怎么算？<br />
已知一点和弧长，求下一个点的坐标</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> N = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">double</span> p = Double.parseDouble(args[<span class="number">1</span>]);</span><br><span class="line">StdDraw.setPenRadius(<span class="number">0.05</span>);</span><br><span class="line">StdDraw.point(<span class="number">0.05</span>, <span class="number">0.5</span>);</span><br></pre></td></tr></table></figure>
<h3 id="1132"><a class="markdownIt-Anchor" href="#1132"></a> 1.1.32</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> N = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">double</span> l = Double.parseDouble(args[<span class="number">1</span>]);</span><br><span class="line"><span class="keyword">double</span> r = Double.parseDouble(args[<span class="number">2</span>]);</span><br><span class="line"><span class="keyword">double</span> gap = (r - l) / N;</span><br><span class="line"><span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line"><span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">    <span class="keyword">double</span> d = StdIn.readDouble();</span><br><span class="line">    <span class="keyword">int</span> i = (<span class="keyword">int</span>) Math.floor((d - l) / gap);</span><br><span class="line">    arr[i] += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line"><span class="keyword">int</span> max = -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr[i] &gt; max)</span><br><span class="line">        max = arr[i];</span><br><span class="line">&#125;</span><br><span class="line">StdDraw.setYscale(<span class="number">0</span>, max);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">    <span class="keyword">double</span> cx = <span class="number">0.5</span> + <span class="number">1.0</span> * i / N;</span><br><span class="line">    <span class="keyword">double</span> cy = arr[i] / <span class="number">2.0</span>;</span><br><span class="line">    <span class="keyword">double</span> half_width = <span class="number">0.5</span>/N;</span><br><span class="line">    <span class="keyword">double</span> half_height = arr[i] / <span class="number">2.0</span>;</span><br><span class="line">    StdDraw.filledRectangle(cx,cy,half_width,half_height);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1133"><a class="markdownIt-Anchor" href="#1133"></a> 1.1.33</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Matrix</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">dot</span><span class="params">(<span class="keyword">double</span>[] x, <span class="keyword">double</span>[] y)</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; x.length; i++)&#123;</span><br><span class="line">            sum += x[i] * y[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[][] mult(<span class="keyword">double</span>[][] a, <span class="keyword">double</span>[][] b)&#123;</span><br><span class="line">        <span class="keyword">double</span>[][] c = <span class="keyword">new</span> <span class="keyword">double</span>[a.length][b[<span class="number">0</span>].length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; b[<span class="number">0</span>].length; j++)&#123;</span><br><span class="line">                <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; b.length; k++)&#123;</span><br><span class="line">                    sum += a[i][k]* b[k][j];</span><br><span class="line">                &#125;</span><br><span class="line">                c[i][j] = sum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[][] transpose(<span class="keyword">double</span>[][] a)&#123;</span><br><span class="line">        <span class="keyword">double</span>[][] t = <span class="keyword">new</span> <span class="keyword">double</span>[a.length][a[<span class="number">0</span>].length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; a[<span class="number">0</span>].length; j++)&#123;</span><br><span class="line">                t[j][i] = a[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] mult(<span class="keyword">double</span>[][] a, <span class="keyword">double</span>[] x)&#123;</span><br><span class="line">        <span class="comment">// 向量当成列矩阵 m*n  n*1 =  m*1</span></span><br><span class="line">        <span class="keyword">double</span>[] v = <span class="keyword">new</span> <span class="keyword">double</span>[a.length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.length; i++)&#123;</span><br><span class="line">            <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; x.length; k++)&#123;</span><br><span class="line">                sum += a[i][k] * x[k];</span><br><span class="line">            &#125;</span><br><span class="line">            v[i] = sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] mult(<span class="keyword">double</span>[] y, <span class="keyword">double</span>[][] a)&#123;</span><br><span class="line">        <span class="comment">//  1*m   m*n = 1 * n</span></span><br><span class="line">        <span class="keyword">double</span>[] v = <span class="keyword">new</span> <span class="keyword">double</span>[a[<span class="number">0</span>].length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; v.length; i++)&#123;</span><br><span class="line">            <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; a[<span class="number">0</span>].length;k++)&#123;</span><br><span class="line">                sum += y[k] * a[k][i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span>[][] x = &#123;&#123;<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>&#125;,&#123;<span class="number">3</span>,<span class="number">8</span>,<span class="number">2</span>&#125;,&#123;<span class="number">6</span>,<span class="number">0</span>,<span class="number">4</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">double</span>[][] y = &#123;&#123;<span class="number">2</span>,<span class="number">4</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">3</span>,<span class="number">2</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">double</span>[][] z = mult(x,y);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">double</span>[] row:z)&#123;</span><br><span class="line">            System.out.println(Arrays.toString(row));</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">double</span>[][] a = &#123;&#123;-<span class="number">3</span>,<span class="number">0</span>,<span class="number">2</span>&#125;,&#123;<span class="number">0</span>,<span class="number">3</span>,-<span class="number">5</span>&#125;,&#123;<span class="number">2</span>,-<span class="number">5</span>,<span class="number">7</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">double</span>[][] t = transpose(a);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">double</span>[] row:t)&#123;</span><br><span class="line">            System.out.println(Arrays.toString(row));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">double</span>[][] c = &#123;&#123;<span class="number">1</span>,-<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">3</span>,<span class="number">1</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">double</span>[] d = &#123;<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(mult(c,d)));</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">double</span>[][] d2 = &#123;&#123;<span class="number">2</span>&#125;,&#123;<span class="number">1</span>&#125;,&#123;<span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">double</span>[][] e = mult(c,d2);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">double</span>[] row:e)&#123;</span><br><span class="line">            System.out.println(Arrays.toString(row));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="1134"><a class="markdownIt-Anchor" href="#1134"></a> 1.1.34</h3>
<ul>
<li>打印出最大和最小的数：两个变量保存最大值和最小值</li>
<li>打印出所有数的中位数：保存所有值</li>
<li>打印出第 k 小的数，k 小于 100：保存所有值</li>
<li>打印出所有数的平方和：一个变量</li>
<li>打印出 N 个数的平均值：一个变量</li>
<li>打印出大于平均值的数的百分比：所有值</li>
<li>将 N 个数按照升序打印：所有值</li>
<li>将 N 个数按照随机顺序打印：所有值</li>
</ul>
<h3 id="1135"><a class="markdownIt-Anchor" href="#1135"></a> 1.1.35</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">174978</span><br><span class="line">2910519</span><br><span class="line">3281987</span><br><span class="line">77858</span><br><span class="line">766550</span><br></pre></td></tr></table></figure>
<p>数值差距较大，随机数生成函数不够准确，可能是伪随机的原因？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> SIDES = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">double</span>[] dist = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">2</span>*SIDES+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= SIDES; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= SIDES; j++)&#123;</span><br><span class="line">        dist[i+j] += <span class="number">1.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">2</span>; k &lt;= <span class="number">2</span>*SIDES; k++)&#123;</span><br><span class="line">    dist[k] /= <span class="number">36.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span>[] frequency = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>*SIDES+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">boolean</span> stop = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">while</span>(!stop)&#123;</span><br><span class="line">    <span class="keyword">int</span> a = StdRandom.uniform(<span class="number">1</span>,<span class="number">7</span>);</span><br><span class="line">    <span class="keyword">int</span> b = StdRandom.uniform(<span class="number">1</span>,<span class="number">7</span>);</span><br><span class="line">    frequency[a+b] += <span class="number">1</span>;</span><br><span class="line">    N++;</span><br><span class="line">    stop = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= <span class="number">2</span>*SIDES; i++)&#123;</span><br><span class="line">        String d = String.format(<span class="string">&quot;%.4f&quot;</span>,dist[i]);</span><br><span class="line">        d = d.substring(<span class="number">0</span>, d.length() - <span class="number">1</span>);</span><br><span class="line">        String p = String.format(<span class="string">&quot;%.4f&quot;</span>,frequency[i] * <span class="number">1.0</span> / N);</span><br><span class="line">        p = p.substring(<span class="number">0</span>, p.length() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(!d.equals(p))&#123;</span><br><span class="line">            stop = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span>[] probability = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">2</span>*SIDES+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= <span class="number">2</span>*SIDES; i++)&#123;</span><br><span class="line">    probability[i] = frequency[i] * <span class="number">1.0</span> / N;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//        System.out.println(Arrays.toString(dist));</span></span><br><span class="line"><span class="comment">//        System.out.println(Arrays.toString(frequency));</span></span><br><span class="line"><span class="comment">//        System.out.println(Arrays.toString(probability));</span></span><br><span class="line">System.out.println(N);</span><br></pre></td></tr></table></figure>
<h3 id="1136"><a class="markdownIt-Anchor" href="#1136"></a> 1.1.36</h3>
<p>对于每一个数，每次打乱它可能落在M个格子中的任何一个。<br />
一共打乱N次。<br />
好的乱序函数可以使得它平均落在这M个格子里，因此落在每个格子里的次数为<code>N/M</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print2dArray</span><span class="params">(<span class="keyword">int</span>[][] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span>[] row: a)&#123;</span><br><span class="line">        System.out.println(Arrays.toString(row));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffle</span><span class="params">(<span class="keyword">double</span>[] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> r = i + StdRandom.uniform(N-i);</span><br><span class="line">        <span class="keyword">double</span> temp = a[i];</span><br><span class="line">        a[i] = a[r];</span><br><span class="line">        a[r] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffleTest</span><span class="params">(<span class="keyword">int</span> M, <span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[][] c = <span class="keyword">new</span> <span class="keyword">int</span>[M][M];</span><br><span class="line">    <span class="keyword">double</span>[] a = <span class="keyword">new</span> <span class="keyword">double</span>[M];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; N; n++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">            a[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        shuffle(a);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; a.length;j++)&#123;</span><br><span class="line">            c[(<span class="keyword">int</span>)a[j]][j] += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    print2dArray(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1137"><a class="markdownIt-Anchor" href="#1137"></a> 1.1.37</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffleBad</span><span class="params">(<span class="keyword">double</span>[] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> r = StdRandom.uniform(N);</span><br><span class="line">        <span class="keyword">double</span> temp = a[i];</span><br><span class="line">        a[i] = a[r];</span><br><span class="line">        a[r] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试发现这个乱序函数落在格子中的次数偏离<code>M/N</code>较大<br />
上面是这个的结果，下面是原来的乱序函数的结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[4883, 4947, 5015, 5237, 5062, 4904, 5040, 4911, 4982, 5019]</span><br><span class="line">[6428, 4908, 4598, 4677, 4760, 4910, 4792, 4963, 4985, 4979]</span><br><span class="line">[5955, 6077, 4581, 4667, 4559, 4686, 4812, 4787, 4900, 4976]</span><br><span class="line">[5578, 5742, 6077, 4317, 4467, 4501, 4634, 4814, 4867, 5003]</span><br><span class="line">[5161, 5632, 5808, 5954, 4229, 4431, 4477, 4593, 4834, 4881]</span><br><span class="line">[5056, 5024, 5266, 5625, 5899, 4299, 4382, 4679, 4750, 5020]</span><br><span class="line">[4645, 4778, 5008, 5159, 5588, 5924, 4423, 4546, 4817, 5112]</span><br><span class="line">[4367, 4584, 4808, 4959, 5403, 5675, 6024, 4512, 4752, 4916]</span><br><span class="line">[4081, 4235, 4598, 4806, 5138, 5433, 5715, 6261, 4714, 5019]</span><br><span class="line">[3846, 4073, 4241, 4599, 4895, 5237, 5701, 5934, 6399, 5075]</span><br><span class="line">--</span><br><span class="line">[5016, 4906, 4953, 4920, 5033, 5198, 4957, 4972, 4977, 5068]</span><br><span class="line">[4936, 4972, 5030, 5109, 4854, 4878, 5094, 5090, 5051, 4986]</span><br><span class="line">[5000, 4950, 4973, 4985, 5051, 4999, 4976, 5055, 4967, 5044]</span><br><span class="line">[4978, 5033, 5035, 4994, 4902, 5037, 5094, 4914, 5015, 4998]</span><br><span class="line">[5094, 4995, 5026, 4991, 5001, 5053, 4849, 5077, 5001, 4913]</span><br><span class="line">[5055, 5046, 5070, 4952, 4958, 5053, 4975, 4928, 4966, 4997]</span><br><span class="line">[5001, 5026, 4973, 5048, 5034, 5050, 4923, 4936, 4966, 5043]</span><br><span class="line">[5028, 5045, 5027, 5030, 5058, 4916, 5026, 4879, 5028, 4963]</span><br><span class="line">[4913, 5083, 4965, 4945, 5036, 4864, 5084, 5071, 4984, 5055]</span><br><span class="line">[4979, 4944, 4948, 5026, 5073, 4952, 5022, 5078, 5045, 4933]</span><br></pre></td></tr></table></figure>
<p>但为什么选择的用于交换的索引范围是<code>[i,N-i)</code>而不能是<code>[0,N)</code>？<br />
每一轮选择的索引范围分别是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int r &#x3D; i + StdRandom.uniform(N-i);</span><br><span class="line">[0,10)  [0,10)</span><br><span class="line">[1,10)  [0,10)</span><br><span class="line">[2,10)  [0,10)</span><br><span class="line">[3,10)  [0,10)</span><br></pre></td></tr></table></figure>
<h3 id="1138"><a class="markdownIt-Anchor" href="#1138"></a> 1.1.38</h3>
<p>二分查找：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">367966</span><br><span class="line">9779</span><br><span class="line">367966</span><br><span class="line">9585</span><br><span class="line">367966</span><br><span class="line">9521</span><br></pre></td></tr></table></figure>
<p>约9500毫秒<br />
暴力查找法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">BruteForceSearch</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(key == a[i]) <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>900000毫秒仍然没有结束。</p>
<h3 id="1139"><a class="markdownIt-Anchor" href="#1139"></a> 1.1.39</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(key &lt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key &gt; a[mid]) lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] randomArray(<span class="keyword">int</span> N)&#123;</span><br><span class="line">    <span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">        a[i] = StdRandom.uniform(<span class="number">100000</span>, <span class="number">1000000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">match</span><span class="params">(<span class="keyword">int</span> T)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] N_arr =&#123;<span class="number">1000</span>, <span class="number">10000</span>, <span class="number">100000</span>, <span class="number">1000000</span>&#125;;</span><br><span class="line">    <span class="keyword">double</span>[] result = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++)&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> t = <span class="number">0</span>; t &lt; T; t++)&#123;</span><br><span class="line">            <span class="keyword">int</span>[] a = randomArray(N_arr[k]);</span><br><span class="line">            <span class="keyword">int</span>[] b = randomArray(N_arr[k]);</span><br><span class="line">            Arrays.sort(b);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">                <span class="comment">// 如果数组a中的这个数，在数组b中</span></span><br><span class="line">                <span class="keyword">if</span>(rank(a[i], b) &gt;= <span class="number">0</span>) count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        result[k] = count/(<span class="keyword">double</span>)T;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(Arrays.toString(result));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">N &#x3D; [10^3, 10^4, 10^5, 10^6]</span><br><span class="line">T &#x3D; 10</span><br><span class="line">R &#x3D; [1.0, 112.0, 10518.1, 670560.2]</span><br><span class="line">R &#x3D; [0.8, 112.8, 10520.4, 670632.2]</span><br><span class="line">R &#x3D; [1.4, 112.2, 10548.2, 670795.4]</span><br><span class="line">T &#x3D; 100</span><br><span class="line">R &#x3D; [1.07, 111.27, 10520.56, 670852.61]</span><br><span class="line">R &#x3D; [1.15, 110.12, 10512.86, 670742.36]</span><br></pre></td></tr></table></figure>
<h2 id="12-数据抽象"><a class="markdownIt-Anchor" href="#12-数据抽象"></a> 1.2 数据抽象</h2>
<ul>
<li>1.2.18</li>
</ul>
<h3 id="121"><a class="markdownIt-Anchor" href="#121"></a> 1.2.1?</h3>
<p>找两个最近的点的距离</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> N = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">StdDraw.setPenColor(StdDraw.DARK_GRAY);</span><br><span class="line">StdDraw.setPenRadius(<span class="number">.01</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">    <span class="keyword">double</span> x = StdRandom.uniform(<span class="number">0.0</span>,<span class="number">1.0</span>);</span><br><span class="line">    <span class="keyword">double</span> y = StdRandom.uniform(<span class="number">0.0</span>,<span class="number">1.0</span>);</span><br><span class="line">    Point2D point = <span class="keyword">new</span> Point2D(x,y);</span><br><span class="line">    point.draw();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="122"><a class="markdownIt-Anchor" href="#122"></a> 1.2.2</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> N = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">Interval1D[] intervals = <span class="keyword">new</span> Interval1D[N];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; N; n++)&#123;</span><br><span class="line">    <span class="keyword">double</span> lo = StdIn.readDouble();</span><br><span class="line">    <span class="keyword">double</span> hi = StdIn.readDouble();</span><br><span class="line">    Interval1D interval = <span class="keyword">new</span> Interval1D(lo,hi);</span><br><span class="line">    intervals[n] = interval;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N-<span class="number">1</span>; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N;j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(intervals[i].intersects(intervals[j]))&#123;</span><br><span class="line">            StdOut.printf(<span class="string">&quot;%s, %s\n&quot;</span>,intervals[i], intervals[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="123"><a class="markdownIt-Anchor" href="#123"></a> 1.2.3</h3>
<p>包含关系只从Interval2D的API好像做不到，只能根据左上角的点和右下角的点是否在Interval2D内来判断，但没给获得这些点的API。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> N = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">double</span> min = Double.parseDouble(args[<span class="number">1</span>]);</span><br><span class="line"><span class="keyword">double</span> max = Double.parseDouble(args[<span class="number">2</span>]);</span><br><span class="line">Interval2D[] intervals = <span class="keyword">new</span> Interval2D[N];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> n = <span class="number">0</span>; n &lt; N; n++)&#123;</span><br><span class="line">    <span class="keyword">double</span> wx = StdRandom.uniform(min, max);</span><br><span class="line">    <span class="keyword">double</span> wy = StdRandom.uniform(min, max);</span><br><span class="line">    <span class="keyword">double</span> hx = StdRandom.uniform(min, max);</span><br><span class="line">    <span class="keyword">double</span> hy = StdRandom.uniform(min, max);</span><br><span class="line">    Interval1D width = <span class="keyword">new</span> Interval1D(Math.min(wx,wy), Math.max(wx,wy));</span><br><span class="line">    Interval1D height = <span class="keyword">new</span> Interval1D(Math.min(hx,hy),Math.max(hx,hy));</span><br><span class="line">    Interval2D interval = <span class="keyword">new</span> Interval2D(width, height);</span><br><span class="line">    intervals[n] = interval;</span><br><span class="line">    interval.draw();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N - <span class="number">1</span>; i++)&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; N; j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(intervals[i].intersects(intervals[j])) count++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(count);</span><br></pre></td></tr></table></figure>
<h3 id="124"><a class="markdownIt-Anchor" href="#124"></a> 1.2.4</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String string1 = <span class="string">&quot;hello&quot;</span>; <span class="comment">// 指针string1指向一个hello对象</span></span><br><span class="line">String string2 = string1; <span class="comment">// 指向string2的值是指针string1的值的拷贝</span></span><br><span class="line">string1 = <span class="string">&quot;world&quot;</span>; <span class="comment">// 指针string1指向一个world对象</span></span><br><span class="line">StdOut.println(string1); <span class="comment">// &quot;world&quot;</span></span><br><span class="line">StdOut.println(string2); <span class="comment">// &quot;hello&quot;，指针string2仍然指向一个hello对象</span></span><br></pre></td></tr></table></figure>
<h3 id="125"><a class="markdownIt-Anchor" href="#125"></a> 1.2.5</h3>
<p>还是<code>Hello World</code>。<br />
字符串类型是不可变类型，大写和子串方法返回的都是新字符串。</p>
<h3 id="126"><a class="markdownIt-Anchor" href="#126"></a> 1.2.6</h3>
<p>一个字符串的所有可能的回环变位中，第一个是它自身，最后一个是以最后一个字符开头回环的字符串。<br />
所以把一个字符串再拼接上自己，就能在新字符串中找到所有回环子串。<br />
前提是长度相同，若长度不同，例如<code>ABEF</code>和<code>ABE</code>，上述算法仍为true，但我们不认为它是回环变位。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isCircularRotation</span><span class="params">(String s, String t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s.length() != t.length()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">return</span> (s+s).indexOf(t) &gt;= <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="127"><a class="markdownIt-Anchor" href="#127"></a> 1.2.7</h3>
<p>基线条件：<br />
如果字符串长度为1，就返回字符串本身。<br />
如果字符串长度为2和3，就返回反转顺序的字符串。</p>
<p>返回值是反转的字符串。</p>
<h3 id="128"><a class="markdownIt-Anchor" href="#128"></a> 1.2.8</h3>
<p>交互两个指针的值，使得引用a指向原数组b，引用b指向原数组a。<br />
数组在内存中的实际位置没有发生改变。</p>
<h3 id="129"><a class="markdownIt-Anchor" href="#129"></a> 1.2.9</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearch</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a, Counter counter)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lo = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> hi = a.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(lo &lt;= hi)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">            counter.increment();</span><br><span class="line">            <span class="keyword">if</span>(key &lt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(key &gt; a[mid]) lo = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="comment">// java BinarySearch ../../../algs4-data/largeW.txt &lt; ../../../algs4-data/largeT.txt</span></span><br><span class="line">        <span class="comment">// java BinarySearch ../../../algs4-data/tinyW.txt &lt; ../../../algs4-data/tinyT.txt</span></span><br><span class="line">        <span class="keyword">int</span>[] whitelist = In.readInts(args[<span class="number">0</span>]);</span><br><span class="line">        Arrays.sort(whitelist);</span><br><span class="line">        Counter counter = <span class="keyword">new</span> Counter(<span class="string">&quot;binearySearch&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">int</span> key = StdIn.readInt();</span><br><span class="line">            <span class="keyword">if</span>(rank(key, whitelist, counter) &lt; <span class="number">0</span>)</span><br><span class="line">                StdOut.println(key);</span><br><span class="line">        &#125;</span><br><span class="line">        StdOut.printf(<span class="string">&quot;Total Search: %d \n&quot;</span>, counter.tally());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1210"><a class="markdownIt-Anchor" href="#1210"></a> 1.2.10</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VisualCounter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> maxOperationTimes;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> maxAbsoluteValue;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> counter;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> operationCount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">VisualCounter</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span> max)</span></span>&#123;</span><br><span class="line">        maxOperationTimes = N;</span><br><span class="line">        maxAbsoluteValue = Math.abs(max);</span><br><span class="line">        counter = <span class="number">0</span>;</span><br><span class="line">        operationCount = <span class="number">0</span>;</span><br><span class="line">        StdDraw.setXscale(<span class="number">0</span>, maxOperationTimes+<span class="number">1</span>);</span><br><span class="line">        StdDraw.setYscale(-maxAbsoluteValue-<span class="number">1</span>, maxAbsoluteValue+<span class="number">1</span>);</span><br><span class="line">        StdDraw.setPenRadius(<span class="number">0.01</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(Math.abs(counter) &lt; maxAbsoluteValue &amp;&amp; operationCount &lt; maxOperationTimes)&#123;</span><br><span class="line">            counter++;</span><br><span class="line">            operationCount++;</span><br><span class="line">            StdDraw.setPenColor(StdDraw.DARK_GRAY);</span><br><span class="line">            StdDraw.point(operationCount, counter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">decrement</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(Math.abs(counter) &lt; maxAbsoluteValue &amp;&amp; operationCount &lt; maxOperationTimes)&#123;</span><br><span class="line">            counter--;</span><br><span class="line">            operationCount++;</span><br><span class="line">            StdDraw.setPenColor(StdDraw.DARK_GRAY);</span><br><span class="line">            StdDraw.point(operationCount, counter);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        VisualCounter vc = <span class="keyword">new</span> VisualCounter(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">        vc.increment();</span><br><span class="line">        vc.increment();</span><br><span class="line">        vc.increment();</span><br><span class="line">        vc.increment();</span><br><span class="line">        vc.increment();</span><br><span class="line">        vc.increment();</span><br><span class="line">        vc.decrement();</span><br><span class="line">        vc.decrement();</span><br><span class="line">        vc.decrement();</span><br><span class="line">        vc.increment();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="1211"><a class="markdownIt-Anchor" href="#1211"></a> 1.2.11</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SmartDate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> year;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> month;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> day;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SmartDate</span><span class="params">(<span class="keyword">int</span> month, <span class="keyword">int</span> day, <span class="keyword">int</span> year)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!isValid(month, day, year)) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Invalid date&quot;</span>);</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">        <span class="keyword">this</span>.month = month;</span><br><span class="line">        <span class="keyword">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(<span class="keyword">int</span> month, <span class="keyword">int</span> day, <span class="keyword">int</span> year)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(month &lt; <span class="number">1</span> || month &gt; <span class="number">12</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(day &lt; <span class="number">1</span> || day &gt; getDaysOfMonth(month, year)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getDaysOfMonth</span><span class="params">(<span class="keyword">int</span> month, <span class="keyword">int</span> year)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] d = &#123;<span class="number">31</span>, <span class="number">28</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">30</span>, <span class="number">31</span>&#125;;</span><br><span class="line">        <span class="keyword">if</span>(isLeapYear(year)) d[<span class="number">1</span>]+=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> d[month-<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isLeapYear</span><span class="params">(<span class="keyword">int</span> year)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span> || year % <span class="number">400</span> == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">month</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> month;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">day</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> day;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">year</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> year;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">&quot;%d-%d-%d&quot;</span>, year, month, day);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object that)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span> == that) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(that == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.getClass() != that.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        SmartDate o = (SmartDate) that;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.year == o.year &amp;&amp; <span class="keyword">this</span>.month == o.month &amp;&amp; <span class="keyword">this</span>.day == o.day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(SmartDate that)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.year &lt; that.year) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.year &gt; that.year) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.month &lt; that.month) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.month &gt; that.month) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.day &lt; that.day) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.day &gt; that.day) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        SmartDate date = <span class="keyword">new</span> SmartDate(<span class="number">2</span>,<span class="number">29</span>,<span class="number">2020</span>);</span><br><span class="line">        SmartDate date2 = <span class="keyword">new</span> SmartDate(<span class="number">2</span>,<span class="number">29</span>,<span class="number">2020</span>);</span><br><span class="line">        System.out.println(date.compareTo(date2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1212"><a class="markdownIt-Anchor" href="#1212"></a> 1.2.12</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">dayOfTheWeek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String[] weekday = &#123;<span class="string">&quot;Sunday&quot;</span>, <span class="string">&quot;Monday&quot;</span>, <span class="string">&quot;Tuesday&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Wednesday&quot;</span>, <span class="string">&quot;Thursday&quot;</span>, <span class="string">&quot;Friday&quot;</span>, <span class="string">&quot;Saturday&quot;</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span>[] d = &#123;<span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> monthOffset = d[month-<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">int</span> yearOffset = year - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> dayOffset = day - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> leapOffset = year/<span class="number">4</span> - year/<span class="number">100</span> + year/<span class="number">400</span>;</span><br><span class="line">    <span class="keyword">if</span>(isLeapYear(year) &amp;&amp; month &lt;= <span class="number">2</span>) leapOffset -= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> weekday[(monthOffset + yearOffset + dayOffset + leapOffset + <span class="number">1</span>) % <span class="number">7</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1213"><a class="markdownIt-Anchor" href="#1213"></a> 1.2.13</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Transaction</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Date date;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">double</span> amount;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Transaction</span><span class="params">(String who, Date when, <span class="keyword">double</span> amount)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = who;</span><br><span class="line">        <span class="keyword">this</span>.date = when;</span><br><span class="line">        <span class="keyword">this</span>.amount = amount;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">who</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">when</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.date;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">amount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.amount;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">&quot;%s, %.2f, %s&quot;</span>,name,amount,date.toString());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object that)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span> == that) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(that == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.getClass() != that.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Transaction o = (Transaction) that;</span><br><span class="line">        <span class="keyword">return</span> name.equals(o.name) &amp;&amp; date.equals(o.date) &amp;&amp; amount == o.amount;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Transaction that)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!name.equals(that.name)) <span class="keyword">return</span> name.compareTo(that.name);</span><br><span class="line">        <span class="keyword">if</span>(!date.equals(that.date)) <span class="keyword">return</span> date.compareTo(that.date);</span><br><span class="line">        <span class="keyword">return</span> Double.compare(amount, that.amount);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Transaction t = <span class="keyword">new</span> Transaction(<span class="string">&quot;Alex&quot;</span>, <span class="keyword">new</span> Date(<span class="number">12</span>,<span class="number">2</span>,<span class="number">2020</span>),<span class="number">104.5</span>);</span><br><span class="line">        System.out.println(t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1214"><a class="markdownIt-Anchor" href="#1214"></a> 1.2.14</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object that)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span> == that) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(that == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.getClass() != that.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    Transaction o = (Transaction) that;</span><br><span class="line">    <span class="keyword">return</span> name.equals(o.name) &amp;&amp; date.equals(o.date) &amp;&amp; amount == o.amount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1215"><a class="markdownIt-Anchor" href="#1215"></a> 1.2.15</h3>
<p>Java字符串的split函数参数是一个正则表达式，每当正则匹配时，这个匹配到的串都会作为分隔符，因此利用<code>|</code>运算符就可以实现多种分隔符。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] readInts(String name) &#123;</span><br><span class="line">    In in = <span class="keyword">new</span> In(name);</span><br><span class="line">    String input = in.readAll();</span><br><span class="line">    String[] words = input.split(<span class="string">&quot;\\s+&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span>[] ints = <span class="keyword">new</span> <span class="keyword">int</span>[words.length];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.length; i++) &#123;</span><br><span class="line">        ints[i] = Integer.parseInt(words[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ints;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1216"><a class="markdownIt-Anchor" href="#1216"></a> 1.2.16</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rational</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> p;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> q;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Rational</span><span class="params">(<span class="keyword">int</span> numerator, <span class="keyword">int</span> denominator)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(denominator == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Invalid denominator&quot;</span>);</span><br><span class="line">        <span class="keyword">long</span> p = numerator;</span><br><span class="line">        <span class="keyword">long</span> q = denominator;</span><br><span class="line">        <span class="keyword">if</span>(q &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            p = - p;</span><br><span class="line">            q = - q;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> divisor = gcd(p, q);</span><br><span class="line">        <span class="keyword">this</span>.p = p / divisor;</span><br><span class="line">        <span class="keyword">this</span>.q = q / divisor;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">long</span> <span class="title">gcd</span><span class="params">(<span class="keyword">long</span> a, <span class="keyword">long</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a &lt; <span class="number">0</span>) a = -a;</span><br><span class="line">        <span class="keyword">if</span>(b &lt; <span class="number">0</span>) b = -b;</span><br><span class="line">        <span class="keyword">long</span> r;</span><br><span class="line">        <span class="keyword">while</span>(b != <span class="number">0</span>)&#123;</span><br><span class="line">            r = a % b;</span><br><span class="line">            a = b;</span><br><span class="line">            b = r;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rational <span class="title">plus</span><span class="params">(Rational b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> q = <span class="keyword">this</span>.q * b.q;</span><br><span class="line">        <span class="keyword">long</span> p = <span class="keyword">this</span>.p * b.q + <span class="keyword">this</span>.q * b.p;</span><br><span class="line">        <span class="keyword">long</span> divisor = gcd(p, q);</span><br><span class="line">        p = p/divisor;</span><br><span class="line">        q = q/divisor;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rational((<span class="keyword">int</span>)p, (<span class="keyword">int</span>)q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rational <span class="title">minus</span><span class="params">(Rational b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> q = <span class="keyword">this</span>.q * b.q;</span><br><span class="line">        <span class="keyword">long</span> p = <span class="keyword">this</span>.p * b.q - <span class="keyword">this</span>.q * b.p;</span><br><span class="line">        <span class="keyword">long</span> divisor = gcd(p, q);</span><br><span class="line">        p = p/divisor;</span><br><span class="line">        q = q/divisor;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rational((<span class="keyword">int</span>)p, (<span class="keyword">int</span>)q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rational <span class="title">times</span><span class="params">(Rational b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> p = <span class="keyword">this</span>.p * b.p;</span><br><span class="line">        <span class="keyword">long</span> q = <span class="keyword">this</span>.q * b.q;</span><br><span class="line">        <span class="keyword">long</span> divisor = gcd(p, q);</span><br><span class="line">        p = p/divisor;</span><br><span class="line">        q = q/divisor;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rational((<span class="keyword">int</span>)p, (<span class="keyword">int</span>)q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Rational <span class="title">divides</span><span class="params">(Rational b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> p = <span class="keyword">this</span>.p * b.q;</span><br><span class="line">        <span class="keyword">long</span> q = <span class="keyword">this</span>.q * b.p;</span><br><span class="line">        <span class="keyword">long</span> divisor = gcd(p, q);</span><br><span class="line">        p = p/divisor;</span><br><span class="line">        q = q/divisor;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Rational((<span class="keyword">int</span>)p, (<span class="keyword">int</span>)q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object that)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span> == that) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(that == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Rational b = (Rational) that;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.p == b.p &amp;&amp; <span class="keyword">this</span>.q == b.q || <span class="keyword">this</span>.p == <span class="number">0</span> &amp;&amp; b.p == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> r = <span class="keyword">this</span>.p % <span class="keyword">this</span>.q;</span><br><span class="line">        <span class="keyword">if</span>(r != <span class="number">0</span>) <span class="keyword">return</span> String.format(<span class="string">&quot;%d/%d&quot;</span>,<span class="keyword">this</span>.p, <span class="keyword">this</span>.q);</span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">&quot;%d&quot;</span>, <span class="keyword">this</span>.p / <span class="keyword">this</span>.q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Rational a = <span class="keyword">new</span> Rational(<span class="number">12</span>,<span class="number">36</span>);</span><br><span class="line">        Rational b = <span class="keyword">new</span> Rational(<span class="number">24</span>,<span class="number">72</span>);</span><br><span class="line">        System.out.println(a.plus(b));</span><br><span class="line">        System.out.println(a.minus(b));</span><br><span class="line">        System.out.println(a.times(b));</span><br><span class="line">        System.out.println(a.divides(b));</span><br><span class="line">        System.out.println(a.equals(b));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1217"><a class="markdownIt-Anchor" href="#1217"></a> 1.2.17</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Rational <span class="title">plus</span><span class="params">(Rational b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> q = <span class="keyword">this</span>.q * b.q;</span><br><span class="line">    <span class="keyword">long</span> p = <span class="keyword">this</span>.p * b.q + <span class="keyword">this</span>.q * b.p;</span><br><span class="line">    <span class="keyword">long</span> divisor = gcd(p, q);</span><br><span class="line">    p = p/divisor;</span><br><span class="line">    <span class="keyword">assert</span> p &gt;= Integer.MIN_VALUE &amp;&amp; p &lt;= Integer.MAX_VALUE;</span><br><span class="line">    q = q/divisor;</span><br><span class="line">    <span class="keyword">assert</span> q &gt;= Integer.MIN_VALUE &amp;&amp; q &lt;= Integer.MAX_VALUE;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Rational((<span class="keyword">int</span>)p, (<span class="keyword">int</span>)q);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1218"><a class="markdownIt-Anchor" href="#1218"></a> 1.2.18？</h3>
<p>如何证明方差递推公式的误差比起所有数据求平方和的误差更小？<br />
难道是浮点数加法的累计误差较大？</p>
<h3 id="1219"><a class="markdownIt-Anchor" href="#1219"></a> 1.2.19</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SmartDate</span><span class="params">(String date)</span></span>&#123;</span><br><span class="line">    String d[] = date.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> month = Integer.parseInt(d[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">int</span> day = Integer.parseInt(d[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">int</span> year = Integer.parseInt(d[<span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">if</span>(!isValid(month, day, year)) <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;Invalid date&quot;</span>);</span><br><span class="line">    <span class="keyword">this</span>.year = year;</span><br><span class="line">    <span class="keyword">this</span>.month = month;</span><br><span class="line">    <span class="keyword">this</span>.day = day;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Transaction</span><span class="params">(String transaction)</span></span>&#123;</span><br><span class="line">    String[] t = transaction.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">    String who = t[<span class="number">0</span>];</span><br><span class="line">    SmartDate when = <span class="keyword">new</span> SmartDate(t[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">double</span> amount = Double.parseDouble(t[<span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">this</span>.name = who;</span><br><span class="line">    <span class="keyword">this</span>.date = when;</span><br><span class="line">    <span class="keyword">this</span>.amount = amount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="13-背包-队列和栈"><a class="markdownIt-Anchor" href="#13-背包-队列和栈"></a> 1.3 背包、队列和栈</h2>
<h3 id="131"><a class="markdownIt-Anchor" href="#131"></a> 1.3.1</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> N == a.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="132"><a class="markdownIt-Anchor" href="#132"></a> 1.3.2</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">was best times of the was the it (1 left on stack)</span><br></pre></td></tr></table></figure>
<h3 id="133"><a class="markdownIt-Anchor" href="#133"></a> 1.3.3</h3>
<ol>
<li>0 1 2 3 4 - - - - - 5 6 7 8 9 - - - - -</li>
<li>不可能。0 1 2 3 4 - 5 6 - 7 8 - - - - -剩下0 1必须先出栈1再出栈0</li>
<li>0 1 2 - 3 4 5 - 6 - 7 - - 8 - 9 - - - -</li>
<li>0 1 2 3 4 - - - - - 5 - 6 - 7 - 8 - 9 -</li>
<li>0 1 - 2 - 3 - 4 - 5 - 6 - 7 8 9 - - - -</li>
<li>不可能。0 - 1 2 3 4 - 5 6 - - - 7 8 - 9 剩下 1 2 7 必须先出栈1</li>
<li>不可能。0 1 - 2 3 4 - 5 6 7 - 8 9 - - - - - 剩下0和2必须先出栈2</li>
<li>0 1 2 - - 3 4 - - 5 6 - - 7 8 - - 9 - -</li>
</ol>
<p>算法：<br />
遍历每一个数，对于给定的出栈元素，后面比它小的元素必须逆序，如果不逆序则不可能。<br />
例如2 5 6 7 4 8 9 3 1 0，2后面的1,0必须逆序，满足。5后面的4,3,1,0必须逆序，满足。<br />
又例如1 4 7 9 8 6 5 3 0 2，1后面的0必须逆序，满足。4后面的3,0,2必须逆序，不满足，这个序列不可能出现。</p>
<h3 id="134"><a class="markdownIt-Anchor" href="#134"></a> 1.3.4</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">Parentheses</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Stack&lt;Character&gt; s = <span class="keyword">new</span> Stack&lt;Character&gt;();</span><br><span class="line">    <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">char</span> ch = StdIn.readChar();</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">&#x27;[&#x27;</span> || ch == <span class="string">&#x27;(&#x27;</span> || ch == <span class="string">&#x27;&#123;&#x27;</span>)&#123;</span><br><span class="line">            s.push(ch);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">char</span> left = s.pop();</span><br><span class="line">            <span class="keyword">if</span>(left == <span class="string">&#x27;(&#x27;</span> &amp;&amp; ch != <span class="string">&#x27;)&#x27;</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(left == <span class="string">&#x27;[&#x27;</span> &amp;&amp; ch != <span class="string">&#x27;]&#x27;</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(left == <span class="string">&#x27;&#123;&#x27;</span> &amp;&amp; ch != <span class="string">&#x27;&#125;&#x27;</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="135"><a class="markdownIt-Anchor" href="#135"></a> 1.3.5</h3>
<p>50的二进制表示</p>
<h3 id="136"><a class="markdownIt-Anchor" href="#136"></a> 1.3.6+</h3>
<p><s>什么都没做</s><br />
入队=&gt;出队=&gt;入栈=&gt;出栈=&gt;入队：逆序<br />
入栈=&gt;出栈=&gt;入队=&gt;出队=&gt;入栈：逆序</p>
<h3 id="137"><a class="markdownIt-Anchor" href="#137"></a> 1.3.7</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">peek</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> first.item;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="138"><a class="markdownIt-Anchor" href="#138"></a> 1.3.8</h3>
<p>DoublingStackOfStrings是用数组实现的，2倍动态扩容和收缩的栈。<br />
a.length=1	a[0]=it	N=1<br />
a.length=2	a[0]=it,a[1]=was	N=2<br />
a.length=2	a[0]=it,a[1]=null	N=1</p>
<p>数组内容：it<br />
数组大小：2</p>
<h3 id="139"><a class="markdownIt-Anchor" href="#139"></a> 1.3.9</h3>
<p>前序表达式：运算符在操作数前，每读到一个运算符，就将它后面两个操作数进行计算。<br />
中序表达式：平常使用的数学表达式。<br />
后序表达式：运算符在操作数后，每读到一个运算符，就将它前面两个操作数进行计算。例如<code>( ( ( a + b ) * c ) - ( ( a + b ) / e ) )</code>的后序表达式为<code>a b + c * a b + e / -</code></p>
<p>类似dijkstra的计算表达式的算法，区别在于遇到右括号不是将计算结果放回操作数栈，而是将加了完整括号的字符串放回操作数栈。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">completeInfixExpression</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Stack&lt;String&gt; operand = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    Stack&lt;String&gt; operator = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">        String s = StdIn.readString();</span><br><span class="line">        <span class="keyword">if</span>(s.equals(<span class="string">&quot;+&quot;</span>) || s.equals(<span class="string">&quot;-&quot;</span>) || s.equals(<span class="string">&quot;*&quot;</span>) || s.equals(<span class="string">&quot;/&quot;</span>))&#123;</span><br><span class="line">            operator.push(s);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;)&quot;</span>))&#123;</span><br><span class="line">            String op2 = operand.pop();</span><br><span class="line">            String op1 = operand.pop();</span><br><span class="line">            String op = operator.pop();</span><br><span class="line">            operand.push(String.format(<span class="string">&quot;( %s %s %s )&quot;</span>, op1, op, op2));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            operand.push(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> operand.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1310"><a class="markdownIt-Anchor" href="#1310"></a> 1.3.10</h3>
<p>同上，遇到右括号生成后缀表达式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InfixToPostfix</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Stack&lt;String&gt; operand = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        Stack&lt;String&gt; operator = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">            String s = StdIn.readString();</span><br><span class="line">            <span class="keyword">if</span>(s.equals(<span class="string">&quot;+&quot;</span>) || s.equals(<span class="string">&quot;-&quot;</span>) || s.equals(<span class="string">&quot;*&quot;</span>) || s.equals(<span class="string">&quot;/&quot;</span>))&#123;</span><br><span class="line">                operator.push(s);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;)&quot;</span>))&#123;</span><br><span class="line">                String op2 = operand.pop();</span><br><span class="line">                String op1 = operand.pop();</span><br><span class="line">                String op = operator.pop();</span><br><span class="line">                operand.push(String.format(<span class="string">&quot;%s %s %s&quot;</span>, op1, op2, op));</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;(&quot;</span>))&#123;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                operand.push(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        StdOut.println(operand.pop());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1311"><a class="markdownIt-Anchor" href="#1311"></a> 1.3.11</h3>
<p>类似上面，但后续表达式没有括号，遇到一个运算符就取出该运算符需要的操作数进行计算，然后将结果放回操作数栈。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EvaluatePostfix</span> </span>&#123;</span><br><span class="line">    <span class="comment">// java InfixToPostfix | java EvaluatePostfix</span></span><br><span class="line">    <span class="comment">// ( ( 1 + 2 ) * ( ( 3 - 4 ) * ( 5 - 6 ) ) )</span></span><br><span class="line">    <span class="comment">// 1 2 + 3 4 - 5 6 - * *</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Stack&lt;Double&gt; vals = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        Stack&lt;String&gt; ops = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">            String s = StdIn.readString();</span><br><span class="line">            <span class="keyword">if</span>(s.equals(<span class="string">&quot;+&quot;</span>) || s.equals(<span class="string">&quot;-&quot;</span>) || s.equals(<span class="string">&quot;*&quot;</span>) || s.equals(<span class="string">&quot;/&quot;</span>) || s.equals(<span class="string">&quot;sqrt&quot;</span>))&#123;</span><br><span class="line">                <span class="keyword">double</span> v = vals.pop();</span><br><span class="line">                <span class="keyword">if</span>(s.equals(<span class="string">&quot;+&quot;</span>)) v = vals.pop() + v;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;-&quot;</span>)) v = vals.pop() - v;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;*&quot;</span>)) v = vals.pop() * v;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;/&quot;</span>)) v = vals.pop() / v;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(s.equals(<span class="string">&quot;sqrt&quot;</span>)) v = Math.sqrt(v);</span><br><span class="line">                vals.push(v);</span><br><span class="line">            &#125; <span class="keyword">else</span></span><br><span class="line">                vals.push(Double.parseDouble(s));</span><br><span class="line">        &#125;</span><br><span class="line">        StdOut.println(vals.pop());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1312"><a class="markdownIt-Anchor" href="#1312"></a> 1.3.12</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Stack&lt;String&gt; <span class="title">copy</span><span class="params">(Stack&lt;String&gt; s)</span></span>&#123;</span><br><span class="line">    Stack&lt;String&gt; temp = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    Stack&lt;String&gt; c = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(String item : s)&#123;</span><br><span class="line">        temp.push(item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(String item : temp)&#123;</span><br><span class="line">        c.push(item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1313"><a class="markdownIt-Anchor" href="#1313"></a> 1.3.13</h3>
<p>队列，当一个元素出队时，比它小的元素必然已经出队。<br />
所以只有一种可能，就是全顺序。<br />
因此b、c、d均不可能。</p>
<h3 id="1314"><a class="markdownIt-Anchor" href="#1314"></a> 1.3.14</h3>
<p>不使用计数变量，入队和出队可以节省一个递增或递减操作。<br />
但计算大小时需要多3个操作。<br />
若计算大小操作不常用，那么不使用计数变量更合适。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedArrayQueueOfStrings</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String[] a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tail;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FixedArrayQueueOfStrings</span><span class="params">(<span class="keyword">int</span> cap)</span></span>&#123;</span><br><span class="line">        a = <span class="keyword">new</span> String[cap+<span class="number">1</span>];</span><br><span class="line">        head = <span class="number">0</span>; <span class="comment">// head指向队首</span></span><br><span class="line">        tail = <span class="number">0</span>; <span class="comment">// tail指向队尾元素的后一个位置</span></span><br><span class="line">        <span class="comment">/*  只要有元素且数组未满，head就不可能等于tail</span></span><br><span class="line"><span class="comment">        *   没有元素和数组刚满时，head == tail</span></span><br><span class="line"><span class="comment">        *   区分满还是空，数组中空一个元素</span></span><br><span class="line"><span class="comment">        *   当队尾指针追上队首指针时，数组满</span></span><br><span class="line"><span class="comment">        *   当首指针追上队尾指针时，数组空</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(String item)</span></span>&#123;</span><br><span class="line">        a[tail] = item;</span><br><span class="line">        tail = (tail + <span class="number">1</span>) % a.length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String item = a[head];</span><br><span class="line">        head = (head + <span class="number">1</span>) % a.length;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (tail + <span class="number">1</span>) % a.length == head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// (tail - head) mod a.length</span></span><br><span class="line">        <span class="comment">// tail - head = [-5,5]</span></span><br><span class="line"><span class="comment">//        if(tail &lt; head) return tail - head + a.length;</span></span><br><span class="line"><span class="comment">//        else return tail - head;</span></span><br><span class="line">        <span class="keyword">return</span> (tail - head + a.length) % a.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>若要动态扩容，则每次入队和出队都要检查元素数量，此时用计数变量更合适，有了计数变量，队尾完全可以根据队首计算出来。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResizingArrayQueueOfStrings</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String[] a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ResizingArrayQueueOfStrings</span><span class="params">()</span></span>&#123;</span><br><span class="line">        a = <span class="keyword">new</span> String[<span class="number">2</span>];</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">        N = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> max)</span></span>&#123;</span><br><span class="line">        String[] temp = <span class="keyword">new</span> String[max];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, j = head; i &lt; N; i++, j = (j + <span class="number">1</span>) % a.length)&#123;</span><br><span class="line">            temp[i] = a[j];</span><br><span class="line">        &#125;</span><br><span class="line">        a = temp;</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(String item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N == a.length) resize(a.length * <span class="number">2</span>);</span><br><span class="line">        a[(head + N)%a.length] = item;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String item = a[head];</span><br><span class="line">        head = (head + <span class="number">1</span>) % a.length;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">if</span>(N &gt; <span class="number">0</span> &amp;&amp; N == a.length / <span class="number">4</span>)</span><br><span class="line">            resize(a.length/<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == a.length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1315"><a class="markdownIt-Anchor" href="#1315"></a> 1.3.15</h3>
<p>用队列去找倒数第k个元素不那么直观，只能计算出它是正数第几个元素，然后出队这么多个元素。<br />
如果用栈，那只需要顺着栈顶找第k个元素即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">    Queue&lt;String&gt; q = <span class="keyword">new</span> Queue&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">        q.enqueue(StdIn.readString());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> j = q.size() - k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; j; i++)&#123;</span><br><span class="line">        q.dequeue();</span><br><span class="line">    &#125;</span><br><span class="line">    StdOut.println(q.dequeue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1316"><a class="markdownIt-Anchor" href="#1316"></a> 1.3.16</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Date[] readDates()&#123;</span><br><span class="line">    Queue&lt;Date&gt; q = <span class="keyword">new</span> Queue&lt;Date&gt;();</span><br><span class="line">    <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">        q.enqueue(<span class="keyword">new</span> Date(StdIn.readString()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> N = q.size();</span><br><span class="line">    Date[] a = <span class="keyword">new</span> Date[N];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        a[i] = q.dequeue();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1317"><a class="markdownIt-Anchor" href="#1317"></a> 1.3.17</h3>
<p>由于输入的交易字符串中含有空格，因此不能像Date一样使用<code>StdIn.readString()</code>，只能一行一个交易字符串，要使用<code>StdIn.readLine()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Transaction[] readTransactions()&#123;</span><br><span class="line">    Queue&lt;Transaction&gt; q = <span class="keyword">new</span> Queue&lt;Transaction&gt;();</span><br><span class="line">    <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">        q.enqueue(<span class="keyword">new</span> Transaction(StdIn.readLine()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> N = q.size();</span><br><span class="line">    Transaction[] a = <span class="keyword">new</span> Transaction[N];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        a[i] = q.dequeue();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1318"><a class="markdownIt-Anchor" href="#1318"></a> 1.3.18</h3>
<p>删除x后面一个结点。<br />
左值是一个指向结点的引用，右值是结点</p>
<h3 id="1319"><a class="markdownIt-Anchor" href="#1319"></a> 1.3.19</h3>
<p>给定首结点，要删除链表的尾结点，需要找到尾结点的前一个结点。<br />
尾结点的前一个结点的特征是，下下个结点<code>cur.next.next</code>为空。从首结点遍历到下下个结点为空的那个结点即可。<br />
但<code>cur.next</code>可能为空，导致没有<code>cur.next.next</code>，这时候链表只有一个元素，令首结点为空就删除了最后一个也是第一个元素。<br />
同样，<code>cur</code>也可能为空，导致没有<code>cur.next</code>，这时候链表就是空的。什么也不做。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeLast</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(first == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(first.next == <span class="keyword">null</span>)&#123;</span><br><span class="line">        first = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node cur = first;</span><br><span class="line">    <span class="keyword">while</span>(cur.next.next != <span class="keyword">null</span>) cur = cur.next;</span><br><span class="line">    cur.next = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1320"><a class="markdownIt-Anchor" href="#1320"></a> 1.3.20</h3>
<p>要删除第k个结点，就需要找到第k-1个结点。<br />
需要从首结点往后走k-2步，即从1到小于k-1<br />
first可能为null，即链表为空，什么也不做。<br />
若要删除第一个结点，也不能用上述步骤。<br />
在走k-2步的过程中，结点可能为空，除非预先知道链表有多少个元素，并以此来限制k的范围，否则在走k-2步的过程中，结点为空是无法预先知道的。要做处理，可以抛空指针异常。<br />
即便在走的过程中结点不为空，走完后结点可能是空结点，又或者是尾结点，此时无法删除它的下一个结点，也要单独判断或者抛异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k &lt; <span class="number">1</span> || first == <span class="keyword">null</span>) <span class="keyword">return</span>; <span class="comment">// out-of-range</span></span><br><span class="line">    <span class="keyword">if</span>(k == <span class="number">1</span>)&#123; <span class="comment">// k &gt;= 1 &amp;&amp; first != null</span></span><br><span class="line">        first = first.next;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Node cur = first;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; k - <span class="number">1</span>; i++) cur = cur.next; <span class="comment">// cur may null</span></span><br><span class="line">        cur.next = cur.next.next; <span class="comment">// cur.next may null</span></span><br><span class="line">    &#125;<span class="keyword">catch</span>(NullPointerException e)&#123;</span><br><span class="line">        <span class="comment">// do nothing</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1321"><a class="markdownIt-Anchor" href="#1321"></a> 1.3.21</h3>
<p>从前向后遍历链表即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">find</span><span class="params">(LinkedList&lt;String&gt; list, String key)</span></span>&#123;</span><br><span class="line">    Node&lt;String&gt; cur = list.first;</span><br><span class="line">    <span class="keyword">while</span>(cur != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(key.equals(cur.item)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1322"><a class="markdownIt-Anchor" href="#1322"></a> 1.3.22</h3>
<p>在x后面插入结点t。<br />
<code>x.next</code>作为右值，它表示一个结点，即x后面那个结点。<br />
<code>t.next</code>作为左值，它表示结点t中的引用，该引用指向了x后面的结点。<br />
同理，<code>x.next</code>作为左值，它表示结点x中的应用，该引用指向了t。</p>
<h3 id="1323"><a class="markdownIt-Anchor" href="#1323"></a> 1.3.23</h3>
<p><code>x.next = t</code>，结点x中的引用指向了结点t<br />
<code>t.next = x.next</code>，结点t中的应用指向了x的后一个结点，即t自身。</p>
<h3 id="1324"><a class="markdownIt-Anchor" href="#1324"></a> 1.3.24</h3>
<p>要删除一个结点的后续结点，只需要将该结点中的引用设为空。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeAfter</span><span class="params">(Node node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(node != <span class="keyword">null</span>) node.next = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1325"><a class="markdownIt-Anchor" href="#1325"></a> 1.3.25</h3>
<p>要在一个结点后添加一个新结点，需要将新结点的引用指向原结点的后一个结点。<br />
然后将原结点的引用指向新结点。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertAfter</span><span class="params">(Node n1, Node n2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n1 == <span class="keyword">null</span> || n2 == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    n2.next = n1.next;</span><br><span class="line">    n1.next = n2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1326"><a class="markdownIt-Anchor" href="#1326"></a> 1.3.26</h3>
<p>要删除所有item为key的结点，需要用到两个指针。<br />
一个指针用来遍历，另一个指针始终指向遍历指针的前一个结点。<br />
当要删除结点时，将前一个结点的引用指向该结点的后一个结点。<br />
为了避免在删除第一个结点时要做额外的工作，在第一个结点前添加一个dummy虚假结点。并且最终将链表首结点设为dummy结点的下一个结点。<br />
【将前一个结点的引用指向该结点的后一个结点】这一步骤之后，原当前结点和新的当前结点的前一个结点是一样的，不应该递增前一个结点的指针。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(LinkedList&lt;String&gt; list, String key)</span> </span>&#123;</span><br><span class="line">    Node&lt;String&gt; dummy = <span class="keyword">new</span> Node&lt;&gt;();</span><br><span class="line">    dummy.next = list.first;</span><br><span class="line">    Node&lt;String&gt; before = dummy;</span><br><span class="line">    Node&lt;String&gt; cur = list.first;</span><br><span class="line">    <span class="keyword">while</span>(cur!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(key.equals(cur.item))&#123;</span><br><span class="line">            before.next = cur.next;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            before = before.next;</span><br><span class="line">        &#125;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">    &#125;</span><br><span class="line">    list.first = dummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1327"><a class="markdownIt-Anchor" href="#1327"></a> 1.3.27</h3>
<p>遍历结点，如果发现更大的数就记录。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">max</span><span class="params">(Node&lt;Integer&gt; first)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> val = <span class="number">0</span>;</span><br><span class="line">    Node&lt;Integer&gt; cur = first;</span><br><span class="line">    <span class="keyword">while</span>(cur != <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(cur.item &gt; val) val = cur.item;</span><br><span class="line">        cur = cur.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1328"><a class="markdownIt-Anchor" href="#1328"></a> 1.3.28</h3>
<p>找最大值，将当前值与剩下链表中的最大值比较，返回大的那个。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">max</span><span class="params">(Node&lt;Integer&gt; first)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(first == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> remain_max = max(first.next);</span><br><span class="line">    <span class="keyword">if</span>(first.item &gt; remain_max) <span class="keyword">return</span> first.item;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> remain_max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1329"><a class="markdownIt-Anchor" href="#1329"></a> 1.3.29</h3>
<p>用环形链表实现队列，首先环形链表能实现什么操作？<br />
只有一个last结点指向链表尾结点。<br />
要删除尾结点，必须向后转一圈找到尾结点的前一个结点，这个代价是O(n)。<br />
要添加新的尾结点，O(1)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 若有至少一个结点</span></span><br><span class="line">Node oldlast = last;</span><br><span class="line">last = <span class="keyword">new</span> Node();</span><br><span class="line">last.next = oldlast.next;</span><br><span class="line">oldlast.next = last;</span><br><span class="line"><span class="comment">// 若链表为空</span></span><br><span class="line">last = <span class="keyword">new</span> Node();</span><br></pre></td></tr></table></figure>
<p>要添加新的首结点，O(1)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 若有至少一个结点</span></span><br><span class="line">Node first = <span class="keyword">new</span> Node();</span><br><span class="line">first.next = last.next;</span><br><span class="line">last.next = first;</span><br><span class="line"><span class="comment">// 若链表为空</span></span><br><span class="line">last = <span class="keyword">new</span> Node();</span><br></pre></td></tr></table></figure>
<p>要删除首结点，O(1)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 若有至少两个结点</span></span><br><span class="line">last.next = last.next.next;</span><br><span class="line"><span class="comment">// 若只有一个结点</span></span><br><span class="line">last = <span class="keyword">null</span></span><br></pre></td></tr></table></figure>
<p>队列需要从一端添加元素，另一端删除元素。<br />
因此只能是从尾结点添加元素，从首结点删除元素。<br />
遍历时，cur一开始只能是last，不能是<code>last.next</code>（首结点），因为链表为空last没有next属性。这样的话，每次就要站在前一个结点<code>cur</code>处，输出后一个结点的值，即<code>cur.next.item</code>。输出完后<code>cur</code>前进一格。<br />
如果当前结点已经输出，则<code>cur</code>已前进一格，此时<code>cur != last</code>可以判断是否遍历完，即站在cur处，下一个要输出的结点不是首结点。<br />
但这个判断要求必须执行一次输出，否则cur初始为last，则<code>cur != last</code>永远为false。<br />
你没法强制要求用户先输出一次，何况万一是空链表呢？那就增加一个指针，使得它在第一次输出后才等于cur。一开始为null，这样除非<code>last</code>为null，否则第一次判断<code>cur != last</code>永远为真。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedQueue</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        Node next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        Node oldlast = last;</span><br><span class="line">        last = <span class="keyword">new</span> Node();</span><br><span class="line">        last.item = item;</span><br><span class="line">        <span class="keyword">if</span>(oldlast == <span class="keyword">null</span>) &#123;</span><br><span class="line">            last.next = last;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            last.next = oldlast.next;</span><br><span class="line">            oldlast.next = last;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">dequeue</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item item = last.next.item;</span><br><span class="line">        <span class="keyword">if</span>(last == last.next)&#123;</span><br><span class="line">            last = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            last.next = last.next.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> last == <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LinkedQueueIterator();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedQueueIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Node curAfterPrint = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">private</span> Node end = last;</span><br><span class="line">        <span class="keyword">private</span> Node cur = last;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> curAfterPrint != end;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            Item item = cur.next.item;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">            curAfterPrint = cur;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        LinkedQueue&lt;String&gt; q = <span class="keyword">new</span> LinkedQueue&lt;&gt;();</span><br><span class="line">        q.enqueue(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        q.enqueue(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">        q.enqueue(<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span>(!q.isEmpty())&#123;</span><br><span class="line">            System.out.println(q.dequeue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1330"><a class="markdownIt-Anchor" href="#1330"></a> 1.3.30</h3>
<p>递归写法比较容易理解，首先考虑如果有一个结点，和它后面结点组成的一个已经反转完毕的链表的首结点，怎么把他们组合起来。<br />
需要拿到反转完毕的链表的尾结点，有两种办法，一种是通过反转后的首结点遍历，但这种方法耗时长。另一种办法是，反转后的尾结点就是当前还没组合的结点的下一个结点，可以直接通过next拿到。<br />
将反转后的尾结点的引用指向还没组合的结点。<br />
然后将这个结点的引用设为空。<br />
由于要返回反转链表的首结点，只要返回即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">reverse</span><span class="params">(Node first)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(first == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span>(first.next == <span class="keyword">null</span>) <span class="keyword">return</span> first;</span><br><span class="line">    Node new_first = reverse(first.next);</span><br><span class="line">    first.next.next = first;</span><br><span class="line">    first.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> new_first;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>迭代写法：<br />
站在一个结点处，调整它下一个结点的引用，这会指向下下个结点的指针丢失，导致没法往后遍历。<br />
站在一个结点处，调整它自身的引用，使引用指向前一个结点，在调整前记录一下原来下一个结点的，就能向后遍历。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">reverse</span><span class="params">(Node first)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(first == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    Node cur = first.next;</span><br><span class="line">    first.next = <span class="keyword">null</span>;</span><br><span class="line">    Node before = first;</span><br><span class="line">    <span class="keyword">while</span>(cur != <span class="keyword">null</span>)&#123;</span><br><span class="line">        Node next = cur.next;</span><br><span class="line">        cur.next = before;</span><br><span class="line">        before = cur;</span><br><span class="line">        cur = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> before;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述写法是从第二个结点开始，如果将第一个结点的前一个结点当成null，那么在1个结点时也可以进循环，还可以减少判断。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">reverse</span><span class="params">(Node first)</span></span>&#123;</span><br><span class="line">    Node cur = first;</span><br><span class="line">    Node before = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span>(cur != <span class="keyword">null</span>)&#123;</span><br><span class="line">        Node next = cur.next;</span><br><span class="line">        cur.next = before;</span><br><span class="line">        before = cur;</span><br><span class="line">        cur = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> before;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1331"><a class="markdownIt-Anchor" href="#1331"></a> 1.3.31</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoublyLinkedList</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DoubleNode</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        DoubleNode&lt;Item&gt; next;</span><br><span class="line">        DoubleNode&lt;Item&gt; prev;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> DoubleNode&lt;T&gt; first;</span><br><span class="line">    <span class="keyword">private</span> DoubleNode&lt;T&gt; last;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item&gt; <span class="function"><span class="keyword">void</span> <span class="title">insertAtFirst</span><span class="params">(DoublyLinkedList&lt;Item&gt; list, Item item)</span></span>&#123;</span><br><span class="line">        DoubleNode&lt;Item&gt; oldfirst = list.first;</span><br><span class="line">        list.first = <span class="keyword">new</span> DoubleNode&lt;Item&gt;();</span><br><span class="line">        list.first.item = item;</span><br><span class="line">        <span class="keyword">if</span>(oldfirst != <span class="keyword">null</span>)&#123;</span><br><span class="line">            list.first.next = oldfirst;</span><br><span class="line">            oldfirst.prev = list.first;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            list.last = list.first;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item&gt; <span class="function"><span class="keyword">void</span> <span class="title">insertAtLast</span><span class="params">(DoublyLinkedList&lt;Item&gt; list, Item item)</span></span>&#123;</span><br><span class="line">        DoubleNode&lt;Item&gt; oldlast = list.last;</span><br><span class="line">        list.last = <span class="keyword">new</span> DoubleNode&lt;Item&gt;();</span><br><span class="line">        list.last.item = item;</span><br><span class="line">        <span class="keyword">if</span>(oldlast != <span class="keyword">null</span>)&#123;</span><br><span class="line">            list.last.prev = oldlast;</span><br><span class="line">            oldlast.next = list.last;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            list.first = list.last;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item&gt; <span class="function"><span class="keyword">void</span> <span class="title">removeAtFirst</span><span class="params">(DoublyLinkedList&lt;Item&gt; list)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(list.first == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(list.first.next == <span class="keyword">null</span>)&#123;</span><br><span class="line">            list.first = <span class="keyword">null</span>;</span><br><span class="line">            list.last = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            list.first = list.first.next;</span><br><span class="line">            list.first.prev = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item&gt; <span class="function"><span class="keyword">void</span> <span class="title">removeAtLast</span><span class="params">(DoublyLinkedList&lt;Item&gt; list)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(list.last == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(list.last.prev == <span class="keyword">null</span>)&#123;</span><br><span class="line">            list.last = <span class="keyword">null</span>;</span><br><span class="line">            list.first = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            list.last = list.last.prev;</span><br><span class="line">            list.last.next = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item&gt; <span class="function"><span class="keyword">void</span> <span class="title">insertBefore</span><span class="params">(DoublyLinkedList&lt;Item&gt; list, DoubleNode&lt;Item&gt; node, Item item)</span></span>&#123;</span><br><span class="line">        DoubleNode&lt;Item&gt; insert = <span class="keyword">new</span> DoubleNode&lt;Item&gt;();</span><br><span class="line">        insert.item = item;</span><br><span class="line">        insert.next = node;</span><br><span class="line">        insert.prev = node.prev;</span><br><span class="line">        insert.next.prev = insert;</span><br><span class="line">        <span class="keyword">if</span>(insert.prev == <span class="keyword">null</span>)&#123;</span><br><span class="line">            list.first = insert;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            insert.prev.next = insert;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item&gt; <span class="function"><span class="keyword">void</span> <span class="title">insertAfter</span><span class="params">(DoublyLinkedList&lt;Item&gt; list, DoubleNode&lt;Item&gt; node, Item item)</span></span>&#123;</span><br><span class="line">        DoubleNode&lt;Item&gt; insert = <span class="keyword">new</span> DoubleNode&lt;Item&gt;();</span><br><span class="line">        insert.item = item;</span><br><span class="line">        insert.prev = node;</span><br><span class="line">        insert.next = node.next;</span><br><span class="line">        insert.prev.next = insert;</span><br><span class="line">        <span class="keyword">if</span>(insert.next == <span class="keyword">null</span>)&#123;</span><br><span class="line">            list.last = insert;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            insert.next.prev = insert;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item&gt; <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(DoublyLinkedList&lt;Item&gt; list, DoubleNode&lt;Item&gt; node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node.prev == <span class="keyword">null</span>)&#123;</span><br><span class="line">            list.first = node.next;</span><br><span class="line">            node.next.prev = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(node.next == <span class="keyword">null</span>)&#123;</span><br><span class="line">            list.last = node.prev;</span><br><span class="line">            node.prev.next = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            node.next.prev = node.prev;</span><br><span class="line">            node.prev.next = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;T&gt; <span class="title">iterator</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DoublyLinkedListIterator();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">DoublyLinkedListIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> DoubleNode&lt;T&gt; cur = first;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> cur != <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            T item = cur.item;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        s.append(<span class="string">&quot;[ &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(T item: <span class="keyword">this</span>)&#123;</span><br><span class="line">            s.append(item);</span><br><span class="line">            s.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        s.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> s.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        DoublyLinkedList&lt;String&gt; list = <span class="keyword">new</span> DoublyLinkedList&lt;&gt;();</span><br><span class="line">        DoublyLinkedList.insertAtFirst(list, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">        DoubleNode&lt;String&gt; node = list.first;</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        DoublyLinkedList.insertAtFirst(list, <span class="string">&quot;b&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        DoublyLinkedList.insertAtLast(list,<span class="string">&quot;c&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        DoublyLinkedList.insertAfter(list,node,<span class="string">&quot;q&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        DoublyLinkedList.insertBefore(list,node,<span class="string">&quot;p&quot;</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        DoublyLinkedList.remove(list,node);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        DoublyLinkedList.removeAtFirst(list);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        DoublyLinkedList.removeAtLast(list);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1332"><a class="markdownIt-Anchor" href="#1332"></a> 1.3.32</h3>
<p>能够从两端插入，但只能从一端删除。<br />
API：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item item)</span></span>; <span class="comment">//从a端添加元素</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span></span>; <span class="comment">// 从b端添加元素</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span></span>; <span class="comment">// 从a端弹出元素</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>; <span class="comment">// 链表是否为空</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>; <span class="comment">// 元素数量</span></span><br></pre></td></tr></table></figure>
<p>一个指针first，可以实现向链表首添加元素和删除元素。<br />
为什么可以快速删除元素？因为first前面没有元素了。<br />
另一个指针last，可以实现向链表尾添加元素。<br />
除非添加一个计数变量，否则每次计算元素数量必须遍历。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Steque</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        Node next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        Node oldfirst = first;</span><br><span class="line">        first = <span class="keyword">new</span> Node();</span><br><span class="line">        first.item = item;</span><br><span class="line">        <span class="keyword">if</span>(oldfirst == <span class="keyword">null</span>) last = first;</span><br><span class="line">        <span class="keyword">else</span> first.next = oldfirst;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        Node oldlast = last;</span><br><span class="line">        last = <span class="keyword">new</span> Node();</span><br><span class="line">        last.item = item;</span><br><span class="line">        <span class="keyword">if</span>(oldlast == <span class="keyword">null</span>) first = last;</span><br><span class="line">        <span class="keyword">else</span> oldlast.next = last;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item item = first.item;</span><br><span class="line">        first = first.next;</span><br><span class="line">        <span class="keyword">if</span>(first == <span class="keyword">null</span>) last = <span class="keyword">null</span>;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> StequeIterator();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">StequeIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Node cur = first;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> cur != <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            Item item = cur.item;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        s.append(<span class="string">&quot;[ &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(Item item: <span class="keyword">this</span>)&#123;</span><br><span class="line">            s.append(item);</span><br><span class="line">            s.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        s.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> s.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Steque&lt;String&gt; q = <span class="keyword">new</span> Steque&lt;&gt;();</span><br><span class="line">        q.push(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        q.push(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">        System.out.println(q);</span><br><span class="line">        System.out.println(q.pop());</span><br><span class="line">        System.out.println(q.pop());</span><br><span class="line">        System.out.println(q);</span><br><span class="line">        q.enqueue(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">        q.enqueue(<span class="string">&quot;e&quot;</span>);</span><br><span class="line">        System.out.println(q);</span><br><span class="line">        System.out.println(q.pop());</span><br><span class="line">        System.out.println(q);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1333"><a class="markdownIt-Anchor" href="#1333"></a> 1.3.33</h3>
<p>链表实现的双端队列。<br />
队列有链表的左（首）结点和右（尾）结点。<br />
每个结点都有指向前后结点的引用，否则只能实现首节点插入和删除，以及尾结点的插入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Deque</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        Node next;</span><br><span class="line">        Node prev;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Node left;</span><br><span class="line">    <span class="keyword">private</span> Node right;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pushLeft</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        Node oldleft = left;</span><br><span class="line">        left = <span class="keyword">new</span> Node();</span><br><span class="line">        left.item = item;</span><br><span class="line">        <span class="keyword">if</span>(oldleft == <span class="keyword">null</span>)&#123;</span><br><span class="line">            right = left;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            left.next = oldleft;</span><br><span class="line">            oldleft.prev = left;</span><br><span class="line">        &#125;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pushRight</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        Node oldright = right;</span><br><span class="line">        right = <span class="keyword">new</span> Node();</span><br><span class="line">        right.item = item;</span><br><span class="line">        <span class="keyword">if</span>(oldright == <span class="keyword">null</span>)&#123;</span><br><span class="line">            left = right;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            right.prev = oldright;</span><br><span class="line">            oldright.next = right;</span><br><span class="line">        &#125;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">popLeft</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item item = left.item;</span><br><span class="line">        <span class="keyword">if</span>(left.next == <span class="keyword">null</span>)&#123;</span><br><span class="line">            left = <span class="keyword">null</span>;</span><br><span class="line">            right = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            left = left.next;</span><br><span class="line">            left.prev = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">popRight</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item item = right.item;</span><br><span class="line">        <span class="keyword">if</span>(right.prev == <span class="keyword">null</span>)&#123;</span><br><span class="line">            right = <span class="keyword">null</span>;</span><br><span class="line">            left = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            right = right.prev;</span><br><span class="line">            right.next = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DequeIterator();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">DequeIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Node cur = left;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> cur!=<span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            Item item = cur.item;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>动态扩展的数组实现的双端队列：<br />
数组是循环使用的，<br />
若用tail表示尾元素下一个位置<br />
添加 (tail+1) % a.length<br />
删除 (head + 1) % a.length<br />
容量 (tail - head + length) % length<br />
满：(tail + 1) % a.length == head，即尾元素下一个位置就是首元素（需要数组留空一格）<br />
空：head == tail<br />
这种写法比起计数变量N可以在出队时节省一次减法和一次赋值，但在入队时多一次取模。<br />
扩展数组时判断满虽然可以计算得到，但由于动态收缩时需要反复计算数量，与其用tail下标，不如直接用计数变量N。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResizingArrayDeque</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Item[] a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> head;</span><br><span class="line">    <span class="comment">// tail指向队列尾的下一个位置</span></span><br><span class="line">    <span class="comment">// tail = (head + N) mod a.length</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ResizingArrayDeque</span><span class="params">()</span></span>&#123;</span><br><span class="line">        a = (Item[]) <span class="keyword">new</span> Object[<span class="number">2</span>];</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">        N = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> max)</span> </span>&#123;</span><br><span class="line">        Item[] temp = (Item[]) <span class="keyword">new</span> Object[max];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, cur = head; i &lt; N; i++, cur = (cur + <span class="number">1</span>) % a.length) &#123;</span><br><span class="line">            temp[i] = a[cur];</span><br><span class="line">        &#125;</span><br><span class="line">        a = temp;</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pushLeft</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N == a.length) resize(a.length * <span class="number">2</span>);</span><br><span class="line">        head = (head - <span class="number">1</span> + a.length) % a.length;</span><br><span class="line">        a[head] = item;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pushRight</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N == a.length) resize(a.length * <span class="number">2</span>);</span><br><span class="line">        a[(head + N) % a.length] = item;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">popLeft</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item item = a[head];</span><br><span class="line">        head = (head + <span class="number">1</span>) % a.length;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">if</span>(N &gt; <span class="number">0</span> &amp;&amp; N == a.length / <span class="number">4</span>) resize(a.length / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">popRight</span><span class="params">()</span></span>&#123;</span><br><span class="line">        N--;</span><br><span class="line">        Item item = a[(head + N) % a.length];</span><br><span class="line">        <span class="keyword">if</span>(N &gt; <span class="number">0</span> &amp;&amp; N == a.length / <span class="number">4</span>) resize(a.length / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResizingArrayDequeIterator();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ResizingArrayDequeIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> cur = head;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> i &lt; N;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            Item item = a[cur];</span><br><span class="line">            cur = (cur + <span class="number">1</span>) % a.length;</span><br><span class="line">            i++;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        s.append(<span class="string">&quot;[ &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, cur = head; i &lt; N; i++, cur = (cur + <span class="number">1</span>) % a.length)&#123;</span><br><span class="line">            s.append(a[cur]);</span><br><span class="line">            s.append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(N &gt; <span class="number">0</span>) s.delete(s.length()-<span class="number">2</span>, s.length());</span><br><span class="line">        s.append(<span class="string">&quot; ]@&quot;</span>);</span><br><span class="line">        s.append(N);</span><br><span class="line">        <span class="keyword">return</span> s.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1334"><a class="markdownIt-Anchor" href="#1334"></a> 1.3.34</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomBag</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Item[] a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RandomBag</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        a = (Item[])<span class="keyword">new</span> Object[<span class="number">2</span>];</span><br><span class="line">        N = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> max)</span> </span>&#123;</span><br><span class="line">        Item[] temp = (Item[]) <span class="keyword">new</span> Object[max];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">            temp[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        a = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N == a.length) resize(a.length * <span class="number">2</span>);</span><br><span class="line">        a[N++] = item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RandomBagIterator();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomBagIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">RandomBagIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">                <span class="keyword">int</span> r = i + StdRandom.uniform(N-i);</span><br><span class="line">                Item temp = a[i];</span><br><span class="line">                a[i] = a[r];</span><br><span class="line">                a[r] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> k &lt; N;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            Item item = a[k++];</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1335"><a class="markdownIt-Anchor" href="#1335"></a> 1.3.35</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomQueue</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Item[] a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RandomQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        a = (Item[]) <span class="keyword">new</span> Object[<span class="number">2</span>];</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">        N = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> max)</span> </span>&#123;</span><br><span class="line">        Item[] temp = (Item[]) <span class="keyword">new</span> Object[max];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> cur = head, i = <span class="number">0</span>; i &lt; N; i++, cur = (cur +<span class="number">1</span>)%a.length) &#123;</span><br><span class="line">            temp[i] = a[cur];</span><br><span class="line">        &#125;</span><br><span class="line">        a = temp;</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N == a.length) resize(a.length * <span class="number">2</span>);</span><br><span class="line">        a[(head + N) % a.length] = item;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swapHead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// head 首位元素</span></span><br><span class="line">            <span class="comment">// 随机数得到一个索引在 head 到 head + N - 1之间</span></span><br><span class="line">            <span class="comment">// uniform(N) 得到一个0到N-1之间的数</span></span><br><span class="line">            <span class="keyword">int</span> r = (head + StdRandom.uniform(N)) % a.length;</span><br><span class="line">            Item temp = a[head];</span><br><span class="line">            a[head] = a[r];</span><br><span class="line">            a[r] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        swapHead();</span><br><span class="line">        Item item = a[head];</span><br><span class="line">        head = (head + <span class="number">1</span>) % a.length;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">if</span>(N &gt; <span class="number">0</span> &amp;&amp; N == a.length / <span class="number">4</span>) resize(a.length / <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">sample</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        swapHead();</span><br><span class="line">        Item item = a[head];</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1336"><a class="markdownIt-Anchor" href="#1336"></a> 1.3.36</h3>
<p>在迭代器的构造函数中执行乱序算法打乱顺序。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomQueueIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> cur = head;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RandomQueueIterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">            <span class="comment">// head + i 第i个元素</span></span><br><span class="line">            <span class="comment">// 随机数范围在 head + i 到 head + N - 1之间</span></span><br><span class="line">            <span class="comment">// uniform(N-i) 返回 0 到 N - i - 1之间</span></span><br><span class="line">            <span class="keyword">int</span> r = (head + i + StdRandom.uniform(N - i)) % a.length;</span><br><span class="line">            Item temp = a[head];</span><br><span class="line">            a[head] = a[r];</span><br><span class="line">            a[r] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> k &lt; N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Item item = a[cur];</span><br><span class="line">        cur = (cur + <span class="number">1</span>) % a.length;</span><br><span class="line">        k++;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1337"><a class="markdownIt-Anchor" href="#1337"></a> 1.3.37</h3>
<p>最初的版本是41个人，报数3的被杀死，下一个人从1开始重新报数。<br />
Josephus将自己和朋友安排在16和31的位置，最后活下来的两个人就是他们。<br />
虽然与本题的解无关，但Josephus问题的关键是给定人数N和报数M，如何快速找出最后的若干个元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">int</span> M = Integer.parseInt(args[<span class="number">1</span>]);</span><br><span class="line">    Queue&lt;Integer&gt; q = <span class="keyword">new</span> Queue&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">        q.enqueue(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(!q.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> person = q.dequeue();</span><br><span class="line">        <span class="keyword">if</span>(m == M) &#123;</span><br><span class="line">            System.out.print(person);</span><br><span class="line">            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            m = <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            q.enqueue(person);</span><br><span class="line">            m++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1338"><a class="markdownIt-Anchor" href="#1338"></a> 1.3.38</h3>
<p>数组实现的队列，删除第k个元素后必须移动数组元素，使之重新紧密。<br />
既然必定移动元素，那为避免移动元素而使用循环数组就失去了意义，即便使用循环数组也要移动元素，而且模数等计算反而更多。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GeneralizedArrayQueue</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Item[] a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GeneralizedArrayQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        a = (Item[]) <span class="keyword">new</span> Object[<span class="number">2</span>];</span><br><span class="line">        N = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> max)</span> </span>&#123;</span><br><span class="line">        Item[] temp = (Item[]) <span class="keyword">new</span> Object[max];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">            temp[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        a = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Item x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(N == a.length) resize(a.length * <span class="number">2</span>);</span><br><span class="line">        a[N] = x;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">delete</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 既然每次删除都要移动数组，循环数组就失去了意义</span></span><br><span class="line">        <span class="keyword">if</span>(k &lt; <span class="number">1</span> || k &gt; N) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;out of range&quot;</span>);</span><br><span class="line">        Item item = a[k-<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = k; i &lt; N; i++)&#123;</span><br><span class="line">            a[i-<span class="number">1</span>] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        a[--N] = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>链表实现的队列：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GeneralizedQueue</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        Node next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line">    <span class="comment">// 未必只从最后一个出队，出队时必定遍历，last指针失去意义</span></span><br><span class="line">    <span class="comment">// 如果没有last指针，每次入队元素只能插到链表首，就变成一个逆序的</span></span><br><span class="line">    <span class="comment">// 队列的第一项实际上是链表尾，删除第k项就变成了删除倒数第k项</span></span><br><span class="line">    <span class="comment">// 如果不想变成删除倒数第k项，还是需要last指针</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> first == <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Item x)</span> </span>&#123;</span><br><span class="line">        Node oldlast = last;</span><br><span class="line">        last = <span class="keyword">new</span> Node();</span><br><span class="line">        last.item = x;</span><br><span class="line">        <span class="keyword">if</span>(oldlast == <span class="keyword">null</span>) first = last;</span><br><span class="line">        <span class="keyword">else</span> oldlast.next = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">delete</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        Node dummy = <span class="keyword">new</span> Node();</span><br><span class="line">        dummy.next = first;</span><br><span class="line">        Node cur = dummy;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; k; i++)</span><br><span class="line">            cur = cur.next;</span><br><span class="line">        Item item = cur.next.item;</span><br><span class="line">        cur.next = cur.next.next;</span><br><span class="line">        first = dummy.next;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1339"><a class="markdownIt-Anchor" href="#1339"></a> 1.3.39</h3>
<p>【定长为 N 的先进先出的数据结构】<br />
这意味着需要在构造函数中给定容量。<br />
【当缓冲区为空时，消费者会在数据存入缓冲区前等待】<br />
这意味着需要能判断缓冲区是否为空，还需要能将数据从缓冲区取出。<br />
【当缓冲区满时，生产者会等待将数据存入缓冲区】<br />
这意味着需要能判断缓冲区是否满，还需要能将数据存入缓冲区。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RingBuffer</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RingBuffer</span><span class="params">(<span class="keyword">int</span> capacity)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">dequeue</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>循环队列的经典写法，留空一格以解决head == tail无法区分队列满和队列空的问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RingBuffer</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Item[] a;</span><br><span class="line">    <span class="comment">// capacity = a.length - 1</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> head;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tail;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RingBuffer</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        a = (Item[]) <span class="keyword">new</span> Object[capacity+<span class="number">1</span>];</span><br><span class="line">        head = <span class="number">0</span>;</span><br><span class="line">        tail = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> head == tail;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFull</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (tail + <span class="number">1</span>) % a.length == head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isFull()) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Buffer is full&quot;</span>);</span><br><span class="line">        a[tail] = item;</span><br><span class="line">        tail = (tail + <span class="number">1</span>) % a.length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">dequeue</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty()) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Buffer is empty&quot;</span>);</span><br><span class="line">        Item item = a[head];</span><br><span class="line">        head = (head + <span class="number">1</span>) % a.length;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1340"><a class="markdownIt-Anchor" href="#1340"></a> 1.3.40</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MoveToFront</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span> item;</span><br><span class="line">        Node next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertAtFirst</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">        Node oldfirst = first;</span><br><span class="line">        first = <span class="keyword">new</span> Node();</span><br><span class="line">        first.item = ch;</span><br><span class="line">        first.next = oldfirst;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeDuplicateNode</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">        Node dummy = <span class="keyword">new</span> Node();</span><br><span class="line">        dummy.next = first;</span><br><span class="line">        <span class="keyword">for</span>(Node bef = dummy; bef.next != <span class="keyword">null</span>; bef = bef.next)&#123;</span><br><span class="line">            <span class="keyword">if</span>(ch == bef.next.item) &#123;</span><br><span class="line">                bef.next = bef.next.next;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        s.append(<span class="string">&quot;[ &quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(Node cur = first; cur != <span class="keyword">null</span>; cur = cur.next)&#123;</span><br><span class="line">            s.append(cur.item);</span><br><span class="line">            s.append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">            N++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(first != <span class="keyword">null</span>) s.delete(s.length()-<span class="number">2</span>, s.length());</span><br><span class="line">        s.append(<span class="string">&quot; ]@&quot;</span>);</span><br><span class="line">        s.append(N);</span><br><span class="line">        <span class="keyword">return</span> s.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MoveToFront m = <span class="keyword">new</span> MoveToFront();</span><br><span class="line">        <span class="keyword">while</span>(!StdIn.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">char</span> ch = StdIn.readChar();</span><br><span class="line">            m.removeDuplicateNode(ch);</span><br><span class="line">            m.insertAtFirst(ch);</span><br><span class="line">            System.out.println(m);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1341"><a class="markdownIt-Anchor" href="#1341"></a> 1.3.41</h3>
<p>如果仅使用公有API，则需要可以将q的元素出队，再在q和r中入队。<br />
终止条件不能用isEmpty，因为你从q出队紧接着又放回了元素，一次操作后队列元素数量是不变的，因此永远不会isEmpty。<br />
优点是可扩展性好，无所谓队列的底层是数组实现还是链表实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Queue</span><span class="params">(Queue&lt;Item&gt; q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; q.size(); i++)&#123;</span><br><span class="line">        Item item = q.dequeue();</span><br><span class="line">        q.enqueue(item);</span><br><span class="line">        <span class="keyword">this</span>.enqueue(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1342"><a class="markdownIt-Anchor" href="#1342"></a> 1.3.42</h3>
<p>如果仅使用公有API，则需要用一个辅助栈，<br />
首先把s所有元素出栈到辅助栈，得到逆序的s，再从辅助栈出栈放回s和t<br />
优点是可扩展性好，无所谓栈的底层是数组实现还是链表实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Stack</span><span class="params">(Stack&lt;Item&gt; s)</span> </span>&#123;</span><br><span class="line">    Stack&lt;Item&gt; h = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span>(!s.isEmpty()) h.push(s.pop());</span><br><span class="line">    <span class="keyword">while</span>(!h.isEmpty())&#123;</span><br><span class="line">        Item item = h.pop();</span><br><span class="line">        s.push(item);</span><br><span class="line">        <span class="keyword">this</span>.push(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果是链表实现，也可以直接拷贝链表。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Stack</span><span class="params">(Stack&lt;Item&gt; s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Node scur = s.first, last = <span class="keyword">null</span>; scur != <span class="keyword">null</span>; scur = scur.next) &#123;</span><br><span class="line">        Node oldlast = last;</span><br><span class="line">        last = <span class="keyword">new</span> Node();</span><br><span class="line">        last.item = scur.item;</span><br><span class="line">        <span class="keyword">if</span> (oldlast == <span class="keyword">null</span>) first = last;</span><br><span class="line">        <span class="keyword">else</span> oldlast.next = last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1343"><a class="markdownIt-Anchor" href="#1343"></a> 1.3.43</h3>
<p>File的构造函数有：<code>File(String pathname)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String[] list(); <span class="comment">// 返回一个当前目录下的文件名和目录名的字符串数组</span></span><br><span class="line"><span class="keyword">public</span> File[] listFiles(); <span class="comment">// 返回一个当前目录下文件和目录组成的File数组</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isDirectory</span><span class="params">()</span></span>; <span class="comment">// 测试当前抽象路径是否是目录</span></span><br></pre></td></tr></table></figure>
<p>树的先序遍历，不需要使用队列。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">listFiles</span><span class="params">(File f, String indent)</span> </span>&#123;</span><br><span class="line">    System.out.println(indent + f.getName());</span><br><span class="line">    <span class="keyword">if</span>(f.isDirectory())&#123;</span><br><span class="line">        File[] files = f.listFiles();</span><br><span class="line">        <span class="keyword">for</span>(File file: files) &#123;</span><br><span class="line">            listFiles(file, indent+<span class="string">&quot;  &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 最初调用：listFiles(f, &quot;&quot;)</span></span><br></pre></td></tr></table></figure>
<h3 id="1344"><a class="markdownIt-Anchor" href="#1344"></a> 1.3.44</h3>
<p>如果光标不移动，每次插入字符后光标前进一格，只允许删除光标位置（左侧的那个）的字符。这就是一个栈，因为删除的是刚插入的那个字符。<br />
如果允许光标左移，光标右侧的字符在光标插入和删除时是没有影响的，跟不存在一样。每次左移就等价于出栈。多次左移出栈得到的结果，是右侧字符的逆序。<br />
如果又允许光标右移，需要把右侧正序第一个字符，逆序的最后一个字符，即最近一次出栈的字符再入栈。<br />
因此再使用一个栈保存左移时出栈的右侧字符，从这个栈出栈的第一个字符就是右侧逆序的最后一个字符。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Buffer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Stack&lt;Character&gt; left;</span><br><span class="line">    <span class="keyword">private</span> Stack&lt;Character&gt; right;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Buffer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        left = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        right = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">        left.push(c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">delete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(left.isEmpty()) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;No char at cursor.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> left.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">left</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; !left.isEmpty() &amp;&amp; i &lt; k; i++)&#123;</span><br><span class="line">            right.push(left.pop());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">right</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; !right.isEmpty() &amp;&amp; i &lt; k; i++)&#123;</span><br><span class="line">            left.push(right.pop());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> left.size() + right.size();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> ch: right) s.append(ch);</span><br><span class="line">        s.insert(<span class="number">0</span>, <span class="string">&#x27;|&#x27;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">char</span> ch: left) s.insert(<span class="number">0</span>, ch);</span><br><span class="line">        <span class="keyword">return</span> s.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1345"><a class="markdownIt-Anchor" href="#1345"></a> 1.3.45</h3>
<p>栈下溢指的是栈中没有元素还执行pop操作。<br />
判断下溢：用一个计数变量对栈元素数量计数，入栈加1，出栈减1，如果计数变量为0又遇到了出栈操作，则下溢。<br />
对于给定输出序列，如：<br />
c. 2 5 6 7 4 8 9 3 1 0<br />
d. 4 3 2 1 0 5 6 7 8 9<br />
用算法得出出栈的顺序。<br />
入栈是按0-9的顺序，期间可能出栈。<br />
算法：对于输出序列的每个数字，如果栈顶数字和它相同，则接下来进行一个出栈操作，否则进行一个下一个入栈操作。<br />
对于c. 2 5 6 7 4 8 9 3 1 0<br />
2和栈顶元素一样吗？栈顶没元素，所以不一样，执行下一个入栈操作得到 0<br />
2和栈顶元素一样吗？栈顶为0，不一样，执行下一个入栈操作得到0 1<br />
2和栈顶元素一样吗？栈顶为1，不一样，执行下一个入栈操作得到0 1 2<br />
2和栈顶元素一样吗？栈顶为2，一样，执行出栈操作得到0 1 2 -<br />
5和栈顶元素一样吗？栈顶为1，不一样，执行下一个入栈操作得到 0 1 2 - 3<br />
5和栈顶元素一样吗？栈顶为3，不一样，执行下一个入栈操作得到 0 1 2 - 3 4<br />
5和栈顶元素一样吗？栈顶为4，不一样，执行下一个入栈操作得到 0 1 2 - 3 4 5<br />
5和栈顶元素一样吗？栈顶为5，一样，执行出栈操作得到0 1 2 - 3 4 5 -<br />
6和栈顶元素一样吗？栈顶为4，不一样，执行下一个入栈操作得到0 1 2 - 3 4 5 - 6<br />
6和栈顶元素一样吗？栈顶为6，一样，执行出栈操作得到0 1 2 - 3 4 5 - 6 -<br />
7和栈顶元素一样吗？栈顶为4，不一样，执行下一个入栈操作得到0 1 2 - 3 4 5 - 6 - 7<br />
7和栈顶元素一样吗？栈顶为7，一样，执行出栈操作得到0 1 2 - 3 4 5 - 6 - 7 -<br />
4和栈顶元素一样吗？栈顶为4，一样，执行出栈操作得到0 1 2 - 3 4 5 - 6 - 7 - -</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getPushPopString</span><span class="params">(String output)</span> </span>&#123;</span><br><span class="line">    String[] items = output.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">    StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    Stack&lt;String&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; items.length)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!stack.isEmpty() &amp;&amp; stack.peek().equals(items[i])) &#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">            s.append(<span class="string">&quot;- &quot;</span>);</span><br><span class="line">            i++;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            stack.push(String.valueOf(n));</span><br><span class="line">            s.append(String.valueOf(n));</span><br><span class="line">            s.append(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            n++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1346"><a class="markdownIt-Anchor" href="#1346"></a> 1.3.46</h3>
<p>由于入栈顺序是从小到大，如果大的元素c出栈了，且小的元素a和b还没出栈，则b更靠近栈顶，因此b一定比a先出栈。所以如果存在a先出栈的三元组，这种序列是不可能得到的。</p>
<h3 id="1347"><a class="markdownIt-Anchor" href="#1347"></a> 1.3.47</h3>
<p>队列：如果是由链表实现的，只需要连接链表即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">catenation</span><span class="params">(Queue&lt;Item&gt; q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(last == <span class="keyword">null</span>)&#123;</span><br><span class="line">        last = q.first;</span><br><span class="line">        first = last;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        last.next = q.first;</span><br><span class="line">    &#125;</span><br><span class="line">    q.first = <span class="keyword">null</span>;</span><br><span class="line">    q.last = <span class="keyword">null</span>;</span><br><span class="line">    q.N = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只使用公有API，不管底层如何实现的连接：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">catenation</span><span class="params">(Queue&lt;Item&gt; q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(!q.isEmpty())&#123;</span><br><span class="line">        enqueue(q.dequeue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>栈，需要保证连接后，自己的栈顶不变，被连接的栈的栈顶先于被连接的栈的其他元素出栈。<br />
类似于</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0  4</span><br><span class="line">1  5</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<p>变成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure>
<p>操作就是用一个辅助栈，主栈所有元素出栈到辅助栈，被连接的栈所有元素出栈到辅助栈。此时栈顶就是被连接的栈的栈底元素。<br />
再从辅助栈出栈到主栈。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">catenation</span><span class="params">(Stack&lt;Item&gt; q)</span> </span>&#123;</span><br><span class="line">    Stack&lt;Item&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span>(!isEmpty())&#123;</span><br><span class="line">        s.push(<span class="keyword">this</span>.pop());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!q.isEmpty())&#123;</span><br><span class="line">        s.push(q.pop());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!s.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">this</span>.push(s.pop());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Steque有入队操作的栈。<br />
入队操作实际上是将元素放到栈底。<br />
因此连接时，可以将元素从被连接的栈出栈，放到主栈的栈底。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">catenation</span><span class="params">(Steque&lt;Item&gt; s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(!s.isEmpty())&#123;</span><br><span class="line">        <span class="keyword">this</span>.enqueue(s.pop());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1348"><a class="markdownIt-Anchor" href="#1348"></a> 1.3.48</h3>
<p>Deque的pushLeft向链表首添加节点，pushRight向链表尾添加结点。只要popLeft不弹出pushRight添加的元素，每一边都可以作为一个栈使用。<br />
为了避免侵入另一端，需要对两个栈的元素进行计数，进行过几次push，那一边才能进行几次pop。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DoubleStack</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Deque&lt;Item&gt; stack;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N1;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N2;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DoubleStack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        stack = <span class="keyword">new</span> Deque&lt;&gt;();</span><br><span class="line">        N1 = <span class="number">0</span>;</span><br><span class="line">        N2 = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pushStack1</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        stack.pushLeft(item);</span><br><span class="line">        N1++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">popStack1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmptyStack1()) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Stack1 Underflow&quot;</span>);</span><br><span class="line">        N1--;</span><br><span class="line">        <span class="keyword">return</span> stack.popLeft();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pushStack2</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">        stack.pushRight(item);</span><br><span class="line">        N2++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">popStack2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(isEmptyStack2()) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Stack2 Underflow&quot;</span>);</span><br><span class="line">        N2--;</span><br><span class="line">        <span class="keyword">return</span> stack.popRight();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmptyStack1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N1 == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmptyStack2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N2 == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sizeStack1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sizeStack2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1349"><a class="markdownIt-Anchor" href="#1349"></a> 1.3.49?</h3>
<p>2   0<br />
1   1<br />
0   2<br />
入队-出队：所有元素从A出栈O(n)，B入栈O(n)，B出栈1次O(1)</p>
<p>手头的工具只有栈，入队只能是入栈。出队时应该将最先入队的元素出队，但最先入队的元素在栈底，想让栈底元素变成栈顶，需要第二个栈，将栈中所有元素倒过来。<br />
如果第二个栈还没出队完，又要入队怎么办？不能放第二个栈的栈顶，这会破坏已有元素的顺序。那只能放第一个栈。<br />
入队：元素放入第一个栈，O(1)<br />
出队：如果第二个栈不为空，从第二个栈出队。如果第二个栈为空，把第一个栈所有元素放到第二个栈，再出队。最坏情况：入队-入队-出队-入-入-入-入-入-入-出-出，第一个栈有多少元素就要移多少，O(n)<br />
要求在最坏情况下入队出队操作的复杂度是O(1)，需要改变出队时的策略。从一个栈将元素倒到第二个栈是必须的，不然栈底元素不可能先出栈，也就是说这n次操作不可能减少，但n次操作必须集中在出队时吗？能不能将n次移动操作平摊到每次入队或出队操作？</p>
<h3 id="1350"><a class="markdownIt-Anchor" href="#1350"></a> 1.3.50</h3>
<p>在Stack的实现中增加两个计数器，一个统计push被调用的次数，另一个统计pop被调用的次数。<br />
在迭代器类中保存创建迭代器时，push和pop被调用的次数。<br />
每次调用迭代器方法时，如果调用次数不一致，说明在迭代器创建后进行过push和pop，此时抛出异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node current = first;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> itPushCount = pushCount;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> itPopCount = popCount;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(itPushCount != pushCount || itPopCount != popCount) </span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        <span class="keyword">return</span> current != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(itPushCount != pushCount || itPopCount != popCount)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">        Item item = current.item;</span><br><span class="line">        current = current.next;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-算法分析"><a class="markdownIt-Anchor" href="#14-算法分析"></a> 1.4 算法分析</h2>
<h3 id="141"><a class="markdownIt-Anchor" href="#141"></a> 1.4.1</h3>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="7.626ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3370.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mo" transform="translate(760, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1149, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(2037, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(2481.7, 0)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g><g data-mml-node="mo" transform="translate(2981.7, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，组合数公式</p>
<h3 id="142"><a class="markdownIt-Anchor" href="#142"></a> 1.4.2？</h3>
<p>如果发生溢出，一定是在<code>-a[i]-a[j]</code>处。<br />
这部分在《深入理解计算机系统》中有总结但还没整理到。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 计算和为０的三元组的数目</span></span><br><span class="line">    Arrays.sort(a);</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; N; j++)</span><br><span class="line">            <span class="keyword">if</span> (BinarySearch.rank(-a[i]-a[j], a) &gt; j)</span><br><span class="line">                cnt++;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="143"><a class="markdownIt-Anchor" href="#143"></a> 1.4.3?</h3>
<p>用StdDraw画出点容易，但如何拟合函数图像？</p>
<h3 id="144"><a class="markdownIt-Anchor" href="#144"></a> 1.4.4</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length; <span class="comment">// A</span></span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;  <span class="comment">// A</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) <span class="comment">// 初始化是A，其他是B</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N; j++) <span class="comment">// 初始化是B，其他是C</span></span><br><span class="line">            <span class="keyword">if</span>(a[i] + a[j] == <span class="number">0</span>) <span class="comment">// C</span></span><br><span class="line">                cnt++;  <span class="comment">// D</span></span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">语句块</th>
<th style="text-align:left">运行时间s</th>
<th style="text-align:left">频率</th>
<th style="text-align:left">总时间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">A</td>
<td style="text-align:left">t3</td>
<td style="text-align:left">1</td>
<td style="text-align:left">t3</td>
</tr>
<tr>
<td style="text-align:left">B</td>
<td style="text-align:left">t2</td>
<td style="text-align:left">N</td>
<td style="text-align:left">t2N</td>
</tr>
<tr>
<td style="text-align:left">C</td>
<td style="text-align:left">t1</td>
<td style="text-align:left">N(N-1)/2</td>
<td style="text-align:left">t1(N^2/2-N/2)</td>
</tr>
<tr>
<td style="text-align:left">D</td>
<td style="text-align:left">t0</td>
<td style="text-align:left">x(取决于输入)</td>
<td style="text-align:left">t0x</td>
</tr>
</tbody>
</table>
<p>总时间<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="32.624ex" height="2.565ex" role="img" focusable="false" viewBox="0 -883.9 14419.8 1133.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(986.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(1987, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mi" transform="translate(2751.6, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(3861.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(4862, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(5626.5, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(6015.5, 0)"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mn" transform="translate(942.3, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7361.4, 0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(7861.4, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(8583.6, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(9583.8, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(10471.8, 0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(10971.8, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(11471.8, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(12083, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(13083.2, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="mi" transform="translate(13847.8, 0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></svg></mjx-container>，即<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="34.105ex" height="2.565ex" role="img" focusable="false" viewBox="0 -883.9 15074.3 1133.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(389, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1153.6, 0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1653.6, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(2153.6, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="msup" transform="translate(2542.6, 0)"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mn" transform="translate(942.3, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(4110.6, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(5110.8, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(5499.8, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(6486.6, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msub" transform="translate(7486.8, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(8251.4, 0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(8751.4, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(9251.4, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(9640.4, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(10750.6, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(11750.8, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(12737.6, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msub" transform="translate(13737.8, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="mi" transform="translate(14502.3, 0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></svg></mjx-container>，近似为<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="9.363ex" height="2.565ex" role="img" focusable="false" viewBox="0 -883.9 4138.4 1133.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="A0" d=""></path></g><g data-mml-node="mo" transform="translate(250, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msub" transform="translate(639, 0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mn" transform="translate(361, -150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1403.6, 0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(1903.6, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(2403.6, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="msup" transform="translate(2792.6, 0)"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mn" transform="translate(942.3, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></svg></mjx-container>（假设x远小于x），增量的数量级为<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="3.045ex" height="2ex" role="img" focusable="false" viewBox="0 -883.9 1345.8 883.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mn" transform="translate(942.3, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></svg></mjx-container></p>
<h3 id="145"><a class="markdownIt-Anchor" href="#145"></a> 1.4.5?</h3>
<ol>
<li><code>N</code></li>
<li><code>1/N</code></li>
<li><code>1</code></li>
<li><code>2N^3</code></li>
<li><code>1</code></li>
<li><code>2</code></li>
<li>？？？</li>
</ol>
<h3 id="146"><a class="markdownIt-Anchor" href="#146"></a> 1.4.6</h3>
<p>a. <mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="49.24ex" height="2.61ex" role="img" focusable="false" viewBox="0 -903.7 21764.1 1153.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(1110.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(2110.4, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2998.4, 0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(3498.4, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(4220.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(5220.9, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(6108.9, 0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mn" transform="translate(6608.9, 0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g><g data-mml-node="mo" transform="translate(7331.1, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(8331.3, 0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(9725.6, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(10725.8, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(11613.8, 0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="msup" transform="translate(12113.8, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278, 0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778, 0)"></path></g><g data-mml-node="mn" transform="translate(1278, -241.4) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(1681.6, 0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(1848.2, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g></g><g data-mml-node="mo" transform="translate(14876.4, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(15932.1, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(16432.1, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(17542.4, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(18542.6, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(19320.4, 0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mn" transform="translate(20376.1, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(20876.1, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g></g></svg></mjx-container><br />
b. <mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="39.226ex" height="1.731ex" role="img" focusable="false" viewBox="0 -683 17337.8 765"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(722.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(1722.4, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mo" transform="translate(2444.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(3444.9, 0)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path></g><g data-mml-node="mo" transform="translate(4167.1, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mn" transform="translate(5167.3, 0)"><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path></g><g data-mml-node="mo" transform="translate(5889.6, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(6889.8, 0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(8284, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(9284.2, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(10450, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(11505.8, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(12005.8, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(13116, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(14116.2, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(14894, 0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mn" transform="translate(15949.8, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(16449.8, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g></g></svg></mjx-container><br />
c. <mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.546ex" xmlns="http://www.w3.org/2000/svg" width="8.577ex" height="2.116ex" role="img" focusable="false" viewBox="0 -694 3790.9 935.4"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="msub" transform="translate(1054.7, 0)"><g data-mml-node="mi"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278, 0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778, 0)"></path></g><g data-mml-node="mn" transform="translate(1278, -241.4) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(2736.2, 0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(2902.9, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g></g></svg></mjx-container></p>
<h3 id="147"><a class="markdownIt-Anchor" href="#147"></a> 1.4.7</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N; j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = j + <span class="number">1</span>; k &lt; N; k++)</span><br><span class="line">                <span class="keyword">if</span>(a[i] + a[j] + a[k] == <span class="number">0</span>)</span><br><span class="line">                    cnt++;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>涉及输入数字的算术操作（和比较）的成本模型分析。<br />
只包括if这一句，每次有2次加法操作和1次比较操作，因此<code>~N^3/6 * 3 = ~N^3/2</code></p>
<h3 id="148"><a class="markdownIt-Anchor" href="#148"></a> 1.4.8</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N; j++)</span><br><span class="line">            <span class="keyword">if</span>(a[i] == a[j])</span><br><span class="line">                cnt++;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果输入元素中相等元素都是2个。</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    Arrays.sort(a);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i] == a[i - <span class="number">1</span>])</span><br><span class="line">            cnt++;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果相等元素有多个，计算相同个数然后使用组合数公式</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> number_cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    Arrays.sort(a);</span><br><span class="line">    <span class="keyword">int</span> first = a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++)</span><br><span class="line">        <span class="keyword">if</span>(a[i] == first) &#123;</span><br><span class="line">            number_cnt++;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            first = a[i];</span><br><span class="line">            cnt += number_cnt * (number_cnt + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            number_cnt = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="149"><a class="markdownIt-Anchor" href="#149"></a> 1.4.9</h3>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.339ex" xmlns="http://www.w3.org/2000/svg" width="10.242ex" height="2.384ex" role="img" focusable="false" viewBox="0 -903.7 4526.9 1053.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(584, -150) scale(0.707)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g><g data-mml-node="mo" transform="translate(1539.7, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(2595.5, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(529, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g><g data-mml-node="mi" transform="translate(3822.9, 0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g></g></g></svg></mjx-container>（其中<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.375ex" xmlns="http://www.w3.org/2000/svg" width="9.847ex" height="2.014ex" role="img" focusable="false" viewBox="0 -724.8 4352.2 890.4"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(1165.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(2221.6, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500, 413) scale(0.707)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g><g data-mml-node="msub" transform="translate(3145.6, 0)"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mn" transform="translate(803, -150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></g></svg></mjx-container>）</p>
<h3 id="1410"><a class="markdownIt-Anchor" href="#1410"></a> 1.4.10</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(key &lt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key &gt; a[mid] lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 找最小的索引，相等的时候它左边可能还有更小的，记录一下再去访问左边</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearchLowest</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> result = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(key &lt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key &gt; a[mid]) lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            result = mid;</span><br><span class="line">            hi = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1411"><a class="markdownIt-Anchor" href="#1411"></a> 1.4.11</h3>
<p>利用返回给定键最小和最大索引的二分查找，可以实现2logN的算法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">howMany</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> rankHighest(key, a) - rankLowest(key, a) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rankLowest</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> result = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(key &lt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key &gt; a[mid]) lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            result = mid;</span><br><span class="line">            hi = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rankHighest</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> result = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; a[mid]) lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            result = mid;</span><br><span class="line">            lo = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1412"><a class="markdownIt-Anchor" href="#1412"></a> 1.4.12</h3>
<p>两个指针，等于，小于，大于，哪个前进？小于和大于，小的那个前进。等于时谁前进？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printIntersection</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span>[] b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt; a.length &amp;&amp; j &lt; b.length) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] &lt; b[j]) i++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[i] &gt; b[j]) j++;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> same = a[i];</span><br><span class="line">            <span class="keyword">while</span>(i &lt; a.length &amp;&amp; a[i] == same)&#123;</span><br><span class="line">                System.out.println(a[i]);</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(j &lt; b.length &amp;&amp; b[j] == same) &#123;</span><br><span class="line">                System.out.println(b[j]);</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1413"><a class="markdownIt-Anchor" href="#1413"></a> 1.4.13</h3>
<ul>
<li>a.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Accumulator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> total;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>16字节对象开销、8字节double开销、4字节int开销，4字节用于填充为8字节的开销，共32字节。</p>
<ul>
<li>b.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Transaction</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Date date;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> amount;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>16字节对象开销、8字节String引用开销、40字节String对象开销、8字节Date引用开销、32字节Date对象开销、8字节double开销，共112字节</p>
<ul>
<li>c.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedCapacityStackOfStrings</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String[] a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>16字节对象开销、8字节字符串数组引用开销、字符串数组（16字节对象开销、4字节数组长度开销、4字节填充、N倍String对象开销，共24+40N），4字节int开销、4字节填充开销，共56+40N字节</p>
<ul>
<li>d.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point2D</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>e.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Interval1D</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> min;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>16字节对象开销、8字节double开销、8字节double开销，共32字节</p>
<ul>
<li>f.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Interval2D</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Interval1D x;</span><br><span class="line">    <span class="keyword">private</span> Interval1D y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>16字节对象开销、8字节Interval1D引用开销、32字节Interval1D对象开销，8字节Interval1D引用开销、32字节Interval1D对象开销，共96字节</p>
<ul>
<li>g.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Double</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>16字节对象开销、8字节double开销，共24字节。</p>
<h3 id="1414"><a class="markdownIt-Anchor" href="#1414"></a> 1.4.14</h3>
<p>4-sum遍历三元整数对，找3个数的和的相反数。设三元整数对为abc，寻找的第四个数为d，则可能出现的位置是dabc、adbc、abdc、abcd，会被重复计算四次，可以只计算考虑被寻找的数位于c右边的那次。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    Arrays.sort(a);</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N; j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = j + <span class="number">1</span>; k &lt; N; k++)</span><br><span class="line">                <span class="keyword">if</span>(rank(-a[i]-a[j]-a[k], a) &gt; k)</span><br><span class="line">                    cnt++;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1415"><a class="markdownIt-Anchor" href="#1415"></a> 1.4.15</h3>
<p>-3 -2 0 1 3 9<br />
二分找最小的正数，如果是负数就在右边找，如果是非负数就记录一下然后往左边找，最后返回记录值，logN<br />
从最小的非负数和它左边的数一起往左右两边找，绝对值小的前进，若绝对值相等，则说明就是一对。O(N)+O(logN)<br />
若两个指针从两侧开始呢？不需要找最小非负数了。<br />
绝对值大的向中间前进<br />
绝对值相等则是一对，然后两个指针都前进<br />
左侧指针可能会越过右侧指针，停止<br />
左侧指针可能会等于右侧指针，停止<br />
同号和一定不为0，可以提前停止</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">TwoSumFaster</span><span class="params">(<span class="keyword">int</span>[] a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt; hi &amp;&amp; (a[lo] ^ a[hi]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">assert</span> a[lo] &lt; <span class="number">0</span> &amp;&amp; a[hi] &gt; <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(a[lo] &lt; -a[hi]) lo++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a[lo] &gt; -a[hi]) hi--;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            lo++;</span><br><span class="line">            hi--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2正+1负=0<br />
2负+1正=0<br />
0+1正1负</p>
<p>-6 -5 -4 -3 -1       -5<br />
-5 -4 -3 -2 -1 0 1 2 3<br />
找最小的非负数<br />
二分，如果小于0，则向右找<br />
如果大于0则记录之后想左找<br />
如果等于0则直接返回</p>
<p>-(a+b) 变小<br />
a+b变大</p>
<p>最小的负数0、最大的负数、最小的正数、最大的正数</p>
<p>如果加起来的数小于给定值，要使它变大左侧的右移<br />
如果加起来的数大于给定值，要使它变小右侧的左移<br />
等于给定值，同时前进<br />
-5    -1<br />
-4   -1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">ThreeSumFaster</span><span class="params">(<span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> firstNonNegativeIndex = rankNonNegative(a);</span><br><span class="line">    <span class="keyword">if</span>(firstNonNegativeIndex == -<span class="number">1</span>) <span class="keyword">return</span> cnt;</span><br><span class="line">    <span class="keyword">int</span> maxNegativeIndex = firstNonNegativeIndex - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> minPositiveIndex = firstNonNegativeIndex;</span><br><span class="line">    <span class="keyword">if</span>(a[firstNonNegativeIndex] == <span class="number">0</span>)&#123;</span><br><span class="line">        minPositiveIndex++;</span><br><span class="line">        <span class="keyword">int</span> i = maxNegativeIndex, j = minPositiveIndex;</span><br><span class="line">        <span class="keyword">while</span>(i &gt;= <span class="number">0</span> &amp;&amp; j &lt; a.length) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = a[i] + a[j];</span><br><span class="line">            <span class="keyword">if</span>(sum &lt; <span class="number">0</span>) j++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(sum &gt; <span class="number">0</span>) i--;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(String.format(<span class="string">&quot;%d %d %d&quot;</span>,a[i],a[firstNonNegativeIndex],a[j]));</span><br><span class="line">                cnt++;</span><br><span class="line">                i--;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= maxNegativeIndex; k++)&#123;</span><br><span class="line">        <span class="keyword">int</span> lo = minPositiveIndex, hi = a.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(lo &lt; hi) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = -a[lo] - a[hi];</span><br><span class="line">            <span class="keyword">if</span>(sum &gt; a[k]) lo++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(sum &lt; a[k]) hi--;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(String.format(<span class="string">&quot;%d %d %d&quot;</span>,a[k],a[lo],a[hi]));</span><br><span class="line">                cnt++;</span><br><span class="line">                lo++;</span><br><span class="line">                hi--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = minPositiveIndex; k &lt; a.length; k++)&#123;</span><br><span class="line">        <span class="keyword">int</span> lo = <span class="number">0</span>, hi = maxNegativeIndex;</span><br><span class="line">        <span class="keyword">while</span>(lo &lt; hi) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = -a[lo] - a[hi];</span><br><span class="line">            <span class="keyword">if</span>(sum &gt; a[k]) lo++;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(sum &lt; a[k]) hi--;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(String.format(<span class="string">&quot;%d %d %d&quot;</span>,a[lo],a[hi],a[k]));</span><br><span class="line">                cnt++;</span><br><span class="line">                lo++;</span><br><span class="line">                hi--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>假设正数负数各一半，如果每次都从两边走指针，可以写的更简洁，增长的数量级也只会从<code>~N/2</code>到<code>~N</code>。<br />
不对，不能这么写。首先会重复计算三次。如果不想重复计算，考虑1正1负1负、1负1正1正的情况，如果给定数是正数，你需要每次往前减小hi先找到最后一个负数，否则你会陷入找1负1正的情况，这种情况不该被计算在内。</p>
<h3 id="1416"><a class="markdownIt-Anchor" href="#1416"></a> 1.4.16</h3>
<p>对数：二分、排序<br />
排序后的每个数，它左右的元素一定是和它绝对值之差最小的元素，因为<code>a[i]&lt;=a[i+1]&lt;=a[i+2]&lt;=...</code>和<code>...&lt;=a[i-2]&lt;=a[i-1]&lt;=a[i]</code>，而<code>-a[i-2]&gt;=-a[i-1]</code>所以<code>a[i]-a[i-2]&gt;=a[i]-a[i-1]</code>，n个元素有n-1个间隔，即n-1对。在这n-1对中，差最小的那个就是要找的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">findNearest</span><span class="params">(<span class="keyword">double</span>[] a)</span> </span>&#123;</span><br><span class="line">    Arrays.sort(a);</span><br><span class="line">    <span class="keyword">double</span> min = Double.POSITIVE_INFINITY;</span><br><span class="line">    <span class="keyword">double</span> m = <span class="number">0</span>, n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; a.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i] - a[i-<span class="number">1</span>] &lt; min) &#123;</span><br><span class="line">            min = a[i] - a[i-<span class="number">1</span>];</span><br><span class="line">            m = a[i-<span class="number">1</span>];</span><br><span class="line">            n = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;%g %g&quot;</span>,m,n));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1417"><a class="markdownIt-Anchor" href="#1417"></a> 1.4.17?</h3>
<p>排序后最小的元素和最大的元素就是绝对值之差最大的元素<br />
这种需要线性对数级别。</p>
<h3 id="1418"><a class="markdownIt-Anchor" href="#1418"></a> 1.4.18?</h3>
<p>-2 -1 0 1 5 6 8 7 9，找中点5，不是局部最小，在小的半边找，不对。</p>
<h3 id="1419"><a class="markdownIt-Anchor" href="#1419"></a> 1.4.19?</h3>
<p>暴力法是遍历整个矩阵，需要N平方级别，不符合。</p>
<h3 id="1420"><a class="markdownIt-Anchor" href="#1420"></a> 1.4.20</h3>
<p>-2 -1 0 1 5 6 8 7 9<br />
1 2 3 4 5 0 -1 -2</p>
<p>4 &lt; 5 需要找更大的数<br />
若a[i] &gt; a[i-1]它是递增的</p>
<p>拐点那个数，a[i-1]&lt;a[i] &amp;&amp; a[i+1] &lt; a[i]<br />
拐点左边的数，a[i-1]&lt;a[i]<br />
拐点右边的数，a[i+1] &lt; a[i]，a[i] &lt; a[i-1]<br />
a[i-1]&lt;a[i]，则a[i]是拐点或拐点左边的数，越往左越小。如果不是拐点，则约网右越大，如果是拐点，则越往右越小。<br />
a[i-1]&gt;a[i]，则a[i]是拐点或拐点右边的数，越往右越小。如果不是拐点，则越往左越大，如果是拐点，则越往左越小。<br />
每次找中间索引，如果要找的值更大，往左或往右或停止<br />
如果要找的值更小</p>
<p>二分找最大值（拐点）<br />
以拐点为中心往左右分别二分找</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">containsBitonic</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span>[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> max = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(a[mid-<span class="number">1</span>] &lt; a[mid] &amp;&amp; a[mid+<span class="number">1</span>] &lt; a[mid])&#123;</span><br><span class="line">            max = mid;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a[mid - <span class="number">1</span>] &lt; a[mid])&#123;</span><br><span class="line">            lo = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            hi = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(key &gt; a[max]) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(key == a[max]) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="comment">// 递增序列</span></span><br><span class="line">    lo = <span class="number">0</span>;</span><br><span class="line">    hi = max - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(key &lt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key &gt; a[mid]) lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 递减序列</span></span><br><span class="line">    lo = max + <span class="number">1</span>;</span><br><span class="line">    hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(lo &lt;= hi)&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(key &lt; a[mid]) lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(key &gt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1421"><a class="markdownIt-Anchor" href="#1421"></a> 1.4.21</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> rank(key) != -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">rank</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123; <span class="comment">// 二分查找</span></span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (lo &lt;= hi) &#123; <span class="comment">// 键要么存在于 a[lo..hi] 中，要么不存在</span></span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (key &lt; a[mid]) hi = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (key &gt; a[mid]) lo = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1422"><a class="markdownIt-Anchor" href="#1422"></a> 1.4.22?</h3>
<p>如何证明斐波那契代替二分是对的？</p>
<h3 id="1423"><a class="markdownIt-Anchor" href="#1423"></a> 1.4.23?</h3>
<p>找出一个小于给定数x的有理数p/q，同时要求满足，N是什么？</p>
<h3 id="1424"><a class="markdownIt-Anchor" href="#1424"></a> 1.4.24?</h3>
<p>选中某层楼来扔的概率为1/N<br />
5层楼  1,2,3,4,5选F=2，则2,3,4,5都碎<br />
扔N个鸡蛋后碎的概率是N/(N-F+1)，扔N个碎N个，N=1，所以F=1<br />
扔N次碎F平方个鸡蛋</p>
<h3 id="1425"><a class="markdownIt-Anchor" href="#1425"></a> 1.4.25?</h3>
<h3 id="1426"><a class="markdownIt-Anchor" href="#1426"></a> 1.4.26</h3>
<p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="12.827ex" height="1.756ex" role="img" focusable="false" viewBox="0 -694 5669.4 776"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(751.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(1751.4, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2402.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3402.9, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(4113.7, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5169.4, 0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container>的充要条件是<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="6.073ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2684.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(918, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1362.7, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2295.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>、<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.62ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2484.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(818, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1262.7, 0)"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(429, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2095.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>、<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.639ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2492.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(822, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1266.7, 0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mn" transform="translate(433, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2103.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>三点共线。<br />
将数组中的每个数作为横坐标，每个数的三次方作为纵坐标构造n个点，然后用判断共线的三个点的组数的算法得到组数，它也是<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="12.827ex" height="1.756ex" role="img" focusable="false" viewBox="0 -694 5669.4 776"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(751.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(1751.4, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2402.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3402.9, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(4113.7, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5169.4, 0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container>个组数。<br />
（1）充分性：已知<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="6.073ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2684.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(918, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1362.7, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2295.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>、<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.62ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2484.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(818, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1262.7, 0)"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(429, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2095.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>、<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.639ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2492.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(822, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1266.7, 0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mn" transform="translate(433, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2103.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>三点共线，证明<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="12.827ex" height="1.756ex" role="img" focusable="false" viewBox="0 -694 5669.4 776"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(751.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(1751.4, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2402.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3402.9, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(4113.7, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5169.4, 0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container>。<br />
设向量<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="20.89ex" height="4.052ex" role="img" focusable="false" viewBox="0 -1541 9233.2 1791"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(750, 0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g></g><g data-mml-node="mo" transform="translate(0, 858)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(509, 0)"></path><svg width="609" height="865" x="0" y="-182" viewBox="152.2 -182 609 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(1.174, 1)"></path></svg></g></g><g data-mml-node="mo" transform="translate(1786.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(2842.6, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(3231.6, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(3882.8, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(4883, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(5412, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(5856.7, 0)"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(429, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(6911.4, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(7911.7, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(8844.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="20.91ex" height="4.052ex" role="img" focusable="false" viewBox="0 -1541 9242.2 1791"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mover"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(750, 0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g></g><g data-mml-node="mo" transform="translate(0, 858)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(510, 0)"></path><svg width="610" height="865" x="0" y="-182" viewBox="152.5 -182 610 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(1.176, 1)"></path></svg></g></g><g data-mml-node="mo" transform="translate(1787.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(2843.6, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(3232.6, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(3887.8, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(4888, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(5417, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(5861.7, 0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mn" transform="translate(433, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(6920.4, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(7920.7, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(8853.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，因为三点共线，所以两向量成比例。即<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="11.026ex" height="3.672ex" role="img" focusable="false" viewBox="0 -1541 4873.6 1623"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mover" transform="translate(521, 0)"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(750, 0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g></g><g data-mml-node="mo" transform="translate(0, 858)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(509, 0)"></path><svg width="609" height="865" x="0" y="-182" viewBox="152.2 -182 609 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(1.174, 1)"></path></svg></g></g><g data-mml-node="mo" transform="translate(2307.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mover" transform="translate(3363.6, 0)"><g data-mml-node="mrow"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mi" transform="translate(750, 0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g></g><g data-mml-node="mo" transform="translate(0, 858)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z" transform="translate(510, 0)"></path><svg width="610" height="865" x="0" y="-182" viewBox="152.5 -182 610 865"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" transform="scale(1.176, 1)"></path></svg></g></g></g></g></svg></mjx-container>。因此<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="15.831ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6997.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(910, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(1561.2, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(2561.4, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(3090.4, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3757.2, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(4813, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(5468.2, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(6468.4, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container>，<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="19.483ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 8611.7 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(910, 0)"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(429, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(1964.8, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(2965, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(3897.6, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(4564.3, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(5620.1, 0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mn" transform="translate(433, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(6678.9, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(7679.1, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g></g></g></svg></mjx-container>。<br />
有立方差公式有<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="44.515ex" height="2.565ex" role="img" focusable="false" viewBox="0 -883.9 19675.4 1133.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(910, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(1561.2, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(2561.4, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(3090.4, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3479.4, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(3868.4, 0)"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(429, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(4923.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(5923.4, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mi" transform="translate(6352.4, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(7103.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(8103.9, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(9036.4, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(9703.2, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(10759, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(11148, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(11803.2, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(12803.4, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(13332.4, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(13721.4, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="msup" transform="translate(14110.4, 0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mn" transform="translate(433, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(15169.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(16169.4, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(16602.4, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(17353.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(18353.9, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(19286.4, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，又因为<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="15.831ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6997.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path></g><g data-mml-node="mo" transform="translate(521, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(910, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(1561.2, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(2561.4, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(3090.4, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(3757.2, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(4813, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(5468.2, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(6468.4, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container>，因此<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="26.42ex" height="2.185ex" role="img" focusable="false" viewBox="0 -883.9 11677.5 965.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(429, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(1054.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(2055, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mi" transform="translate(2484, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(3235.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(4235.4, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(5445.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(6501.6, 0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mn" transform="translate(433, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(7560.3, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(8560.5, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mi" transform="translate(8993.5, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(9744.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(10745, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></svg></mjx-container>，即<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="23.642ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 10449.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(1040.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(2040.4, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(2473.4, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(2862.4, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(3251.4, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(3902.7, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(4902.9, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(5335.9, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(6002.7, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(7058.4, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(7447.4, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(8102.7, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(9102.9, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(9531.9, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mi" transform="translate(9920.9, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container>，<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="10.69ex" height="1.756ex" role="img" focusable="false" viewBox="0 -694 4725 776"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(651.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(1651.4, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(2362.2, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mo" transform="translate(3418, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(4196, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container>，所以<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="12.827ex" height="1.756ex" role="img" focusable="false" viewBox="0 -694 5669.4 776"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(751.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(1751.4, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2402.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3402.9, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(4113.7, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5169.4, 0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container>。<br />
（2）必要性：已知<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.186ex" xmlns="http://www.w3.org/2000/svg" width="12.827ex" height="1.756ex" role="img" focusable="false" viewBox="0 -694 5669.4 776"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(751.2, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(1751.4, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2402.7, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3402.9, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(4113.7, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(5169.4, 0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g></g></svg></mjx-container>，证明<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="6.073ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2684.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(918, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1362.7, 0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mn" transform="translate(529, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2295.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>、<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.62ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2484.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(818, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1262.7, 0)"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mn" transform="translate(429, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2095.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>、<mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex" xmlns="http://www.w3.org/2000/svg" width="5.639ex" height="2.564ex" role="img" focusable="false" viewBox="0 -883.2 2492.2 1133.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389, 0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mo" transform="translate(822, 0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msup" transform="translate(1266.7, 0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path></g><g data-mml-node="mn" transform="translate(433, 413) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></g></g><g data-mml-node="mo" transform="translate(2103.2, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>三点共线</p>
<h3 id="1427"><a class="markdownIt-Anchor" href="#1427"></a> 1.4.27</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">    pushStack.push(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(popStack.isEmpty())</span><br><span class="line">        <span class="keyword">while</span>(!pushStack.isEmpty())</span><br><span class="line">            popStack.push(pushStack.pop());</span><br><span class="line">    <span class="keyword">return</span> popStack.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在popStack为空的情况下，dequeue会将pushStack中的N个元素取出再放到popStack中，这个操作可以使本次dequeue以及之后N-1次dequeue不再需要进行该操作，均摊到每次dequeue就是常数。</p>
<h3 id="1428"><a class="markdownIt-Anchor" href="#1428"></a> 1.4.28</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">    queue.enqueue(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; queue.size(); i++)</span><br><span class="line">        queue.enqueue(queue.dequeue());</span><br><span class="line">    <span class="keyword">return</span> queue.dequeue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1429"><a class="markdownIt-Anchor" href="#1429"></a> 1.4.29</h3>
<p>steque有入队操作的栈（能往栈底添加元素的栈），想象两个瓶子（栈）底面贴着放置，上面的入栈出栈，入队时往底下的栈放，也就是栈底。如果上面栈没有元素了，就出下面栈的最里面的元素，倒到上面栈最里面就变最外面了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">    stackUp.push(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    <span class="title">if</span><span class="params">(stackUp.isEmpty()</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(!stackBottom.isEmpty)</span><br><span class="line">            stackUp.push(stackBottom.pop());</span><br><span class="line">    <span class="keyword">return</span> stackUp.pop();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">    stackBottom.push(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当stackUp为空时pop()操作需要O(n)的时间将stackBottom中的元素取出放到stackUp中，但之后n-1次pop操作都不需要进行这个操作，O(n)平摊到n次pop()后是常数。</p>
<h3 id="1430"><a class="markdownIt-Anchor" href="#1430"></a> 1.4.30?</h3>
<p>steque支持向栈底添加元素的栈<br />
一个普通栈和一个steque实现deque双向队列（同时支持在两端添加或删除元素）<br />
从左边push的如何从右边pop？<br />
右边pop，如果栈2元素为空，则把栈1元素取出来放这边，右边push的时候放栈1的栈底。<br />
如果都放到右边了，这时候左边来一次pop怎么办？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pushLeft</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">    steque.push(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pushRight</span><span class="params">(Item item)</span> </span>&#123;</span><br><span class="line">    steque.enqueue(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">popLeft</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(steque.isEmpty())</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty())</span><br><span class="line">            steque.push(stack.pop());</span><br><span class="line">    <span class="keyword">return</span> steque.pop(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Item <span class="title">popRight</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(stack.isEmpty())</span><br><span class="line">        <span class="keyword">while</span>(!steque.isEmpty())</span><br><span class="line">            stack.push(steque.pop())</span><br><span class="line">    <span class="keyword">return</span> stack.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>N次pushLeft后交替popLeft和popRight，每次都需要O(n)</p>
<h3 id="1431"><a class="markdownIt-Anchor" href="#1431"></a> 1.4.31?</h3>
<p>两个栈，为空时从另一个栈取，但N次pushLeft后交替popLeft和popRight，每次都需要O(n)</p>
<h3 id="1432"><a class="markdownIt-Anchor" href="#1432"></a> 1.4.32?</h3>
<h3 id="1433"><a class="markdownIt-Anchor" href="#1433"></a> 1.4.33</h3>
<ul>
<li>Integer：对象开销8字节、int类型开销4字节，共12字节。</li>
<li>Date：对象开销8字节、3个int类型开销12字节，共20字节。</li>
<li>String：对象开销8字节、3个int类型开销12字节、字符数组引用开销4字节，共24字节。</li>
<li>Counter：对象开销8字节、String类型引用4字节、String类型24字节、int类型4字节，共40字节。</li>
<li>Node：对象开销8字节、Item类型引用4字节、Node类型引用4字节，共16字节。作为内部类时还需要指向外部类的引用4字节。</li>
<li>Stack：对象开销8字节、Node类型引用4字节、int类型4字节</li>
<li>int[]：对象开销8字节、数组长度开销4字节、每个元素开销4字节，共12+4N字节</li>
<li>double[]：对象开销8字节、数组长度开销4字节、每个元素开销8字节，共12+8N字节</li>
<li>double[][]：对象开销8字节、数组长度开销4字节、每个元素都是引用开销4字节，共4M字节，其中每个元素本身又是double[]开销12+8N字节，共(12+8N)M，加起来一共12+4M+(12+8N)M=12+4M+12M+8NM=12+16M+8MN字节</li>
</ul>
<h3 id="1434"><a class="markdownIt-Anchor" href="#1434"></a> 1.4.34?</h3>
<p>这不是知道所报的数是大了还是小了，只知道和上一次猜测比是接近还是远了<br />
1-1000<br />
999<br />
500-751 = 499<br />
750-751 = 近了<br />
875-751 = 远了</p>
<p>远了 |x-last| &lt; |x-now|</p>
<p>-|x-now|&lt;x-last&lt;|x-now|<br />
last-|x-now| &lt; x &lt; |x-now|+last</p>
<p>x-now &gt; |x-last|<br />
x-now &lt; -|x-last|</p>
<p>近了 |x-last| &gt; |x-now|</p>
<h3 id="1435"><a class="markdownIt-Anchor" href="#1435"></a> 1.4.35?</h3>
<p>链表实现的栈，int，push()调用N次，会创建N个结点对象，每个结点中有一个int类型和一个Node引用。<br />
链表实现的栈，Integer，push()调用N次，会创建N个结点对象，每个结点中有一个Integer引用和对象和一个Node引用<br />
动态数组实现的栈，int，push()调用N次，会扩容lgN次，创建lgN个新数组</p>
<h3 id="1436"><a class="markdownIt-Anchor" href="#1436"></a> 1.4.36</h3>
<ul>
<li>基于链表的栈，int类型，栈对象开销16字节、栈首结点引用8字节、长度int开销4字节、填充4字节、静态嵌套Node（对象开销16字节，int类型开销4字节，Node结点引用8字节，填充4字节）有N个Node，总共32+32N~32N字节</li>
<li>基于链表的栈，Integer类型，栈对象开销16字节，栈首结点引用8字节、长度int开销4字节，静态嵌套Node（对象开销16字节、Integer类型引用8字节（Integer对象开销16字节、Integer对象保存int开销4字节、Integer对象填充4字节）、Node结点引用8字节，共56字节）有N个Node，总共36+56N个字节</li>
<li>基于可变数组的栈，int类型，栈对象开销16字节，长度开销4字节、数组引用开销8字节、填充4字节（数组对象开销16字节、数组长度开销4字节、填充4字节、每个int需要4字节，共24+4N）如果push进N个值，刚刚好的情况是数组长度为N，也有可能刚加倍，长度为2N-1，也可能是仅差一次pop就会缩减，例如<code>N=2^m/4+1</code>，即数组长度为<code>4*(N-1)~4N</code>，共32+24+4N=56+4N或32+24+4(4N)=56+16N</li>
<li>基于可变数的栈，Integer类型。抛去与N无关的常数项，数组中每个元素都是引用类型，需要的开销为8N，每个Integer对象本身又需要24字节开销，因此总共需要~32N开销。这里数组元素是引用，因此开销是8乘数组长度，而Integer对象本身的开销只是实际push的元素个数N乘24。数组长度最多可能是N的4倍，即<code>8*4N+24N=56N</code></li>
</ul>
<h3 id="1437"><a class="markdownIt-Anchor" href="#1437"></a> 1.4.37</h3>
<p>Integer：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">2048000   0.0    0.0</span><br><span class="line">4096000   0.8    0.0</span><br><span class="line">8192000   3.2    4.1</span><br><span class="line">16384000  4.6    1.4</span><br><span class="line">32768000  13.3   2.9</span><br><span class="line">65536000  39.1   2.9</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: GC overhead limit exceeded</span><br><span class="line">	at java.lang.Integer.valueOf(Integer.java:832)</span><br><span class="line">	at DoublingTest.FixedStackInteger(DoublingTest.java:21)</span><br><span class="line">	at DoublingTest.main(DoublingTest.java:31)</span><br></pre></td></tr></table></figure>
<p>int：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2048000   0.0 Infinity</span><br><span class="line">4096000   0.0   0.0</span><br><span class="line">8192000   0.0   NaN</span><br><span class="line">16384000   0.0 Infinity</span><br><span class="line">32768000   0.0   1.9</span><br><span class="line">65536000   0.1   2.0</span><br><span class="line">131072000   0.1   1.8</span><br><span class="line">262144000   0.2   2.1</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">	at FixedCapacityStackOfInts.&lt;init&gt;(FixedCapacityStackOfInts.java:5)</span><br><span class="line">	at DoublingTest.FixedStackInt(DoublingTest.java:27)</span><br><span class="line">	at DoublingTest.main(DoublingTest.java:40)</span><br></pre></td></tr></table></figure>
<h3 id="1438"><a class="markdownIt-Anchor" href="#1438"></a> 1.4.38</h3>
<p>外层if判断语句中的两个比较操作会进行<code>N^3</code>次，内层的if会进行<code>N(N-1)(N-2)/6=N^3/6-N^2/2+N/3</code>次，原版的暴力法ThreeSum中的if会进行<code>N(N-1)(N-2)/6=N^3/6-N^2/2+N/3</code>次，1/6-1/(2N)+1/(3N^2)<br />
原版：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  250   0.0 Infinity</span><br><span class="line">  500   0.0   2.9</span><br><span class="line"> 1000   0.1   2.0</span><br><span class="line"> 2000   0.5   5.0</span><br><span class="line"> 4000   3.5   7.5</span><br><span class="line"> 8000  26.1   7.4</span><br><span class="line">16000 208.0   8.0</span><br></pre></td></tr></table></figure>
<p>本题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> 250   0.0 Infinity</span><br><span class="line"> 500   0.2   6.6</span><br><span class="line">1000   0.3   1.3</span><br><span class="line">2000   2.3   8.7</span><br><span class="line">4000  16.7   7.2</span><br><span class="line">8000 132.2   7.9</span><br></pre></td></tr></table></figure>
<p>尽管每个算法都是<code>~N^3</code>，但实际运行时间其中一个是另一个的5-6倍。</p>
<h3 id="1439"><a class="markdownIt-Anchor" href="#1439"></a> 1.4.39</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Count 10</span><br><span class="line">   250     0.0   0.5</span><br><span class="line">   500     0.0   4.6</span><br><span class="line">  1000     0.1   6.9</span><br><span class="line">  2000     0.5   9.2</span><br><span class="line">  4000     4.0   7.7</span><br><span class="line">Count 100</span><br><span class="line">   250     0.0   0.3</span><br><span class="line">   500     0.0   6.5</span><br><span class="line">  1000     0.1   7.5</span><br><span class="line">  2000     0.4   7.7</span><br><span class="line">Count 1000</span><br><span class="line">   250     0.0   0.2</span><br><span class="line">   500     0.0   7.6</span><br><span class="line">  1000     0.1   7.6</span><br></pre></td></tr></table></figure>
<h3 id="1440"><a class="markdownIt-Anchor" href="#1440"></a> 1.4.40?</h3>
<h3 id="1441"><a class="markdownIt-Anchor" href="#1441"></a> 1.4.41?</h3>
<h3 id="1442"><a class="markdownIt-Anchor" href="#1442"></a> 1.4.42?</h3>
<h3 id="1443"><a class="markdownIt-Anchor" href="#1443"></a> 1.4.43</h3>
<p>动态数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Count 1000</span><br><span class="line">   250 0.000015 Infinity</span><br><span class="line">   500 0.000016   1.1</span><br><span class="line">  1000 0.000016   1.0</span><br><span class="line">  2000 0.000031   1.9</span><br><span class="line">  4000 0.000047   1.5</span><br><span class="line">  8000 0.000125   2.7</span><br><span class="line"> 16000 0.000218   1.7</span><br><span class="line"> 32000 0.000375   1.7</span><br><span class="line"> 64000 0.000700   1.9</span><br><span class="line">128000 0.001297   1.9</span><br><span class="line">256000 0.002234   1.7</span><br><span class="line">512000 0.004688   2.1</span><br><span class="line">1024000 0.009877   2.1</span><br><span class="line">2048000 0.020739   2.1</span><br><span class="line">4096000 0.047932   2.3</span><br></pre></td></tr></table></figure>
<p>链表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Count 1000</span><br><span class="line">   250 0.000016 Infinity</span><br><span class="line">   500 0.000016   1.0</span><br><span class="line">  1000 0.000015   0.9</span><br><span class="line">  2000 0.000016   1.1</span><br><span class="line">  4000 0.000062   3.9</span><br><span class="line">  8000 0.000141   2.3</span><br><span class="line"> 16000 0.000219   1.6</span><br><span class="line"> 32000 0.000469   2.1</span><br><span class="line"> 64000 0.000819   1.7</span><br><span class="line">128000 0.001706   2.1</span><br><span class="line">256000 0.003266   1.9</span><br><span class="line">512000 0.008194   2.5</span><br><span class="line">1024000 0.025846   3.2</span><br><span class="line">2048000 0.085043   3.3</span><br></pre></td></tr></table></figure>
<h3 id="1444"><a class="markdownIt-Anchor" href="#1444"></a> 1.4.44?</h3>
<p>结果差距很大，如何设计实验验证数量级而非具体的数？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1073  3496.5</span><br><span class="line">3087  3496.7</span><br><span class="line">3949  3497.0</span><br><span class="line">2471  3497.2</span><br><span class="line">2612  3497.4</span><br><span class="line">1469  3497.6</span><br><span class="line">4487  3497.9</span><br><span class="line">3307  3498.1</span><br><span class="line">6948  3498.3</span><br><span class="line">1375  3498.5</span><br><span class="line">8069  3498.8</span><br><span class="line">2823  3499.0</span><br><span class="line">2507  3499.2</span><br><span class="line">1246  3499.4</span><br><span class="line">4958  3499.7</span><br><span class="line">3170  3499.9</span><br><span class="line">1079  3500.1</span><br><span class="line">5415  3500.3</span><br><span class="line">5870  3500.6</span><br><span class="line">4749  3500.8</span><br><span class="line">3827  3501.0</span><br><span class="line">2831  3501.2</span><br><span class="line">1471  3501.5</span><br></pre></td></tr></table></figure>
<h3 id="1445"><a class="markdownIt-Anchor" href="#1445"></a> 1.4.45?</h3>
<p>HN是什么？</p>
<h2 id="15-union-find算法"><a class="markdownIt-Anchor" href="#15-union-find算法"></a> 1.5 union-find算法</h2>
<h3 id="151"><a class="markdownIt-Anchor" href="#151"></a> 1.5.1</h3>
<p>0 1 2 3 4 5 6 7 8 9<br />
0 1 2 3 4 5 6 7 8 9<br />
9-0<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 2 3 4 5 6 7 8 0<br />
访问10+1+2次<br />
3-4<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 2 4 4 5 6 7 8 0<br />
访问10+1+2次<br />
5-8<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 2 4 4 8 6 7 8 0<br />
访问10+1+2次<br />
7-2<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 2 4 4 8 6 2 8 0<br />
访问10+1+2次<br />
2-1<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 1 4 4 8 6 1 8 0<br />
访问10+2+2次<br />
5-7<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 1 4 4 1 6 1 1 0<br />
访问10+2+2次<br />
0-3<br />
0 1 2 3 4 5 6 7 8 9<br />
4 1 1 4 4 1 6 1 1 4<br />
访问10+2+2次<br />
4-2<br />
0 1 2 3 4 5 6 7 8 9<br />
1 1 1 1 1 1 6 1 1 1<br />
访问10+4+2次</p>
<h3 id="152"><a class="markdownIt-Anchor" href="#152"></a> 1.5.2</h3>
<p>0 1 2 3 4 5 6 7 8 9<br />
0 1 2 3 4 5 6 7 8 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0,1,2,3,4,5,6,7,8,9;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>union方法调用2次find，每次find访问2倍深度加1次数的数组。如果两个触点不在同一个分量内，还会再访问1次数组。<br />
9-0<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 2 3 4 5 6 7 8 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  1,2,3,4,5,6,7,8;</span><br><span class="line">  9-&gt;0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+1=3</code><br />
3-4<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 2 4 4 5 6 7 8 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  1,2;</span><br><span class="line">  3-&gt;4;</span><br><span class="line">  5,6,7,8;</span><br><span class="line">  9-&gt;0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+1=3</code><br />
5-8<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 2 4 4 8 6 7 8 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  1,2;</span><br><span class="line">  3-&gt;4;</span><br><span class="line">  5-&gt;8;</span><br><span class="line">  6,7;</span><br><span class="line">  9-&gt;0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+1=3</code><br />
7-2<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 2 4 4 8 6 2 8 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  1;</span><br><span class="line">  3-&gt;4;</span><br><span class="line">  5-&gt;8;</span><br><span class="line">  6;</span><br><span class="line">  7-&gt;2;</span><br><span class="line">  9-&gt;0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+1=3</code><br />
2-1<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 1 4 4 8 6 2 8 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  1;</span><br><span class="line">  3-&gt;4;</span><br><span class="line">  5-&gt;8;</span><br><span class="line">  6;</span><br><span class="line">  7-&gt;2;</span><br><span class="line">  9-&gt;0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+1=3</code><br />
5-7<br />
0 1 2 3 4 5 6 7 8 9<br />
0 1 1 4 4 8 6 2 1 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  3-&gt;4;</span><br><span class="line">  5-&gt;8-&gt;1;</span><br><span class="line">  6;</span><br><span class="line">  7-&gt;2-&gt;1;</span><br><span class="line">  9-&gt;0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*1+1)+(2*2+1)+1=9</code><br />
0-3<br />
0 1 2 3 4 5 6 7 8 9<br />
4 1 1 4 4 8 6 2 1 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  3-&gt;4;</span><br><span class="line">  5-&gt;8-&gt;1;</span><br><span class="line">  6;</span><br><span class="line">  7-&gt;2-&gt;1;</span><br><span class="line">  9-&gt;0-&gt;4;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*1+1)+1=5</code><br />
4-2<br />
0 1 2 3 4 5 6 7 8 9<br />
4 1 1 4 1 8 6 2 1 0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  3-&gt;4;</span><br><span class="line">  5-&gt;8-&gt;1;</span><br><span class="line">  6;</span><br><span class="line">  7-&gt;2-&gt;1;</span><br><span class="line">  9-&gt;0-&gt;4-&gt;1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*1+1)+1=5</code></p>
<h3 id="153"><a class="markdownIt-Anchor" href="#153"></a> 1.5.3</h3>
<p>0 1 2 3 4 5 6 7 8 9<br />
0 1 2 3 4 5 6 7 8 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0,1,2,3,4,5,6,7,8,9;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>union方法调用2次find，每次find访问2倍深度加1次数的数组。如果两个触点不在同一个分量内，还会再访问5次数组。<br />
9-0<br />
0 1 2 3 4 5 6 7 8 9<br />
9 1 2 3 4 5 6 7 8 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0-&gt;9;</span><br><span class="line">  1,2,3,4,5,6,7,8;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
3-4<br />
0 1 2 3 4 5 6 7 8 9<br />
9 1 2 3 3 5 6 7 8 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0-&gt;9;</span><br><span class="line">  1,2;</span><br><span class="line">  4-&gt;3;</span><br><span class="line">  5,6,7,8;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
5-8<br />
0 1 2 3 4 5 6 7 8 9<br />
9 1 2 3 3 5 6 7 5 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0-&gt;9;</span><br><span class="line">  1,2;</span><br><span class="line">  4-&gt;3;</span><br><span class="line">  6,7;</span><br><span class="line">  8-&gt;5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
7-2<br />
0 1 2 3 4 5 6 7 8 9<br />
9 1 7 3 3 5 6 7 5 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0-&gt;9;</span><br><span class="line">  1;</span><br><span class="line">  2-&gt;7;</span><br><span class="line">  4-&gt;3;</span><br><span class="line">  6,7;</span><br><span class="line">  8-&gt;5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
2-1<br />
0 1 2 3 4 5 6 7 8 9<br />
9 7 7 3 3 5 6 7 5 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0-&gt;9;</span><br><span class="line">  1-&gt;7;</span><br><span class="line">  2-&gt;7;</span><br><span class="line">  4-&gt;3;</span><br><span class="line">  6,7;</span><br><span class="line">  8-&gt;5;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*1+1)+5=9</code><br />
5-7<br />
0 1 2 3 4 5 6 7 8 9<br />
9 7 7 3 3 7 6 7 5 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0-&gt;9;</span><br><span class="line">  1-&gt;7;</span><br><span class="line">  2-&gt;7;</span><br><span class="line">  4-&gt;3;</span><br><span class="line">  6,7;</span><br><span class="line">  8-&gt;5;</span><br><span class="line">  5-&gt;7;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
0-3<br />
0 1 2 3 4 5 6 7 8 9<br />
9 7 7 9 3 7 6 7 5 9</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0-&gt;9;</span><br><span class="line">  1-&gt;7;</span><br><span class="line">  2-&gt;7;</span><br><span class="line">  4-&gt;3;</span><br><span class="line">  6,7;</span><br><span class="line">  8-&gt;5;</span><br><span class="line">  5-&gt;7;</span><br><span class="line">  3-&gt;9;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*1+1)+(2*0+1)+5=9</code><br />
4-2<br />
0 1 2 3 4 5 6 7 8 9<br />
9 7 7 9 3 7 6 7 5 7</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">digraph G &#123;</span><br><span class="line">  rankdir&#x3D;BT;</span><br><span class="line">  node[shape&#x3D;circle];</span><br><span class="line">  0-&gt;9;</span><br><span class="line">  1-&gt;7;</span><br><span class="line">  2-&gt;7;</span><br><span class="line">  4-&gt;3;</span><br><span class="line">  6,7;</span><br><span class="line">  8-&gt;5;</span><br><span class="line">  5-&gt;7;</span><br><span class="line">  3-&gt;9;</span><br><span class="line">  9-&gt;7;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问数组次数<code>(2*2+1)+(2*1+1)+5=13</code></p>
<h3 id="154"><a class="markdownIt-Anchor" href="#154"></a> 1.5.4</h3>
<p>对照输入<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 1 2 3 4 5 6 7 8 9<br />
sz  1 1 1 1 1 1 1 1 1 1<br />
4-3<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 1 2 4 4 5 6 7 8 9<br />
sz  1 1 1 1 2 1 1 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
3-8<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 1 2 4 4 5 6 7 4 9<br />
sz  1 1 1 1 3 1 1 1 1 1<br />
访问数组次数<code>(2*1+1)+(2*0+1)+5=9</code><br />
6-5<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 1 2 4 4 6 6 7 4 9<br />
sz  1 1 1 1 3 1 2 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
9-4<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 1 2 4 4 6 6 7 4 4<br />
sz  1 1 1 1 4 1 2 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
2-1<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 2 2 4 4 6 6 7 4 4<br />
sz  1 1 2 1 4 1 2 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
8-9<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 2 2 4 4 6 6 7 4 4<br />
sz  1 1 2 1 4 1 2 1 1 1<br />
访问数组次数<code>(2*1+1)+(2*1+1)=6</code><br />
5-0<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  6 2 2 4 4 6 6 7 4 4<br />
sz  1 1 2 1 4 1 3 1 1 1<br />
访问数组次数<code>(2*1+1)+(2*0+1)+5=9</code><br />
7-2<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  6 2 2 4 4 6 6 2 4 4<br />
sz  1 1 3 1 4 1 3 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
6-1<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  6 2 6 4 4 6 6 2 4 4<br />
sz  1 1 3 1 4 1 6 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*1+1)+5=9</code><br />
1-0<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  6 2 6 4 4 6 6 2 4 4<br />
sz  1 1 3 1 4 1 6 1 1 1<br />
访问数组次数<code>(2*2+1)+(2*1+1)=8</code><br />
6-7<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  6 2 6 4 4 6 6 2 4 4<br />
sz  1 1 3 1 4 1 6 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*2+1)=6</code></p>
<p>最坏情况下的输入（8和9没有用）<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 1 2 3 4 5 6 7 8 9<br />
sz  1 1 1 1 1 1 1 1 1 1<br />
0-1<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 0 2 3 4 5 6 7 8 9<br />
sz  2 1 1 1 1 1 1 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
2-3<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 0 2 2 4 5 6 7 8 9<br />
sz  2 1 2 1 1 1 1 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
4-5<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 0 2 2 4 4 6 7 8 9<br />
sz  2 1 2 1 2 1 1 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
6-7<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 0 2 2 4 4 6 6 8 9<br />
sz  2 1 2 1 2 1 2 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
0-2<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 0 0 2 4 4 6 6 8 9<br />
sz  4 1 2 1 2 1 2 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
4-6<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 0 0 2 4 4 4 6 8 9<br />
sz  4 1 2 1 4 1 2 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
0-4<br />
i    0 1 2 3 4 5 6 7 8 9<br />
id  0 0 0 2 0 4 4 6 8 9<br />
sz  8 1 2 1 4 1 2 1 1 1<br />
访问数组次数<code>(2*0+1)+(2*0+1)+5=7</code><br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20201218115018270_2062.png" alt="" width="621" /></p>
<h3 id="155"><a class="markdownIt-Anchor" href="#155"></a> 1.5.5</h3>
<p>quick-find算法的union操作最少需要执行N（触点个数）次迭代，每次迭代需要10条指令，所以每次union操作需要10N条指令。<br />
每次union操作，如果整数对不在同一个分量内，则会添加一个链接。添加到M个链接会执行M次需要迭代的union（在同一个分量既不会添加连接也不会迭代）。总共需要执行<code>10MN</code>条指令。<br />
由于每秒执行<code>10^9</code>次指令，于是需要<code>(10*10^9*10^6)/10^9/86400=115.74</code>天</p>
<h3 id="156"><a class="markdownIt-Anchor" href="#156"></a> 1.5.6</h3>
<p>加权quick-union算法的union操作的迭代都在两次find操作中，每次find迭代次数等于节点的深度，节点深度的最大值为<code>logN</code>，每次迭代需要10条指令，所以每次union操作需要<code>20logN</code>条指令。<br />
每次union操作，如果整数对不在同一个分量内，则会添加一个链接。添加到M个链接会执行M次需要迭代的union（在同一个分量既不会添加连接也不会迭代）。总共需要执行<code>20MlogN</code>条指令。<br />
由于每秒执行<code>10^9</code>次指令，于是需要<code>(20*10^6*log10^9)/10^9=0.6</code>秒</p>
<h3 id="157"><a class="markdownIt-Anchor" href="#157"></a> 1.5.7</h3>
<p>quick-find</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id[p];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pId = find(p);</span><br><span class="line">    <span class="keyword">int</span> qId = find(q);</span><br><span class="line">    <span class="keyword">if</span> (pId == qId) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; id.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[i] == pId) id[i] = qId;</span><br><span class="line">    &#125;</span><br><span class="line">    count--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>quick-union</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(p != id[p])&#123;</span><br><span class="line">        p = id[p];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pRoot = find(p);</span><br><span class="line">    <span class="keyword">int</span> qRoot = find(q);</span><br><span class="line">    <span class="keyword">if</span>(pRoot == qRoot) <span class="keyword">return</span>;</span><br><span class="line">    id[pRoot] = qRoot;</span><br><span class="line">    count--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="158"><a class="markdownIt-Anchor" href="#158"></a> 1.5.8</h3>
<p>问题在于当i等于p之后，<code>id[p]</code>的值被修改为了<code>id[q]</code>，此后的所有i都是对<code>id[q]</code>进行判断，造成剩下<code>id[i] == pId</code>的没有被修改为<code>id[q]</code></p>
<h3 id="159"><a class="markdownIt-Anchor" href="#159"></a> 1.5.9</h3>
<p><img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20201218153909977_5280.png" alt="" /><br />
在加权quick-union算法中，大小为k的树中节点的最大深度不可能超过logk，这里的树大小为10，其最大深度不可能超过log10即3.3，但节点8的深度是4，所以不可能是加权quick-union算法得到的结果。</p>
<h3 id="1510"><a class="markdownIt-Anchor" href="#1510"></a> 1.5.10</h3>
<p>将p的根结点挂在q而非q的根节点上，这样算法仍然是正确的，因为p中的所有结点仍然能向上找到根节点，但树的高度变大了，因此无法保证性能。</p>
<h3 id="1511"><a class="markdownIt-Anchor" href="#1511"></a> 1.5.11</h3>
<p>仍然需要遍历整个<code>id</code>数组，而且<code>if</code>判断条件还增加了，性能甚至更差。</p>
<h3 id="1512"><a class="markdownIt-Anchor" href="#1512"></a> 1.5.12</h3>
<h3 id="1513"><a class="markdownIt-Anchor" href="#1513"></a> 1.5.13</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cur = p;</span><br><span class="line">    <span class="keyword">while</span>(p != id[p]) p = id[p];</span><br><span class="line">    <span class="keyword">while</span>(cur != p) &#123;</span><br><span class="line">        <span class="keyword">int</span> next = id[cur];</span><br><span class="line">        id[cur] = p;</span><br><span class="line">        cur = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果每次选择的都是树的根节点，那么就不会将路径压缩。<br />
输入0-1,2-3,0-2,4-5,6-7,4-6,0-4,<br />
8-9,10-11,8-10,12-13,14-15,12-14,8-12<br />
0-8<br />
得到<br />
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14 ,15]<br />
[0, 0, 0, 2, 0, 4, 4, 6, 0, 8,   8, 10,   8, 12, 12, 14]<br />
[16, 1, 2, 1, 4, 1, 2, 1, 8, 1, 2, 1, 4, 1, 2, 1]<br />
生成长度为4的路径。</p>
<h3 id="1514"><a class="markdownIt-Anchor" href="#1514"></a> 1.5.14</h3>
<p>森林中大小为k的树的高度最多为logK（这里log是log2）。在原始情况下，当k等于1时树的高度为0，满足小于等于<code>log1=0</code>。当要归并的两棵树大小为i和j时（不妨设<code>i&lt;=j</code>），由归纳假设，大小为i树高度小于等于lgi，大小为j的树高度小于等于lgj。在归并后，高度较大的树中的节点深度没有变化；而高度较小的树中的结点由于为根节点添加了一个链接，深度加1（如果两棵树大小相等，则将其中任意一个树作为小树），即新树的高度小于等于<code>1+logi=log2+logi=log(2*i)=log(i+i)</code>，而由于<code>log</code>是增函数，同时<code>i&lt;=j</code>，所以<code>log(i+i)&lt;=log(i+j)</code>，因此归并后大小为<code>i+j</code>的树的高度不超过<code>log(i+j)</code>。</p>
<h3 id="1515"><a class="markdownIt-Anchor" href="#1515"></a> 1.5.15?</h3>
<p>最坏情况下，每次归并的树高度相等，归并后高度加1。<br />
最初，两个树的高度为0，结点有1个。<br />
设<code>Ts</code>表示大小较小的树，<code>Tl</code>表示大小较大的树<br />
union方法将<code>Ts</code>的根节点指向<code>Tl</code>的根节点，因此在归并后的新树中，<code>Ts</code>中的结点的深度加1，而<code>Tl</code>中的结点深度不变。<br />
新树中深度为0的结点仍然只有1个，它是<code>Tl</code>的根节点，<br />
深度为1的结点个数是<code>Ts</code>中深度为1的结点个数，加上<code>Tl</code>中深度为0的结点个数。<br />
深度为2的结点个数是<code>Ts</code>中深度为2的结点个数，加上<code>Tl</code>中深度为1的结点个数。<br />
高度相等的树可以通过两个形状完全相同的树得到，这两个树每层结点个数都相等。<br />
如果把这样构造出的每个高度的树的节点个数，写成一个数组，以高度作为一维索引，深度作为二维索引，则高度为h的树中深度为k的结点的个数N[h][k]是N[h-1][k]+N[h-1][k-1]，这正是帕斯卡三角形的定义，帕斯卡三角形中每一项都表示一个二项式系数。<br />
<code>N=2^n</code>个结点的树最大深度为<code>logN=n</code>，平均深度是什么？</p>
<h3 id="1516"><a class="markdownIt-Anchor" href="#1516"></a> 1.5.16</h3>
<p>quick-find算法<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20201218204836020_26039.png" alt="" /><br />
quick-union算法<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20201218205203144_3197.png" alt="" /></p>
<h3 id="1517"><a class="markdownIt-Anchor" href="#1517"></a> 1.5.17</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    WeightedQuickUnionUF uf = <span class="keyword">new</span> WeightedQuickUnionUF(N);</span><br><span class="line">    <span class="keyword">int</span> total_link = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(uf.count() != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> p = StdRandom.uniform(N);</span><br><span class="line">        <span class="keyword">int</span> q = StdRandom.uniform(N);</span><br><span class="line">        total_link++;</span><br><span class="line">        <span class="keyword">if</span>(!uf.connected(p, q))&#123;</span><br><span class="line">            uf.union(p,q);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total_link;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1518"><a class="markdownIt-Anchor" href="#1518"></a> 1.5.18</h3>
<p>网格，只能沿着上下左右走。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomGrid</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Connection</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> p;</span><br><span class="line">        <span class="keyword">int</span> q;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Connection</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.p = p;</span><br><span class="line">            <span class="keyword">this</span>.q = q;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    RandomBag&lt;Connection&gt; bag;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RandomGrid</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">        bag = <span class="keyword">new</span> RandomBag&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++)&#123;</span><br><span class="line">                <span class="comment">// now: i*N+j</span></span><br><span class="line"><span class="comment">//                (0,3) (1,3) (2,3) (3,3)</span></span><br><span class="line"><span class="comment">//                (0,2) (1,2) (2,2) (3,2)</span></span><br><span class="line"><span class="comment">//                (0,1) (1,1) (2,1) (3,1)</span></span><br><span class="line"><span class="comment">//                (0,0) (1,0) (2,0) (3,0)</span></span><br><span class="line">                <span class="comment">// 6 7 8</span></span><br><span class="line">                <span class="comment">// 3 4 5</span></span><br><span class="line">                <span class="comment">// 0 1 2</span></span><br><span class="line">                <span class="keyword">int</span> now = i + j * N;</span><br><span class="line">                <span class="keyword">int</span> up = i + (j+<span class="number">1</span>) * N;</span><br><span class="line">                <span class="keyword">int</span> down = i + (j-<span class="number">1</span>) * N;</span><br><span class="line">                <span class="keyword">int</span> left = (i-<span class="number">1</span>) + j * N;</span><br><span class="line">                <span class="keyword">int</span> right = (i+<span class="number">1</span>) + j * N;</span><br><span class="line">                <span class="keyword">if</span>(i &gt; <span class="number">0</span>) bag.add(<span class="keyword">new</span> Connection(now, left));</span><br><span class="line">                <span class="keyword">if</span>(i &lt; N-<span class="number">1</span>) bag.add(<span class="keyword">new</span> Connection(now, right));</span><br><span class="line">                <span class="keyword">if</span>(j &gt; <span class="number">0</span>) bag.add(<span class="keyword">new</span> Connection(now, down));</span><br><span class="line">                <span class="keyword">if</span>(j &lt; N-<span class="number">1</span>) bag.add(<span class="keyword">new</span> Connection(now, up));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection[] generate(<span class="keyword">int</span> N) &#123;</span><br><span class="line">        Connection[] conn = <span class="keyword">new</span> Connection[<span class="number">4</span>*N*N-<span class="number">4</span>*N];</span><br><span class="line">        RandomGrid rg = <span class="keyword">new</span> RandomGrid(N);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(Connection c: rg.bag) &#123;</span><br><span class="line">            conn[i] = c;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1519"><a class="markdownIt-Anchor" href="#1519"></a> 1.5.19</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    Connection[] conn = generate(N);</span><br><span class="line">    StdDraw.setXscale(-<span class="number">5</span>, N+<span class="number">5</span>);</span><br><span class="line">    StdDraw.setYscale(-<span class="number">5</span>, N+<span class="number">5</span>);</span><br><span class="line">    StdDraw.setPenRadius(<span class="number">0.016</span>);</span><br><span class="line">    StdDraw.setPenColor(StdDraw.DARK_GRAY);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++)&#123;</span><br><span class="line">            StdDraw.point(i, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    StdDraw.setPenRadius(<span class="number">0.008</span>);</span><br><span class="line">    WeightedQuickUnionUF uf = <span class="keyword">new</span> WeightedQuickUnionUF(N*N);</span><br><span class="line">    <span class="keyword">for</span>(Connection c: conn) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!uf.connected(c.p, c.q))&#123;</span><br><span class="line">            uf.union(c.p, c.q);</span><br><span class="line">            StdDraw.line(c.p%N, c.p/N, c.q%N, c.q/N);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1520"><a class="markdownIt-Anchor" href="#1520"></a> 1.5.20</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicWeightedQuickUnionUF</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id[];</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> sz[];</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> union_times;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DynamicWeightedQuickUnionUF</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        N = <span class="number">2</span>;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) id[i] = i;</span><br><span class="line">        sz = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) sz[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(p != id[p]) p = id[p];</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(p &gt;= N || q &gt;= N) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> find(p) == find(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N - union_times;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> newN)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tempid[] = <span class="keyword">new</span> <span class="keyword">int</span>[newN];</span><br><span class="line">        <span class="keyword">int</span> tempsz[] = <span class="keyword">new</span> <span class="keyword">int</span>[newN];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            tempid[i] = id[i];</span><br><span class="line">            tempsz[i] = sz[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = N; i &lt; newN; i++)&#123;</span><br><span class="line">            tempid[i] = i;</span><br><span class="line">            tempsz[i] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        id = tempid;</span><br><span class="line">        sz = tempsz;</span><br><span class="line">        N = newN;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(p &gt;= N || q &gt;= N)</span><br><span class="line">            resize(Math.max(p, q)+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> pRoot = find(p);</span><br><span class="line">        <span class="keyword">int</span> qRoot = find(q);</span><br><span class="line">        <span class="keyword">if</span>(pRoot == qRoot) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(sz[pRoot] &lt; sz[qRoot])&#123;</span><br><span class="line">            id[pRoot] = qRoot;</span><br><span class="line">            sz[qRoot] += sz[pRoot];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            id[qRoot] = pRoot;</span><br><span class="line">            sz[pRoot] += sz[qRoot];</span><br><span class="line">        &#125;</span><br><span class="line">        union_times++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1521"><a class="markdownIt-Anchor" href="#1521"></a> 1.5.21</h3>
<p><img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20201220170147342_3280.png" alt="" /></p>
<h3 id="1522"><a class="markdownIt-Anchor" href="#1522"></a> 1.5.22</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">timeUnion</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    QuickFindUF uf = <span class="keyword">new</span> QuickFindUF(N);</span><br><span class="line">    <span class="keyword">double</span> total_time = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">while</span>(uf.count() != <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> p = StdRandom.uniform(N);</span><br><span class="line">        <span class="keyword">int</span> q = StdRandom.uniform(N);</span><br><span class="line">        Stopwatch timer = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">        <span class="keyword">if</span>(!uf.connected(p, q))&#123;</span><br><span class="line">            uf.union(p,q);</span><br><span class="line">        &#125;</span><br><span class="line">        total_time += timer.elapsedTime();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total_time;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 参见 DoublingTest（请见 1.4.2.3 节实验程序）</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">100</span>;</span><br><span class="line">    StdOut.printf(<span class="string">&quot;Count %d\n&quot;</span>, count);</span><br><span class="line">    <span class="keyword">double</span> prev = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++)&#123;</span><br><span class="line">        prev += timeUnion(<span class="number">125</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    prev = prev/count;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> N = <span class="number">250</span>; <span class="keyword">true</span>; N += N)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> time = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++)&#123;</span><br><span class="line">            time += timeUnion(N);</span><br><span class="line">        &#125;</span><br><span class="line">        time = time / count;</span><br><span class="line"><span class="comment">//            StdOut.printf(&quot;%6d %7.1f &quot;, N, time);</span></span><br><span class="line">        StdOut.printf(<span class="string">&quot;%6d %7f &quot;</span>, N, time);</span><br><span class="line">        StdOut.printf(<span class="string">&quot;%5.1f\n&quot;</span>, time/prev);</span><br><span class="line">        prev = time;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Count 100</span><br><span class="line">   250 0.000100   1.4</span><br><span class="line">   500 0.000190   1.9</span><br><span class="line">  1000 0.000580   3.1</span><br><span class="line">  2000 0.002330   4.0</span><br><span class="line">  4000 0.008870   3.8</span><br><span class="line">  8000 0.039080   4.4</span><br><span class="line"> 16000 0.165900   4.2</span><br><span class="line"> 32000 0.724430   4.4</span><br></pre></td></tr></table></figure>
<p><code>2^b=4.2</code><br />
因此b约等于2，所以QuickFindUF是平方级别的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Count 100</span><br><span class="line">   250 0.000080   2.7</span><br><span class="line">   500 0.000320   4.0</span><br><span class="line">  1000 0.001290   4.0</span><br><span class="line">  2000 0.006040   4.7</span><br><span class="line">  4000 0.025980   4.3</span><br><span class="line">  8000 0.112810   4.3</span><br></pre></td></tr></table></figure>
<p>QuickUnionUF也是平方级别的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Count 1000</span><br><span class="line">   250 0.000025   1.1</span><br><span class="line">   500 0.000043   1.7</span><br><span class="line">  1000 0.000091   2.1</span><br><span class="line">  2000 0.000182   2.0</span><br><span class="line">  4000 0.000412   2.3</span><br><span class="line">  8000 0.000840   2.0</span><br><span class="line"> 16000 0.001965   2.3</span><br><span class="line"> 32000 0.004740   2.4</span><br></pre></td></tr></table></figure>
<p>WeightedQuickUnionUF是接近线性级别的</p>
<h3 id="1523"><a class="markdownIt-Anchor" href="#1523"></a> 1.5.23</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">timeQuickFind</span><span class="params">(Connection[] conn, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    QuickFindUF uf = <span class="keyword">new</span> QuickFindUF(N);</span><br><span class="line">    <span class="keyword">double</span> total_time = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span>(Connection c: conn) &#123;</span><br><span class="line">        Stopwatch timer = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">        <span class="keyword">if</span>(!uf.connected(c.p, c.q))&#123;</span><br><span class="line">            uf.union(c.p,c.q);</span><br><span class="line">        &#125;</span><br><span class="line">        total_time += timer.elapsedTime();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total_time;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">100</span>;</span><br><span class="line">    StdOut.printf(<span class="string">&quot;Count %d\n&quot;</span>, count);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> N = <span class="number">250</span>; <span class="keyword">true</span>; N += N)</span><br><span class="line">    &#123;</span><br><span class="line">        Connection[] conn = generate(N);</span><br><span class="line">        <span class="keyword">double</span> timeFind = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++)&#123;</span><br><span class="line">            timeFind += timeQuickFind(conn, N);</span><br><span class="line">        &#125;</span><br><span class="line">        timeFind = timeFind / count;</span><br><span class="line">        <span class="keyword">double</span> timeUnion = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++)&#123;</span><br><span class="line">            timeUnion += timeQuickUnion(conn, N);</span><br><span class="line">        &#125;</span><br><span class="line">        timeUnion = timeUnion / count;</span><br><span class="line">        StdOut.printf(<span class="string">&quot;%6d  %7f\n&quot;</span>, N, timeUnion/timeFind);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于相同的链接，QuickFind的时间与QuickUnion的时间之比</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Count 100</span><br><span class="line">   250  0.857143</span><br><span class="line">   500  2.333333</span><br><span class="line">  1000  1.964286</span><br><span class="line">  2000  3.383178</span><br><span class="line">  4000  3.031969</span><br><span class="line">  8000  2.752505</span><br><span class="line"> 16000  7.377303</span><br></pre></td></tr></table></figure>
<h3 id="1524"><a class="markdownIt-Anchor" href="#1524"></a> 1.5.24</h3>
<p>对于相同链接，加权quick-union算法的时间与路径压缩的加权quick-union算法的时间之比，约在1.5-2倍之间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Count 100</span><br><span class="line">   250  1.000000</span><br><span class="line">   500  2.250000</span><br><span class="line">  1000  1.333333</span><br><span class="line">  2000  1.600000</span><br><span class="line">  4000  1.863636</span><br><span class="line">  8000  1.568627</span><br><span class="line"> 16000  2.043956</span><br><span class="line"> 32000  1.492013</span><br><span class="line"> 64000  1.927896</span><br><span class="line">128000  1.566570</span><br><span class="line">256000  1.586662</span><br><span class="line">512000  1.972070</span><br><span class="line">1024000  1.962855</span><br><span class="line">2048000  1.548867</span><br></pre></td></tr></table></figure>
<h3 id="1525"><a class="markdownIt-Anchor" href="#1525"></a> 1.5.25?</h3>
<h3 id="1526"><a class="markdownIt-Anchor" href="#1526"></a> 1.5.26?</h3>
<h1 id="第2章-排序"><a class="markdownIt-Anchor" href="#第2章-排序"></a> 第2章 排序</h1>
<h2 id="21-初级排序算法"><a class="markdownIt-Anchor" href="#21-初级排序算法"></a> 2.1 初级排序算法</h2>
<h3 id="211"><a class="markdownIt-Anchor" href="#211"></a> 2.1.1</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">i   min    0 1 2 3 4 5 6 7 8 9 10 11</span><br><span class="line">0    1     E A S Y Q U E S T I  O  N</span><br><span class="line">1    1     A E S Y Q U E S T I  O  N</span><br><span class="line">2    6     A E S Y Q U E S T I  O  N</span><br><span class="line">3    9     A E E Y Q U S S T I  O  N</span><br><span class="line">4    10    A E E I Q U S S T Y  O  N</span><br><span class="line">5    11    A E E I O U S S T Y  Q  N</span><br><span class="line">6    10    A E E I O N S S T Y  Q  U</span><br><span class="line">7    7     A E E I O N Q S T Y  S  U</span><br><span class="line">8    10    A E E I O N Q S T Y  S  U</span><br><span class="line">9    10    A E E I O N Q S S Y  T  U</span><br><span class="line">10   11    A E E I O N Q S S T  Y  U</span><br><span class="line">11   -     A E E I O N Q S S T  U  Y</span><br></pre></td></tr></table></figure>
<h3 id="212"><a class="markdownIt-Anchor" href="#212"></a> 2.1.2</h3>
<p>最多被交换N次。即每次交换都会交换该元素，例如最大的元素在数组第一个位置，其后是一个已经排序的子数组。每次最大的元素都会被交换。<br />
平均N/2次</p>
<h3 id="213"><a class="markdownIt-Anchor" href="#213"></a> 2.1.3</h3>
<p>有更小的元素的情况最多，即完全逆序：5 4 3 2 1</p>
<h3 id="214"><a class="markdownIt-Anchor" href="#214"></a> 2.1.4</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">i    j    0 1 2 3 4 5 6 7 8 9 10 11</span><br><span class="line">          E A S Y Q U E S T I  O  N</span><br><span class="line">1    1    A E S Y Q U E S T I  O  N</span><br><span class="line">2    2    A E S Y Q U E S T I  O  N</span><br><span class="line">3    3    A E S Y Q U E S T I  O  N</span><br><span class="line">4    2    A E Q S Y U E S T I  O  N</span><br><span class="line">5    4    A E Q S U Y E S T I  O  N</span><br><span class="line">6    2    A E E Q S U Y S T I  O  N</span><br><span class="line">7    5    A E E Q S S U Y T I  O  N</span><br><span class="line">8    6    A E E Q S S T U Y I  O  N</span><br><span class="line">9    3    A E E I Q S S T U Y  O  N</span><br><span class="line">10   4    A E E I O Q S S T U  Y  N</span><br><span class="line">11   4    A E E I N O Q S S T  U  Y</span><br></pre></td></tr></table></figure>
<h3 id="215"><a class="markdownIt-Anchor" href="#215"></a> 2.1.5</h3>
<p>插入排序内循环用来比较位置i左边的已排序数组中的元素，每次都为假说明<code>A[0,i]</code>已经是排序好的子数组。即所以元素顺序：1 2 3 4 5</p>
<h3 id="216"><a class="markdownIt-Anchor" href="#216"></a> 2.1.6</h3>
<p>插入排序。插入排序最好情况下只需要比较N-1次，和0次交换。而选择排序需要比较<code>N(N-1)/2</code>次，还需要交换N次</p>
<h3 id="217"><a class="markdownIt-Anchor" href="#217"></a> 2.1.7</h3>
<p>选择排序更快，因为选择排序需要<code>N(N-1)/2</code>次比较和<code>N</code>次交换，而插入排序最坏情况需要<code>N(N-1)/2</code>次比较和<code>N(N-1)/2</code>次交换</p>
<h3 id="218"><a class="markdownIt-Anchor" href="#218"></a> 2.1.8</h3>
<p>介于两者之间，元素只有三种值说明肯定有大量重复元素，比较和交换的次数比最坏情况要少一些。</p>
<h3 id="219"><a class="markdownIt-Anchor" href="#219"></a> 2.1.9</h3>
<p>21个元素，从序列<code>1/2(3^k-1)</code>中找刚刚大于等于<code>Math.floor(N/3)</code>的数，作为起始间隔，即13。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">        0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20</span><br><span class="line">        E A S Y S H E L L S  O  R  T  Q  U  E  S  T  I  O  N - 84个逆序对</span><br><span class="line">13-sort E A S Y S H E L L S  O  R  T  Q  U  E  S  T  I  O  N</span><br><span class="line">i&#x3D;14    E A S Y S H E L L S  O  R  T  Q  U  E  S  T  I  O  N</span><br><span class="line">i&#x3D;15    E A E Y S H E L L S  O  R  T  Q  U  S  S  T  I  O  N</span><br><span class="line">i&#x3D;16    E A E S S H E L L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;17    E A E S S H E L L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;18    E A E S S H E L L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;19    E A E S S H E L L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;20    E A E S S H E L L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">4-sort  E A E S S H E L L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;5     E A E S S H E L L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;6     E A E S S H E L L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;7     E A E L S H E S L S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;8     E A E L L H E S S S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;9     E A E L L H E S S S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;10    E A E L L H E S S S  O  R  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;11    E A E L L H E R S S  O  S  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;12    E A E L L H E R S S  O  S  T  Q  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;13    E A E L L H E R S Q  O  S  T  S  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;14    E A E L L H E R S Q  O  S  T  S  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;15    E A E L L H E R S Q  O  S  T  S  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;16    E A E L L H E R S Q  O  S  T  S  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;17    E A E L L H E R S Q  O  S  T  S  U  S  Y  T  I  O  N</span><br><span class="line">i&#x3D;18    E A E L L H E R S Q  I  S  T  S  O  S  Y  T  U  O  N</span><br><span class="line">i&#x3D;19    E A E L L H E O S Q  I  R  T  S  O  S  Y  T  U  S  N</span><br><span class="line">i&#x3D;20    E A E L L H E O N Q  I  R  S  S  O  S  T  T  U  S  Y - 19个逆序对</span><br><span class="line">1-sort  A E E L L H E O N Q  I  R  S  S  O  S  T  T  U  S  Y</span><br><span class="line">i&#x3D;2     A E E L L H E O N Q  I  R  S  S  O  S  T  T  U  S  Y</span><br><span class="line">        0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20</span><br></pre></td></tr></table></figure>
<h3 id="2110"><a class="markdownIt-Anchor" href="#2110"></a> 2.1.10</h3>
<p>选择排序的平均情况比插入排序慢。</p>
<h3 id="2111"><a class="markdownIt-Anchor" href="#2111"></a> 2.1.11</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sortQuickSequence</span><span class="params">(Comparable[] a, <span class="keyword">int</span>[] sequence)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 请见算法2.1、算法2.2、算法2.3、算法2.4、算法2.5或算法2.7*/</span></span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> hIndex = sequence.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(sequence[hIndex] &gt;= N) hIndex--;</span><br><span class="line">    <span class="keyword">while</span> (hIndex &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> h = sequence[hIndex];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = h; i &lt; N; i++) &#123;</span><br><span class="line">            Comparable key = a[i];</span><br><span class="line">            <span class="keyword">int</span> j;</span><br><span class="line">            <span class="keyword">for</span> (j = i - h; j &gt;= <span class="number">0</span> &amp;&amp; less(key, a[j]); j -= h) &#123;</span><br><span class="line">                a[j + h] = a[j];</span><br><span class="line">            &#125;</span><br><span class="line">            a[j + h] = key;</span><br><span class="line">        &#125;</span><br><span class="line">        hIndex--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2112"><a class="markdownIt-Anchor" href="#2112"></a> 2.1.12</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> h = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(h &lt; N/<span class="number">3</span>) h = h * <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(h &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">        StdOut.printf(<span class="string">&quot;%d-sorting: &quot;</span>, h);</span><br><span class="line">        Counter c = <span class="keyword">new</span> Counter(<span class="string">&quot;counter&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = h; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> j;</span><br><span class="line">            <span class="keyword">for</span>(j = i; j &gt;= h &amp;&amp; less(a[j], a[j-h]); j -= h) &#123;</span><br><span class="line">                c.increment();</span><br><span class="line">                exch(a, j, j-h);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(j &gt;= h) c.increment();</span><br><span class="line">        &#125;</span><br><span class="line">        StdOut.printf(<span class="string">&quot;%10d    %10f\n&quot;</span>,c.tally(), (<span class="keyword">double</span>)c.tally()/N);</span><br><span class="line">        h /= <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">N &#x3D; 100</span><br><span class="line">40-sorting:         68      0.680000</span><br><span class="line">13-sorting:        167      1.670000</span><br><span class="line">4-sorting:        233      2.330000</span><br><span class="line">1-sorting:        316      3.160000</span><br><span class="line">N &#x3D; 1000</span><br><span class="line">364-sorting:        819      0.819000</span><br><span class="line">121-sorting:       1624      1.624000</span><br><span class="line">40-sorting:       2399      2.399000</span><br><span class="line">13-sorting:       2952      2.952000</span><br><span class="line">4-sorting:       3780      3.780000</span><br><span class="line">1-sorting:       2865      2.865000</span><br><span class="line">N &#x3D; 10000</span><br><span class="line">9841-sorting:        159      0.015900</span><br><span class="line">3280-sorting:       8983      0.898300</span><br><span class="line">1093-sorting:      17236      1.723600</span><br><span class="line">364-sorting:      23623      2.362300</span><br><span class="line">121-sorting:      29846      2.984600</span><br><span class="line">40-sorting:      38619      3.861900</span><br><span class="line">13-sorting:      45072      4.507200</span><br><span class="line">4-sorting:      41763      4.176300</span><br><span class="line">1-sorting:      27560      2.756000</span><br><span class="line">N &#x3D; 100000</span><br><span class="line">88573-sorting:      11427      0.114270</span><br><span class="line">29524-sorting:      97890      0.978900</span><br><span class="line">9841-sorting:     175587      1.755870</span><br><span class="line">3280-sorting:     240775      2.407750</span><br><span class="line">1093-sorting:     299526      2.995260</span><br><span class="line">364-sorting:     380725      3.807250</span><br><span class="line">121-sorting:     472283      4.722830</span><br><span class="line">40-sorting:     754205      7.542050</span><br><span class="line">13-sorting:     830950      8.309500</span><br><span class="line">4-sorting:     475891      4.758910</span><br><span class="line">1-sorting:     275196      2.751960</span><br><span class="line">N &#x3D; 1000000</span><br><span class="line">797161-sorting:     202839      0.202839</span><br><span class="line">265720-sorting:    1050308      1.050308</span><br><span class="line">88573-sorting:    1830234      1.830234</span><br><span class="line">29524-sorting:    2449601      2.449601</span><br><span class="line">9841-sorting:    3079246      3.079246</span><br><span class="line">3280-sorting:    3833519      3.833519</span><br><span class="line">1093-sorting:    5059694      5.059694</span><br><span class="line">364-sorting:    6327540      6.327540</span><br><span class="line">121-sorting:   10172461     10.172461</span><br><span class="line">40-sorting:   14660623     14.660623</span><br><span class="line">13-sorting:   11177206     11.177206</span><br><span class="line">4-sorting:    4643702      4.643702</span><br><span class="line">1-sorting:    2756962      2.756962</span><br><span class="line">N &#x3D; 10000000</span><br><span class="line">7174453-sorting:    2825547      0.282555</span><br><span class="line">2391484-sorting:   11205800      1.120580</span><br><span class="line">797161-sorting:   18979627      1.897963</span><br><span class="line">265720-sorting:   25017295      2.501730</span><br><span class="line">88573-sorting:   31197732      3.119773</span><br><span class="line">29524-sorting:   39335725      3.933573</span><br><span class="line">9841-sorting:   51436757      5.143676</span><br><span class="line">3280-sorting:   69827309      6.982731</span><br><span class="line">1093-sorting:   93888827      9.388883</span><br><span class="line">364-sorting:  136347989     13.634799</span><br><span class="line">121-sorting:  211800731     21.180073</span><br><span class="line">40-sorting:  197782222     19.778222</span><br><span class="line">13-sorting:  118860692     11.886069</span><br><span class="line">4-sorting:   46191678      4.619168</span><br><span class="line">1-sorting:   27564873      2.756487</span><br></pre></td></tr></table></figure>
<p>这个比值的最大值约为<code>N^(1/5)</code></p>
<h3 id="2113"><a class="markdownIt-Anchor" href="#2113"></a> 2.1.13</h3>
<p>插入排序，从第1张牌开始，翻开第1张牌和它左边的牌，如果花色小就交换位置</p>
<h3 id="2114"><a class="markdownIt-Anchor" href="#2114"></a> 2.1.14?</h3>
<p>[1, 4, 7, 5, 2, 3, 6]<br />
[4, 7, 5, 2, 3, 6, 1]<br />
[7, 5, 2, 3, 6, 1, 4] ？<br />
[5, 7, 2, 3, 6, 1, 4]<br />
[7, 2, 3, 6, 1, 4, 5]<br />
[2, 7, 3, 6, 1, 4, 5]<br />
[7, 3, 6 ,1, 4, 5, 2]<br />
[3, 7, 6, 1, 4, 5, 2]<br />
[7, 6, 1, 4, 5, 2, 3]<br />
[6, 7, 1, 4, 5, 2, 3]<br />
[7, 1, 4, 5, 2, 3, 6]<br />
[1, 7, 4, 5, 2, 3, 6]<br />
[7, 4, 5, 2, 3, 6, 1]<br />
[4, 7, 5, 2, 3, 6, 1]<br />
[7, 5, 2, 3, 6, 1, 4] ？<br />
循环了，不对</p>
<h3 id="2115"><a class="markdownIt-Anchor" href="#2115"></a> 2.1.15</h3>
<p>统计一下逆序对的数量，如果逆序对数量多于N个（货箱总数），则用选择排序，否则用插入排序。</p>
<h3 id="2116"><a class="markdownIt-Anchor" href="#2116"></a> 2.1.16</h3>
<p>排序后，数组中的对象还是那些对象，也就是没有创建新的对象。<br />
用一个HashSet保存所有对象，在检查数组有序性时同时检查对象是否在HashSet内。</p>
<h3 id="2117"><a class="markdownIt-Anchor" href="#2117"></a> 2.1.17</h3>
<p>选择排序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Comparable[] a, <span class="keyword">int</span> start, <span class="keyword">int</span> min)</span> </span>&#123;</span><br><span class="line">    StdDraw.clear();</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    StdDraw.setPenColor(StdDraw.GRAY);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt;= start) StdDraw.setPenColor(StdDraw.BLACK);</span><br><span class="line">        <span class="keyword">if</span>(i == min) StdDraw.setPenColor(StdDraw.RED);</span><br><span class="line">        StdDraw.filledRectangle(<span class="number">1.2</span>*i+<span class="number">0.6</span>, (<span class="keyword">double</span>)a[i]/<span class="number">2</span>,<span class="number">0.5</span>, (<span class="keyword">double</span>)a[i]/<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 请见算法2.1、算法2.2、算法2.3、算法2.4、算法2.5或算法2.7*/</span></span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    StdDraw.setXscale(-<span class="number">1</span>, <span class="number">1.2</span> * N);</span><br><span class="line">    StdDraw.setYscale(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> min = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(less(a[j], a[min])) min = j;</span><br><span class="line">        &#125;</span><br><span class="line">        draw(a, i, min);</span><br><span class="line">        exch(a, i, min);</span><br><span class="line">        StdDraw.pause(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>插入排序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Comparable[] a, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">    StdDraw.clear();</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    StdDraw.setPenColor(StdDraw.LIGHT_GRAY);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt; start) StdDraw.setPenColor(StdDraw.BLACK);</span><br><span class="line">        <span class="keyword">if</span>(i &gt; end) StdDraw.setPenColor(StdDraw.LIGHT_GRAY);</span><br><span class="line">        <span class="keyword">if</span>(i == start) StdDraw.setPenColor(StdDraw.RED);</span><br><span class="line">        StdDraw.filledRectangle(<span class="number">1.2</span>*i+<span class="number">0.6</span>, (<span class="keyword">double</span>)a[i]/<span class="number">2</span>,<span class="number">0.5</span>, (<span class="keyword">double</span>)a[i]/<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 请见算法2.1、算法2.2、算法2.3、算法2.4、算法2.5或算法2.7*/</span></span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    StdDraw.setXscale(-<span class="number">1</span>, <span class="number">1.2</span> * N);</span><br><span class="line">    StdDraw.setYscale(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span>(j = i; j &gt; <span class="number">0</span> &amp;&amp; less(a[j], a[j-<span class="number">1</span>]); j--)</span><br><span class="line">            exch(a, j, j-<span class="number">1</span>);</span><br><span class="line">        draw(a, j, i);</span><br><span class="line">        StdDraw.pause(<span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2118"><a class="markdownIt-Anchor" href="#2118"></a> 2.1.18</h3>
<p>选择排序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Comparable[] a, <span class="keyword">int</span> start, <span class="keyword">int</span> min, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    StdDraw.setPenColor(StdDraw.LIGHT_GRAY);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt;= start) StdDraw.setPenColor(StdDraw.BLACK);</span><br><span class="line">        <span class="keyword">if</span>(i == min) StdDraw.setPenColor(StdDraw.RED);</span><br><span class="line">        StdDraw.filledRectangle(<span class="number">1.2</span>*i+<span class="number">0.6</span>, (<span class="keyword">double</span>)a[i]/<span class="number">2</span>+<span class="number">1.5</span>*(a.length - <span class="number">1</span> - index),<span class="number">0.5</span>, (<span class="keyword">double</span>)a[i]/<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 请见算法2.1、算法2.2、算法2.3、算法2.4、算法2.5或算法2.7*/</span></span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    StdDraw.setCanvasSize(<span class="number">512</span>, <span class="number">896</span>);</span><br><span class="line">    StdDraw.setXscale(-<span class="number">1</span>, <span class="number">1.2</span> * N);</span><br><span class="line">    StdDraw.setYscale(<span class="number">0</span>, (N-<span class="number">1</span>)*<span class="number">1.5</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> min = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(less(a[j], a[min])) min = j;</span><br><span class="line">        &#125;</span><br><span class="line">        draw(a, i, min, i);</span><br><span class="line">        exch(a, i, min);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>插入排序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Comparable[] a, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    StdDraw.setPenColor(StdDraw.LIGHT_GRAY);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i &gt; start) StdDraw.setPenColor(StdDraw.BLACK);</span><br><span class="line">        <span class="keyword">if</span>(i &gt; end) StdDraw.setPenColor(StdDraw.LIGHT_GRAY);</span><br><span class="line">        <span class="keyword">if</span>(i == start) StdDraw.setPenColor(StdDraw.RED);</span><br><span class="line">        StdDraw.filledRectangle(<span class="number">1.2</span>*i+<span class="number">0.6</span>, (<span class="keyword">double</span>)a[i]/<span class="number">2</span>+<span class="number">1.5</span>*(a.length - <span class="number">1</span> - index),<span class="number">0.5</span>, (<span class="keyword">double</span>)a[i]/<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 请见算法2.1、算法2.2、算法2.3、算法2.4、算法2.5或算法2.7*/</span></span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    StdDraw.setCanvasSize(<span class="number">512</span>, <span class="number">896</span>);</span><br><span class="line">    StdDraw.setXscale(-<span class="number">1</span>, <span class="number">1.2</span> * N);</span><br><span class="line">    StdDraw.setYscale(<span class="number">0</span>, (N-<span class="number">1</span>)*<span class="number">1.5</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span>(j = i; j &gt; <span class="number">0</span> &amp;&amp; less(a[j], a[j-<span class="number">1</span>]); j--)</span><br><span class="line">            exch(a, j, j-<span class="number">1</span>);</span><br><span class="line">        draw(a, j, i, i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2119"><a class="markdownIt-Anchor" href="#2119"></a> 2.1.19?</h3>
<p>中间值大于左右两边元素，或者小于左右两边元素。每次交换导致逆序对只减少1。<br />
a[40] &lt; a[0]<br />
a[41] &lt; a[1]<br />
a[42] &lt; a[2]<br />
完全逆序？<br />
100 99 98 97 … 1</p>
<h3 id="2120"><a class="markdownIt-Anchor" href="#2120"></a> 2.1.20</h3>
<p>最好情况是完全顺序。</p>
<h3 id="2121"><a class="markdownIt-Anchor" href="#2121"></a> 2.1.21</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Transaction that)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.amount &lt; that.amount) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.amount &gt; that.amount) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2122"><a class="markdownIt-Anchor" href="#2122"></a> 2.1.22</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SortTransaction</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Transaction[] readTransactions()&#123;</span><br><span class="line">        Queue&lt;Transaction&gt; q = <span class="keyword">new</span> Queue&lt;Transaction&gt;();</span><br><span class="line">        <span class="keyword">while</span>(!StdIn.isEmpty())&#123;</span><br><span class="line">            q.enqueue(<span class="keyword">new</span> Transaction(StdIn.readLine()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> N = q.size();</span><br><span class="line">        Transaction[] a = <span class="keyword">new</span> Transaction[N];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">            a[i] = q.dequeue();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Transaction[] a = readTransactions();</span><br><span class="line">        Shell.sort(a);</span><br><span class="line">        <span class="keyword">for</span>(Transaction t : a) &#123;</span><br><span class="line">            StdOut.println(t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2123"><a class="markdownIt-Anchor" href="#2123"></a> 2.1.23</h3>
<h3 id="2124"><a class="markdownIt-Anchor" href="#2124"></a> 2.1.24</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sortSentinel</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> min = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (less(a[i], a[min])) min = i;</span><br><span class="line">    &#125;</span><br><span class="line">    exch(a, <span class="number">0</span>, min);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; less(a[j], a[j - <span class="number">1</span>]); j--)</span><br><span class="line">            exch(a, j, j - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">For 1000 random Doubles</span><br><span class="line"> InsertionSentinel is 1.1 times faster than Insertion</span><br></pre></td></tr></table></figure>
<h3 id="2125"><a class="markdownIt-Anchor" href="#2125"></a> 2.1.25</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sortQuick</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; N; i++) &#123;</span><br><span class="line">        Comparable key = a[i];</span><br><span class="line">        <span class="keyword">int</span> j;</span><br><span class="line">        <span class="keyword">for</span> (j = i - <span class="number">1</span>; j &gt;= <span class="number">0</span> &amp;&amp; less(key, a[j]); j--) &#123;</span><br><span class="line">            a[j + <span class="number">1</span>] = a[j];</span><br><span class="line">        &#125;</span><br><span class="line">        a[j + <span class="number">1</span>] = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">For 1000 random Doubles</span><br><span class="line"> InsertionQuick is 1.6 times faster than Insertion</span><br><span class="line">For 10000 random Doubles</span><br><span class="line"> InsertionQuick is 2.0 times faster than Insertion</span><br></pre></td></tr></table></figure>
<h3 id="2126"><a class="markdownIt-Anchor" href="#2126"></a> 2.1.26</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">For <span class="number">10000</span> random Ints</span><br><span class="line"> Int is <span class="number">2.2</span> times faster than Integer</span><br></pre></td></tr></table></figure>
<h3 id="2127"><a class="markdownIt-Anchor" href="#2127"></a> 2.1.27</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">For 128 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick	ShellQuick</span><br><span class="line"> 0.000240       0.000210       0.000060</span><br><span class="line">For 256 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick	ShellQuick</span><br><span class="line"> 0.000070       0.000100       0.000070</span><br><span class="line">For 512 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick	ShellQuick</span><br><span class="line"> 0.000290       0.000150       0.000110</span><br><span class="line">For 1024 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick	ShellQuick</span><br><span class="line"> 0.000950       0.000510       0.000200</span><br><span class="line">For 2048 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick	ShellQuick</span><br><span class="line"> 0.003270       0.001910       0.000270</span><br><span class="line">For 4096 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick	ShellQuick</span><br><span class="line"> 0.016420       0.009720       0.000910</span><br><span class="line">For 8192 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick	ShellQuick</span><br><span class="line"> 0.069300       0.044300       0.001880</span><br><span class="line">For 16384 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick	ShellQuick</span><br><span class="line"> 0.334500       0.206610       0.003500</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">String alg1 = <span class="string">&quot;SelectionQuick&quot;</span>;</span><br><span class="line">String alg2 = <span class="string">&quot;InsertionQuick&quot;</span>;</span><br><span class="line">String alg3 = <span class="string">&quot;ShellQuick&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> T = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> N = <span class="number">128</span>; <span class="keyword">true</span>; N *= <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">double</span> t1 = <span class="number">0.0</span>, t2 = <span class="number">0.0</span>, t3 = <span class="number">0.0</span>;</span><br><span class="line">    Double[] a = <span class="keyword">new</span> Double[N];</span><br><span class="line">    Double[] b = <span class="keyword">new</span> Double[N];</span><br><span class="line">    Double[] c = <span class="keyword">new</span> Double[N];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">0</span>; t &lt; T; t++) &#123; <span class="comment">// 进行一次测试（生成一个数组并排序)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            a[i] = StdRandom.uniform();</span><br><span class="line">            b[i] = a[i];</span><br><span class="line">            c[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        t1 += time(alg1, a);</span><br><span class="line">        t2 += time(alg2, b);</span><br><span class="line">        t3 += time(alg3, c);</span><br><span class="line">    &#125;</span><br><span class="line">    t1 /= <span class="number">100</span>;</span><br><span class="line">    t2 /= <span class="number">100</span>;</span><br><span class="line">    t3 /= <span class="number">100</span>;</span><br><span class="line">    StdOut.printf(<span class="string">&quot;For %d random Doubles\n %s\t%s\t%s\n %f       %f       %f\n&quot;</span>, N, alg1, alg2, alg3,t1, t2, t3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2128"><a class="markdownIt-Anchor" href="#2128"></a> 2.1.28</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">For 128 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick</span><br><span class="line"> 0.000340       0.000130</span><br><span class="line">For 256 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick</span><br><span class="line"> 0.000120       0.000330</span><br><span class="line">For 512 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick</span><br><span class="line"> 0.000690       0.000110</span><br><span class="line">For 1024 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick</span><br><span class="line"> 0.001980       0.000330</span><br><span class="line">For 2048 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick</span><br><span class="line"> 0.007470       0.001230</span><br><span class="line">For 4096 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick</span><br><span class="line"> 0.041800       0.005580</span><br><span class="line">For 8192 random Doubles</span><br><span class="line"> SelectionQuick	InsertionQuick</span><br><span class="line"> 0.224520       0.023350</span><br></pre></td></tr></table></figure>
<p>要使得数组只有两个主键，且概率相同，需要N/2个主键1和N/2个主键2。生成一个只有1.0和2.0的数组，然后用Fisher-Yates乱序算法打乱。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">String alg1 = <span class="string">&quot;SelectionQuick&quot;</span>;</span><br><span class="line">String alg2 = <span class="string">&quot;InsertionQuick&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> T = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> N = <span class="number">128</span>; <span class="keyword">true</span>; N *= <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">double</span> t1 = <span class="number">0.0</span>, t2 = <span class="number">0.0</span>;</span><br><span class="line">    Double[] a = <span class="keyword">new</span> Double[N];</span><br><span class="line">    Double[] b = <span class="keyword">new</span> Double[N];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">0</span>; t &lt; T; t++) &#123; <span class="comment">// 进行一次测试（生成一个数组并排序)</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N / <span class="number">2</span>; i++) &#123;</span><br><span class="line">            a[i] = <span class="number">1.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = N/<span class="number">2</span>; i &lt; N; i++)&#123;</span><br><span class="line">            a[i] = <span class="number">2.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> r = i + StdRandom.uniform(N-i);</span><br><span class="line">            <span class="keyword">double</span> temp = a[i];</span><br><span class="line">            a[i] = a[r];</span><br><span class="line">            a[r] = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            b[i] = a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        t1 += time(alg1, a);</span><br><span class="line">        t2 += time(alg2, b);</span><br><span class="line">    &#125;</span><br><span class="line">    t1 /= T;</span><br><span class="line">    t2 /= T;</span><br><span class="line">    StdOut.printf(<span class="string">&quot;For %d random Doubles\n %s\t%s\n %f       %f\n&quot;</span>, N, alg1, alg2,t1, t2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2129"><a class="markdownIt-Anchor" href="#2129"></a> 2.1.29</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] seq1 = &#123;<span class="number">1</span>, <span class="number">4</span>, <span class="number">13</span>, <span class="number">40</span>, <span class="number">121</span>, <span class="number">364</span>, <span class="number">1093</span>, <span class="number">3280</span>, <span class="number">9841</span>, <span class="number">29524</span>, <span class="number">88573</span>, <span class="number">265720</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] seq2 = &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">19</span>, <span class="number">41</span>, <span class="number">109</span>, <span class="number">209</span>, <span class="number">505</span>, <span class="number">929</span>, <span class="number">2161</span>, <span class="number">3905</span>, <span class="number">8929</span>, <span class="number">16001</span>, <span class="number">36289</span>, <span class="number">64769</span>, <span class="number">146305</span>, <span class="number">260609</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>可以看出seq2序列的希尔排序耗时是seq1序列的97.5%，略有提高，但差距很小</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">For 128 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.000120       0.000050</span><br><span class="line">For 256 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.000110       0.000130</span><br><span class="line">For 512 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.000240       0.000320</span><br><span class="line">For 1024 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.000270       0.000180</span><br><span class="line">For 2048 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.000550       0.000700</span><br><span class="line">For 4096 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.001070       0.001140</span><br><span class="line">For 8192 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.002140       0.002180</span><br><span class="line">For 16384 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.005190       0.005090</span><br><span class="line">For 32768 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.012020       0.011840</span><br><span class="line">For 65536 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.026180       0.025600</span><br><span class="line">For 131072 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.069300       0.065750</span><br><span class="line">For 262144 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.215180       0.210710</span><br><span class="line">For 524288 random Doubles</span><br><span class="line"> ShellQuickSeq1	ShellQuickSeq2</span><br><span class="line"> 0.558730       0.545190</span><br></pre></td></tr></table></figure>
<p>3k+1序列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Count 1000</span><br><span class="line">     N   PreTime   ActTime     Ratio</span><br><span class="line">  1000  0.000094  0.000127  1.351064</span><br><span class="line">  2000  0.000172  0.000270  2.125984</span><br><span class="line">  4000  0.000574  0.000604  2.237037</span><br><span class="line">  8000  0.001351  0.001394  2.307947</span><br><span class="line"> 16000  0.003217  0.003240  2.324247</span><br><span class="line"> 32000  0.007531  0.007850  2.422840</span><br><span class="line"> 64000  0.019019  0.019336  2.463185</span><br></pre></td></tr></table></figure>
<p>另一个序列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Count 1000</span><br><span class="line">     N   PreTime   ActTime     Ratio</span><br><span class="line">  1000  0.000097  0.000126  1.298969</span><br><span class="line">  2000  0.000164  0.000282  2.238095</span><br><span class="line">  4000  0.000631  0.000630  2.234043</span><br><span class="line">  8000  0.001407  0.001433  2.274603</span><br><span class="line"> 16000  0.003260  0.003323  2.318911</span><br><span class="line"> 32000  0.007706  0.008144  2.450797</span><br><span class="line"> 64000  0.019959  0.019518  2.396611</span><br></pre></td></tr></table></figure>
<h3 id="2130"><a class="markdownIt-Anchor" href="#2130"></a> 2.1.30</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sortQuickGeometric</span><span class="params">(Comparable[] a, <span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 请见算法2.1、算法2.2、算法2.3、算法2.4、算法2.5或算法2.7*/</span></span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    <span class="keyword">int</span> h = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (h &lt; N) h = h * t;</span><br><span class="line">    h /= t;</span><br><span class="line">    <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = h; i &lt; N; i++) &#123;</span><br><span class="line">            Comparable key = a[i];</span><br><span class="line">            <span class="keyword">int</span> j;</span><br><span class="line">            <span class="keyword">for</span> (j = i - h; j &gt;= <span class="number">0</span> &amp;&amp; less(key, a[j]); j -= h) &#123;</span><br><span class="line">                a[j + h] = a[j];</span><br><span class="line">            &#125;</span><br><span class="line">            a[j + h] = key;</span><br><span class="line">        &#125;</span><br><span class="line">        h /= t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> T = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N = <span class="number">1000000</span>;</span><br><span class="line">Double[] a = <span class="keyword">new</span> Double[N];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> t = <span class="number">2</span>; <span class="keyword">true</span>; t++) &#123;</span><br><span class="line">    <span class="keyword">double</span> t1 = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; T; k++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">            a[i] = StdRandom.uniform();</span><br><span class="line">        &#125;</span><br><span class="line">        Stopwatch timer = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">        Shell.sortQuickGeometric(a, t);</span><br><span class="line">        t1 += timer.elapsedTime();</span><br><span class="line">    &#125;</span><br><span class="line">    t1 /= T;</span><br><span class="line">    StdOut.printf(<span class="string">&quot;t=%d    %f\n&quot;</span>, t, t1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>t=2的用时较短</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">t&#x3D;2    5.292900</span><br><span class="line">t&#x3D;3    6.457800</span><br><span class="line">t&#x3D;4    7.732800</span><br><span class="line">t&#x3D;5    6.640800</span><br><span class="line">t&#x3D;6    6.897400</span><br><span class="line">t&#x3D;7    6.925800</span><br></pre></td></tr></table></figure>
<h3 id="2131"><a class="markdownIt-Anchor" href="#2131"></a> 2.1.31</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">timeSort</span><span class="params">(String alg, <span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> total_time = <span class="number">0.0</span>;</span><br><span class="line">    Double[] a = <span class="keyword">new</span> Double[N];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        a[i] = StdRandom.uniform();</span><br><span class="line">    &#125;</span><br><span class="line">    Stopwatch timer = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">    <span class="keyword">if</span>(alg.equals(<span class="string">&quot;Insertion&quot;</span>))&#123;</span><br><span class="line">        timer = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">        Insertion.sortQuick(a);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(alg.equals(<span class="string">&quot;Selection&quot;</span>)) &#123;</span><br><span class="line">        timer = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">        Selection.sortQuick(a);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(alg.equals(<span class="string">&quot;Shell&quot;</span>)) &#123;</span><br><span class="line">        timer = <span class="keyword">new</span> Stopwatch();</span><br><span class="line">        Shell.sortQuick(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> timer.elapsedTime();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">SortDoubleRatio</span><span class="params">(String alg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">100</span>;</span><br><span class="line">    StdOut.printf(<span class="string">&quot;Count %d\n&quot;</span>, count);</span><br><span class="line">    <span class="keyword">double</span> prev = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++)&#123;</span><br><span class="line">        prev += timeSort(alg,<span class="number">500</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    prev /= count;</span><br><span class="line">    <span class="keyword">double</span> prevRatio = <span class="number">1.0</span>;</span><br><span class="line">    StdOut.printf(<span class="string">&quot;%6s  %8s  %8s  %8s\n&quot;</span>, <span class="string">&quot;N&quot;</span>, <span class="string">&quot;PreTime&quot;</span>, <span class="string">&quot;ActTime&quot;</span>, <span class="string">&quot;Ratio&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> N = <span class="number">1000</span>; <span class="keyword">true</span>; N += N) &#123;</span><br><span class="line">        <span class="keyword">double</span> time = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++)&#123;</span><br><span class="line">            time += timeSort(alg, N);</span><br><span class="line">        &#125;</span><br><span class="line">        time = time / count;</span><br><span class="line">        StdOut.printf(<span class="string">&quot;%6d  %f  %f  &quot;</span>, N, prev * prevRatio, time);</span><br><span class="line">        StdOut.printf(<span class="string">&quot;%f\n&quot;</span>, time/prev);</span><br><span class="line">        prevRatio = time/prev;</span><br><span class="line">        prev = time;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>选择排序<br />
<code>Ratio = 2^b</code>可知<code>b</code>约等于2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Count 1000</span><br><span class="line">     N   PreTime   ActTime     Ratio</span><br><span class="line">  1000  0.000046  0.000579  12.586957</span><br><span class="line">  2000  0.007288  0.002461  4.250432</span><br><span class="line">  4000  0.010460  0.008549  3.473791</span><br><span class="line">  8000  0.029697  0.034370  4.020353</span><br><span class="line"> 16000  0.138180  0.187038  5.441897</span><br></pre></td></tr></table></figure>
<p>插入排序<br />
<code>Ratio = 2^b</code>可知<code>b</code>约等于2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Count 1000</span><br><span class="line">     N   PreTime   ActTime     Ratio</span><br><span class="line">  1000  0.000194  0.000302  1.556701</span><br><span class="line">  2000  0.000470  0.001151  3.811258</span><br><span class="line">  4000  0.004387  0.005635  4.895743</span><br><span class="line">  8000  0.027588  0.022738  4.035138</span><br><span class="line"> 16000  0.091751  0.109826  4.830064</span><br></pre></td></tr></table></figure>
<p>希尔排序<br />
<code>Ratio = 2^b</code>可知<code>b</code>约等于1.3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Count 1000</span><br><span class="line">     N   PreTime   ActTime     Ratio</span><br><span class="line">  1000  0.000075  0.000078  1.040000</span><br><span class="line">  2000  0.000081  0.000214  2.743590</span><br><span class="line">  4000  0.000587  0.000496  2.317757</span><br><span class="line">  8000  0.001150  0.001139  2.296371</span><br><span class="line"> 16000  0.002616  0.002442  2.143986</span><br><span class="line"> 32000  0.005236  0.006035  2.471335</span><br><span class="line"> 64000  0.014915  0.014988  2.483513</span><br></pre></td></tr></table></figure>
<h3 id="2132"><a class="markdownIt-Anchor" href="#2132"></a> 2.1.32?</h3>
<h3 id="2133"><a class="markdownIt-Anchor" href="#2133"></a> 2.1.33?</h3>
<h3 id="2134"><a class="markdownIt-Anchor" href="#2134"></a> 2.1.34?</h3>
<h3 id="2135"><a class="markdownIt-Anchor" href="#2135"></a> 2.1.35?</h3>
<h3 id="2136"><a class="markdownIt-Anchor" href="#2136"></a> 2.1.36?</h3>
<h3 id="2137"><a class="markdownIt-Anchor" href="#2137"></a> 2.1.37?</h3>
<h3 id="2138"><a class="markdownIt-Anchor" href="#2138"></a> 2.1.38?</h3>
<h2 id="22-归并排序"><a class="markdownIt-Anchor" href="#22-归并排序"></a> 2.2 归并排序</h2>
<h3 id="221"><a class="markdownIt-Anchor" href="#221"></a> 2.2.1</h3>
<blockquote>
<p>按照本节开头所示轨迹的格式给出原地归并的抽象 merge() 方法是如何将数组 A E Q S U Y E I N O S T 排序的。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">i j  0 1 2 3 4 5 | 6 7 8 9 10 11</span><br><span class="line">0 6  A E Q S U Y | E I N O  S  T</span><br><span class="line">1 6    E Q S U Y | E I N O  S  T</span><br><span class="line">2 6      Q S U Y | E I N O  S  T</span><br><span class="line">2 7      Q S U Y |   I N O  S  T</span><br><span class="line">2 8      Q S U Y |     N O  S  T</span><br><span class="line">2 9      Q S U Y |       O  S  T</span><br><span class="line">3 9        S U Y |       O  S  T</span><br><span class="line">3 10       S U Y |          S  T</span><br><span class="line">4 10         U Y |          S  T</span><br><span class="line">4 11         U Y |             T</span><br><span class="line">4 12         U Y |</span><br><span class="line">5 12           Y |</span><br><span class="line">6 12             |</span><br><span class="line">--------------------------------</span><br><span class="line">k    0 1 2 3 4 5   6 7 8 9 10 11</span><br><span class="line">0    A</span><br><span class="line">1    A E</span><br><span class="line">2    A E E</span><br><span class="line">3    A E E I</span><br><span class="line">4    A E E I N</span><br><span class="line">5    A E E I N Q</span><br><span class="line">6    A E E I N Q   O</span><br><span class="line">7    A E E I N Q   O S</span><br><span class="line">8    A E E I N Q   O S S</span><br><span class="line">9    A E E I N Q   O S S T</span><br><span class="line">10   A E E I N Q   O S S T  U</span><br><span class="line">11   A E E I N Q   O S S T  U  Y</span><br></pre></td></tr></table></figure>
<h3 id="222"><a class="markdownIt-Anchor" href="#222"></a> 2.2.2</h3>
<blockquote>
<p>按照算法 2.4 所示轨迹的格式给出自顶向下的归并排序是如何将数组 E A S Y Q U E S T I O N 排序的。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">             [0,11]</span><br><span class="line">     [0,5]           [6,11]</span><br><span class="line">  [0,2]  [3,5]   [6,8]   [9,11]</span><br><span class="line">[0,1]   [3,4]  [6,7]   [9,10]</span><br></pre></td></tr></table></figure>
<p>后序遍历</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">sort(a, 0, 11)</span><br><span class="line">  sort(a, 0, 5)</span><br><span class="line">    sort(a, 0, 2)</span><br><span class="line">      sort(a, 0, 1)</span><br><span class="line">        merge(a, 0, 0, 1)</span><br><span class="line">      sort(a, 2, 2)</span><br><span class="line">      merge(a, 0, 1, 2)</span><br><span class="line">    sort(a, 3, 5)</span><br><span class="line">      sort(a, 3, 4)</span><br><span class="line">        merge(a, 3, 3, 4)</span><br><span class="line">      sort(a, 5, 5)</span><br><span class="line">    merge(a, 0, 2, 5)</span><br><span class="line">  sort(a, 6, 11)</span><br><span class="line">    sort(a, 6, 8)</span><br><span class="line">      sort(a, 6, 7)</span><br><span class="line">        merge(a, 6, 6, 7)</span><br><span class="line">      sort(a, 8, 8)</span><br><span class="line">      merge(a, 6, 7, 8)</span><br><span class="line">    sort(a, 9, 11)</span><br><span class="line">      sort(a, 9, 10)</span><br><span class="line">        merge(a, 9, 9, 10)</span><br><span class="line">      sort(a, 11, 11)</span><br><span class="line">      merge(a, 9, 10, 11)</span><br><span class="line">    merge(a, 6, 8, 11)</span><br><span class="line">  merge(a, 0, 5, 11)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    0 1 2 3 4 5 6 7 8 9 10 11</span><br><span class="line">                    E A S Y Q U E S T I  O  N</span><br><span class="line">merge(a, 0, 0, 1)   A E S Y Q U E S T I  O  N</span><br><span class="line">merge(a, 0, 1, 2)   A E S Y Q U E S T I  O  N</span><br><span class="line">merge(a, 3, 3, 4)   A E S Q Y U E S T I  O  N</span><br><span class="line">merge(a, 0, 2, 5)   A E Q S U Y E S T I  O  N</span><br><span class="line">merge(a, 6, 6, 7)   A E Q S U Y E S T I  O  N</span><br><span class="line">merge(a, 6, 7, 8)   A E Q S U Y E S T I  O  N</span><br><span class="line">merge(a, 9, 9, 10)  A E Q S U Y E S T I  O  N</span><br><span class="line">merge(a, 9, 10, 11) A E Q S U Y E S T I  N  O</span><br><span class="line">merge(a, 6, 8, 11)  A E Q S U Y E I N O  S  T</span><br><span class="line">merge(a, 0, 5, 11)  A E E I N O Q S S T  U  Y</span><br></pre></td></tr></table></figure>
<h3 id="223"><a class="markdownIt-Anchor" href="#223"></a> 2.2.3</h3>
<blockquote>
<p>用自底向上的归并排序解答练习 2.2.2。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">                      0 1 2 3 4 5 6 7 8 9 10 11</span><br><span class="line">                      E A S Y Q U E S T I  O  N</span><br><span class="line">merge(a, 0,  0,  1)   A E S Y Q U E S T I  O  N</span><br><span class="line">merge(a, 2,  2,  3)   A E S Y Q U E S T I  O  N</span><br><span class="line">merge(a, 4,  4,  5)   A E S Y Q U E S T I  O  N</span><br><span class="line">merge(a, 6,  6,  7)   A E S Y Q U E S T I  O  N</span><br><span class="line">merge(a, 8,  8,  9)   A E S Y Q U E S I T  O  N</span><br><span class="line">merge(a, 10, 10, 11)  A E S Y Q U E S I T  N  O</span><br><span class="line">merge(a, 0,  1,  3)   A E S Y Q U E S I T  N  O</span><br><span class="line">merge(a, 4,  5,  7)   A E S Y E Q S U I T  N  O</span><br><span class="line">merge(a, 8,  9,  11)  A E S Y E Q S U I N  O  T</span><br><span class="line">merge(a, 0,  3,  7)   A E E Q S S U Y I N  O  T</span><br><span class="line">     (8, 11)          第二个数组起始位置12超过最大索引，循环不变式</span><br><span class="line">merge(a, 0,  7,  11)  A E E I N O Q S S T  U  Y</span><br></pre></td></tr></table></figure>
<h3 id="224"><a class="markdownIt-Anchor" href="#224"></a> 2.2.4?</h3>
<blockquote>
<p>是否当且仅当两个输入的子数组都有序时原地归并的抽象方法才能得到正确的结果？证明你的结论，或者给出一个反例。</p>
</blockquote>
<p>假设数组不都有序<br />
4 3 2 1<br />
1 2</p>
<h3 id="225"><a class="markdownIt-Anchor" href="#225"></a> 2.2.5</h3>
<blockquote>
<p>当输入数组的大小 N=39 时，给出自顶向下和自底向上的归并排序中各次归并子数组的大小及顺序。</p>
</blockquote>
<p>自顶向下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">                            [0,38]</span><br><span class="line">                     [0,19]              [20,38]</span><br><span class="line">              [0,9]                   [10,19] [20,29][30,38]</span><br><span class="line">      [0,4]          [5,9]           [10,14]          [15,19]</span><br><span class="line">  [0,2]  [3,4]   [5,7]  [8,9]    [10,12] [13,14]    [15,17] [18,19]</span><br><span class="line">[0,1] x  x   x [5,6] x  x   x [10,11] x  x     x [15,16] x </span><br></pre></td></tr></table></figure>
<p><img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20201228111622200_19227.png" alt="" width="621" /><br />
归并的顺序是后序遍历</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">merge(0, 0, 1)</span><br><span class="line">merge(0, 1, 2)</span><br><span class="line">merge(3, 3, 4)</span><br><span class="line">merge(0, 2, 4)</span><br><span class="line">...</span><br><span class="line">merge(0, 19, 38)</span><br></pre></td></tr></table></figure>
<p>自顶向上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">N &#x3D; 39</span><br><span class="line">[lo, lo+sz-1] [lo+sz, lo+sz+sz-1]</span><br><span class="line">sz&#x3D;1</span><br><span class="line">merge(0, 0, 1)</span><br><span class="line">merge(2, 2, 3)</span><br><span class="line">merge(4, 4, 5)</span><br><span class="line">...</span><br><span class="line">merge(36, 36, 37)</span><br><span class="line">sz&#x3D;2</span><br><span class="line">merge(0, 1, 3)</span><br><span class="line">merge(4, 5, 7)</span><br><span class="line">merge(8, 9, 11)</span><br><span class="line">...</span><br><span class="line">merge(32, 33, 35)</span><br><span class="line">merge(36, 37, 38)</span><br><span class="line">sz&#x3D;4</span><br><span class="line">merge(0, 3, 7)</span><br><span class="line">merge(8, 11, 15)</span><br><span class="line">...</span><br><span class="line">merge(32, 35, 38)</span><br><span class="line">sz&#x3D;8</span><br><span class="line">merge(0, 7, 15)</span><br><span class="line">merge(16, 23, 31)</span><br><span class="line">sz&#x3D;16</span><br><span class="line">merge(0, 15, 31)</span><br><span class="line">sz&#x3D;32</span><br><span class="line">merge(0, 31, 38)</span><br></pre></td></tr></table></figure>
<h3 id="226"><a class="markdownIt-Anchor" href="#226"></a> 2.2.6</h3>
<blockquote>
<p>编写一个程序来计算自顶向下和自底向上的归并排序访问数组的准确次数。使用这个程序将 N=1 至 512 的结果绘成曲线图，并将其和上限 6NlgN 比较。</p>
</blockquote>
<p>红色是<code>6NlogN</code><br />
橘色是自顶向下<br />
蓝色是自底向上<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20201229110824861_16595.png" alt="" /></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">StdDraw.setXscale(<span class="number">0</span>, <span class="number">600</span>);</span><br><span class="line">StdDraw.setYscale(<span class="number">0</span>, <span class="number">30000</span>);</span><br><span class="line">StdDraw.setPenRadius(<span class="number">0.01</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> N = <span class="number">1</span>; N &lt;= <span class="number">512</span>; N++) &#123;</span><br><span class="line">    Integer[] a = genArray(N);</span><br><span class="line">    Integer[] b = copyArray(a);</span><br><span class="line">    <span class="keyword">int</span> UBCount = Merge.sort(a);</span><br><span class="line">    StdDraw.setPenColor(StdDraw.ORANGE);</span><br><span class="line">    StdDraw.point(N, UBCount);</span><br><span class="line">    <span class="keyword">int</span> BUCount = MergeBU.sort(b);</span><br><span class="line">    StdDraw.setPenColor(StdDraw.CYAN);</span><br><span class="line">    StdDraw.point(N, BUCount);</span><br><span class="line">    <span class="keyword">int</span> MAXCount = (<span class="keyword">int</span>)(<span class="number">6</span>*N*(Math.log(N)/Math.log(<span class="number">2</span>)));</span><br><span class="line">    StdDraw.setPenColor(StdDraw.RED);</span><br><span class="line">    StdDraw.point(N, MAXCount);</span><br><span class="line">    StdOut.printf(<span class="string">&quot;%d %d %d %d\n&quot;</span>, N, UBCount, BUCount, (<span class="keyword">int</span>)(<span class="number">6</span>*N*(Math.log(N)/Math.log(<span class="number">2</span>))));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="227"><a class="markdownIt-Anchor" href="#227"></a> 2.2.7?</h3>
<blockquote>
<p>证明归并排序的比较次数是单调递增的（即对于 <code>N&gt;0</code>，<code>C(N+1)&gt;C(N)</code>）。</p>
</blockquote>
<p>设对于长度为N的任意数组，自顶向下归并排序的比较次数是<code>C(N)</code>。<br />
由<code>sort()</code>方法可知，<code>C(N)</code>的比较次数由三部分构成：对左半部分的<code>sort()</code>、对右半部分的<code>sort()</code>，以及对整个数组归并的<code>merge()</code>。<br />
要知道左半部分的比较次数，需要知道左半部分的数组长度，左半部分是<code>a[lo, lo+Floor((hi-lo)/2)]</code>，长度是<code>lo+Floor((hi-lo)/2)-lo+1</code>，又由于<code>N=hi-lo+1</code>，所以长度可写为<code>Floor((N-1)/2)+1</code>，根据转换公式它等于<code>Ceil(N/2)</code>，于是左半部分的比较次数是<code>C(Ceil(N/2))</code><br />
而右半部分的长度是<code>N</code>减左半部分的长度，即<code>N-Ceil(N/2)=Floor(N/2)</code>，所以比较次数是<code>Floor(N/2)</code><br />
对长度为<code>N</code>的数组进行<code>merge()</code>需要的（数组元素间的）比较次数最多是<code>N-1</code>。<br />
于是<code>C(Ceil(N/2))+C(Floor(N/2))&lt;=C(N)&lt;=C(Ceil(N/2))+C(Floor(N/2))+N-1</code></p>
<p><code>C(Ceil((N+1)/2))+C(Floor((N+1)/2))&lt;=C(N+1)</code><br />
<code>C(N+1)-C(N)</code><br />
没有等号的表达式，直接的不等式关系又不能组合，怎么判断单调性？</p>
<h3 id="228"><a class="markdownIt-Anchor" href="#228"></a> 2.2.8</h3>
<blockquote>
<p>假设将算法 2.4 修改为：只要 <code>a[mid] &lt;= a[mid+1]</code> 就不调用 merge() 方法，请证明用归并排序处理一个已经有序的数组所需的比较次数是线性级别的。</p>
</blockquote>
<p>对于一个有序的数组，每次<code>sort()</code>中的（数组元素的）比较次数就是1，因为只有一句<code>if(a[mid]&lt;=a[mid+1])</code>涉及到数组元素的比较。<br />
因此对于长度为<code>N</code>的数组，会调用多少次<code>sort()</code>就有多少次比较。<br />
在<code>sort()</code>中，只有当数组至少有2个元素时才会进入下面的比较部分。<br />
如果将<code>sort()</code>每次接收的数组范围表示成一个结点树，它的第<code>k</code>层有<code>2^k</code>个数组，也就是<code>2^k</code>次<code>sort()</code>调用。这棵树总共有<code>Ceil(logN)</code>层，设<code>n=Ceil(logN)</code>，最底下一层可能是不满的，若它是满的则<code>Ceil(logN)=logN</code>因为N是2的幂，数组总个数是</p>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -6.832ex" xmlns="http://www.w3.org/2000/svg" width="27.955ex" height="14.795ex" role="img" focusable="false" viewBox="0 -3519.6 12356 6539.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0, 2576.3)"><g data-mml-node="mtd"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g></g><g data-mml-node="mtd" transform="translate(645, 0)"><g data-mml-node="mi"></g><g data-mml-node="mo" transform="translate(277.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(1333.6, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(500, 413) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="mo" transform="translate(2459.3, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(3459.6, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(500, 413) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(4585.3, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(5585.6, 0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(6979.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(7980, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2308" d="M174 734Q178 746 190 750H298H369Q400 750 411 747T422 730T411 713T372 709Q365 709 345 709T310 710H214V-235Q206 -248 196 -250Q192 -250 189 -249T184 -247T180 -244T178 -241T176 -237T174 -234V734Z"></path></g><g data-mml-node="mi" transform="translate(444, 0)"><path data-c="6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(278, 0)"></path><path data-c="67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z" transform="translate(778, 0)"></path></g><g data-mml-node="mo" transform="translate(1722, 0)"><path data-c="2061" d=""></path></g><g data-mml-node="mi" transform="translate(1888.7, 0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(2776.7, 0)"><path data-c="2309" d="M21 717T21 730T32 746T75 750H147H256Q266 742 269 735V-235Q262 -248 251 -250Q247 -250 244 -249T239 -247T235 -244T233 -241T231 -237T229 -234V710H133Q119 710 99 710T71 709Q43 709 32 713Z"></path></g><g data-mml-node="mo" transform="translate(3220.7, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(3998.7, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></g><g data-mml-node="mtr" transform="translate(0, 1142.3)"><g data-mml-node="mtd" transform="translate(645, 0)"></g><g data-mml-node="mtd" transform="translate(645, 0)"><g data-mml-node="mi"></g><g data-mml-node="mo" transform="translate(277.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(1333.6, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(500, 413) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="mo" transform="translate(2459.3, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(3459.6, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(500, 413) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(4585.3, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mo" transform="translate(5585.6, 0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(6979.8, 0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="msup" transform="translate(7980, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="TeXAtom" transform="translate(500, 413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(600, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1378, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></g><g data-mml-node="mtr" transform="translate(0, -951.6)"><g data-mml-node="mtd" transform="translate(645, 0)"></g><g data-mml-node="mtd" transform="translate(645, 0)"><g data-mml-node="mi"></g><g data-mml-node="mo" transform="translate(277.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(1333.6, 0)"><g data-mml-node="mrow" transform="translate(220, 710)"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mn" transform="translate(500, 363) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g></g><g data-mml-node="mo" transform="translate(903.6, 0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(1292.6, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(2014.8, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="msup" transform="translate(3015, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500, 363) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(3989.3, 0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mrow" transform="translate(1297.9, -686)"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(722.2, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(1722.4, 0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><rect width="4578.3" height="60" x="120" y="220"></rect></g></g></g><g data-mml-node="mtr" transform="translate(0, -2769.6)"><g data-mml-node="mtd" transform="translate(645, 0)"></g><g data-mml-node="mtd" transform="translate(645, 0)"><g data-mml-node="mi"></g><g data-mml-node="mo" transform="translate(277.8, 0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(1333.6, 0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500, 413) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(2530, 0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(3530.3, 0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></g></g></svg></mjx-container>
<p>由于<code>n=Ceil(logN)</code>，最底层满的情况下<code>n=logN</code>，<code>S=2^logN-1=N-1</code>，因此比较次数是线性的。</p>
<h3 id="229"><a class="markdownIt-Anchor" href="#229"></a> 2.2.9</h3>
<blockquote>
<p>在库函数中使用 <code>aux[]</code> 这样的静态数组是不妥当的，因为可能会有多个程序同时使用这个类。实现一个不用静态数组的 Merge 类，但也不要将 <code>aux[]</code> 变为 <code>merge()</code> 的局部变量（请见本节的答疑部分）。提示：可以将辅助数组作为参数传递给递归的 sort() 方法。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Merge</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">        Comparable[] aux = <span class="keyword">new</span> Comparable[a.length]; <span class="comment">// 一次性分配空间</span></span><br><span class="line">        sort(a, aux, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 将数组a[lo..hi]排序</span></span><br><span class="line">        <span class="keyword">if</span> (hi &lt;= lo) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo)/<span class="number">2</span>;</span><br><span class="line">        sort(a, aux, lo, mid); <span class="comment">// 将左半边排序</span></span><br><span class="line">        sort(a, aux, mid+<span class="number">1</span>, hi); <span class="comment">// 将右半边排序</span></span><br><span class="line">        merge(a, aux, lo, mid, hi); <span class="comment">// 归并结果（代码见“原地归并的抽象方法”）</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2210"><a class="markdownIt-Anchor" href="#2210"></a> 2.2.10</h3>
<blockquote>
<p>快速归并。实现一个 merge() 方法，按降序将 a[] 的后半部分复制到 aux[]，然后将其归并回 a[] 中。这样就可以去掉内循环中检测某半边是否用尽的代码。注意：这样的排序产生的结果是不稳定的（请见 2.5.1.8 节）。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 整个数组 a[lo,hi]</span></span><br><span class="line">    <span class="comment">// 左半部分 a[lo, mid]</span></span><br><span class="line">    <span class="comment">// 右半部分 a[mid+1, hi]</span></span><br><span class="line">    <span class="keyword">int</span> i = lo, j = hi;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = lo; k &lt;= mid; k++) &#123;</span><br><span class="line">        aux[k] = a[k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = mid + <span class="number">1</span>; k &lt;= hi; k++) &#123;</span><br><span class="line">        aux[k] = a[hi + mid + <span class="number">1</span> - k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(less(aux[j], aux[i])) a[k] = aux[j--];</span><br><span class="line">        <span class="keyword">else</span> a[k] = aux[i++];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一个往右移一个往左移，每次要么右移要么左移，最终肯定会重合。<br />
在元素相同时，左半部分数组的指针可能会越界，如果此时又相同了，那么左半部分的指针会把右半部分数组中的元素放到<code>a</code>中，但这个元素是靠后的，实际应该放在后边。因此排序不稳定。</p>
<h3 id="2211"><a class="markdownIt-Anchor" href="#2211"></a> 2.2.11</h3>
<blockquote>
<p>改进。实现 2.2.2 节所述的对归并排序的三项改进：加快小数组的排序速度，检测数组是否已经有序以及通过在递归中交换参数来避免数组复制。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MergeQuick</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 整个数组 a[lo,hi]</span></span><br><span class="line">        <span class="comment">// 左半部分 a[lo, mid]</span></span><br><span class="line">        <span class="comment">// 右半部分 a[mid+1, hi]</span></span><br><span class="line">        <span class="keyword">int</span> i = lo, j = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; mid) a[k] = aux[j++];</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi) a[k] = aux[i++];</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (less(aux[j], aux[i])) a[k] = aux[j++];</span><br><span class="line">            <span class="keyword">else</span> a[k] = aux[i++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copy</span><span class="params">(Comparable[] dest, Comparable[] src, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = lo; i &lt;= hi; i++) &#123;</span><br><span class="line">            dest[i] = src[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = lo + <span class="number">1</span>, j; i &lt;= hi; i++) &#123;</span><br><span class="line">            Comparable key = a[i];</span><br><span class="line">            <span class="keyword">for</span> (j = i - <span class="number">1</span>; j &gt;= lo &amp;&amp; less(key, a[j]); j--) &#123;</span><br><span class="line">                a[j + <span class="number">1</span>] = a[j];</span><br><span class="line">            &#125;</span><br><span class="line">            a[j + <span class="number">1</span>] = key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">        Comparable[] aux = <span class="keyword">new</span> Comparable[a.length];</span><br><span class="line">        sort(a, aux, <span class="number">0</span>, a.length - <span class="number">1</span>, <span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi, <span class="keyword">boolean</span> reverse)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (hi - lo &lt; <span class="number">14</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(reverse) &#123;</span><br><span class="line">                copy(aux, a, lo, hi);</span><br><span class="line">                insertionSort(aux, lo, hi);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                insertionSort(a, lo, hi);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        sort(a, aux, lo, mid, !reverse);</span><br><span class="line">        sort(a, aux, mid + <span class="number">1</span>, hi, !reverse);</span><br><span class="line">        <span class="keyword">if</span> (reverse) &#123;</span><br><span class="line">            <span class="keyword">if</span> (less(a[mid + <span class="number">1</span>], a[mid])) merge(aux, a, lo, mid, hi);</span><br><span class="line">            <span class="keyword">else</span> copy(aux, a, lo, hi);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (less(aux[mid + <span class="number">1</span>], aux[mid])) merge(a, aux, lo, mid, hi);</span><br><span class="line">            <span class="keyword">else</span> copy(a, aux, lo, hi);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2212"><a class="markdownIt-Anchor" href="#2212"></a> 2.2.12?</h3>
<blockquote>
<p>次线性的额外空间。用大小 M 将数组分为 N/M 块（简单起见，设 M 是 N 的约数）。实现一个归并方法，使之所需的额外空间减少到 max(M, N/M)：(i) 可以先将一个块看做一个元素，将块的第一个元素作为块的主键，用选择排序将块排序；(ii) 遍历数组，将第一块和第二块归并，完成后将第二块和第三块归并，等等。</p>
</blockquote>
<p>merge方法传递进来的数组是两个有序的子数组。<br />
1 3 6 | 9 13  0 | 2  7 15<br />
选择排序的意义何在？<br />
跨越中间的那块很可能不是有序的，不符合归并条件怎么归并？</p>
<h3 id="2213"><a class="markdownIt-Anchor" href="#2213"></a> 2.2.13?</h3>
<blockquote>
<p>平均情况的下限。请证明任意基于比较的排序算法的预期比较次数至少为 <code>~NlgN</code>（假设输入元素的所有排列的出现概率是均等的）。提示：比较次数至少是比较树的外部路径的长度（根结点到所有叶子结点的路径长度之和），当树平衡时该值最小。</p>
</blockquote>
<p>正文不是证过了？</p>
<h3 id="2214"><a class="markdownIt-Anchor" href="#2214"></a> 2.2.14</h3>
<blockquote>
<p>归并有序的队列。编写一个静态方法，将两个有序的队列作为参数，返回一个归并后的有序队列。</p>
</blockquote>
<p>循环条件为什么不是<code>!q.isEmpty()</code>，因为每次比较的是已经从队列中取出的元素，队列是否为空则是查看队列中是否剩余元素。为空也不代表比较完了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Queue&lt;Comparable&gt; <span class="title">merge</span><span class="params">(Queue&lt;Comparable&gt; q1, Queue&lt;Comparable&gt; q2)</span> </span>&#123;</span><br><span class="line">    Queue&lt;Comparable&gt; q = <span class="keyword">new</span> Queue&lt;&gt;();</span><br><span class="line">    Comparable key1 = <span class="keyword">null</span>, key2 = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span>(!q1.isEmpty()) key1 = q1.dequeue();</span><br><span class="line">    <span class="keyword">if</span>(!q2.isEmpty()) key2 = q2.dequeue();</span><br><span class="line">    <span class="keyword">while</span>(key1 != <span class="keyword">null</span> &amp;&amp; key2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(less(key2, key1)) &#123;</span><br><span class="line">            q.enqueue(key2);</span><br><span class="line">            <span class="keyword">if</span>(!q2.isEmpty()) key2 = q2.dequeue();</span><br><span class="line">            <span class="keyword">else</span> key2 = <span class="keyword">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            q.enqueue(key1);</span><br><span class="line">            <span class="keyword">if</span>(!q1.isEmpty()) key1 = q1.dequeue();</span><br><span class="line">            <span class="keyword">else</span> key1 = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(key1 == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(key2 != <span class="keyword">null</span>) q.enqueue(key2);</span><br><span class="line">        <span class="keyword">while</span>(!q2.isEmpty()) q.enqueue(q2.dequeue());</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(key1 != <span class="keyword">null</span>) q.enqueue(key1);</span><br><span class="line">        <span class="keyword">while</span>(!q1.isEmpty()) q.enqueue(q1.dequeue());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2215"><a class="markdownIt-Anchor" href="#2215"></a> 2.2.15</h3>
<blockquote>
<p>自底向上的有序队列归并排序。用下面的方法编写一个自底向上的归并排序：给定 N 个元素，创建 N 个队列，每个队列包含其中一个元素。创建一个由这 N 个队列组成的队列，然后不断用练习 2.2.14 中的方法将队列的头两个元素归并，并将结果重新加入到队列结尾，直到队列的队列只剩下一个元素为止。</p>
</blockquote>
<p>循环不变式：<br />
每个元素自己构成了一个有序队列。<br />
当队列中有不止一个有序队列时，归并最前面两个有序队列，可以得到一个包含它们所有元素的新的有序队列。归并过程使得队列中的有序队列数量减1。最终队列数量减少到1。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Queue&lt;Comparable&gt; <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    Queue&lt;Queue&lt;Comparable&gt;&gt; q = <span class="keyword">new</span> Queue&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">        Queue&lt;Comparable&gt; subq = <span class="keyword">new</span> Queue&lt;&gt;();</span><br><span class="line">        subq.enqueue(a[i]);</span><br><span class="line">        q.enqueue(subq);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(q.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        Queue&lt;Comparable&gt; q1 = q.dequeue();</span><br><span class="line">        Queue&lt;Comparable&gt; q2 = q.dequeue();</span><br><span class="line">        q.enqueue(merge(q1,q2));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> q.dequeue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2216"><a class="markdownIt-Anchor" href="#2216"></a> 2.2.16？</h3>
<blockquote>
<p>自然的归并排序。编写一个自底向上的归并排序，当需要将两个子数组排序时能够利用数组中已经有序的部分。首先找到一个有序的子数组（移动指针直到当前元素比上一个元素小为止），然后再找出另一个并将它们归并。根据数组大小和数组中递增子数组的最大长度分析算法的运行时间。</p>
</blockquote>
<p>和每一轮固定<code>sz</code>的自底向上归并不同，这里每个子数组的大小是不确定的，最小可能是1，最多可能是 数组长度？已经有序如何？</p>
<p>若<code>i &lt; N</code>，则只能保证<code>i</code>和<code>i-1</code>没有越界</p>
<p>1 5 | 3 4 | 2</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort2</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = a.length;</span><br><span class="line">    aux = <span class="keyword">new</span> Comparable[N];</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> begA, endA, endB;</span><br><span class="line">        <span class="keyword">for</span>(begA = <span class="number">0</span>; begA &lt; N; begA = endB) &#123;</span><br><span class="line">            <span class="comment">// 本轮的终止条件是endB到达数组最后位置的下一个位置</span></span><br><span class="line">            <span class="keyword">for</span>(endA = begA + <span class="number">1</span>; endA &lt; N &amp;&amp; !less(a[endA], a[endA-<span class="number">1</span>]); endA++);</span><br><span class="line">            <span class="comment">// 此时endA可能为N，超过数组索引</span></span><br><span class="line">            <span class="comment">// begB = endA</span></span><br><span class="line">            <span class="comment">// 若没有第二个数组，说明这次发现的有序a数组延伸到了末尾</span></span><br><span class="line">            <span class="comment">// 本轮归并就结束了，需要从头开始</span></span><br><span class="line">            <span class="keyword">if</span>(endA &gt;= N) &#123;</span><br><span class="line">                <span class="comment">// 如果没有第二个数组，同时第一个有序数组就是整个数组</span></span><br><span class="line">                <span class="comment">// 那么排序就结束了</span></span><br><span class="line">                <span class="keyword">if</span>(begA == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(endB = endA + <span class="number">1</span>; endB &lt; N &amp;&amp; !less(a[endB], a[endB-<span class="number">1</span>]); endB++);</span><br><span class="line">            merge(a, begA, endA - <span class="number">1</span>, endB - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每一轮中，有序数组长度最小为1，此时要归并N/2次，最大为N，此时归并0次。<br />
每一轮结束后，从索引0开始的有序子数组的长度至少会加1，然后加2，加4。只有最后两轮有可能只加1。<br />
每一轮中会遍历整个数组，因此会比较N-1次</p>
<p>1 3 6 | 5 |   4 2  | 0<br />
1 3 5 6 | 2 4 | 0</p>
<h3 id="2217"><a class="markdownIt-Anchor" href="#2217"></a> 2.2.17</h3>
<blockquote>
<p>链表排序。实现对链表的自然排序（这是将链表排序的最佳方法，因为它不需要额外的空间，且运行时间是线性对数级别的）。</p>
</blockquote>
<p>核心是归并与排序，为了不使用额外空间，归并需要对链表进行原地归并，为了将一个链表分成两个子链表，需要由结点来划定范围。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;Item extends Comparable&lt;Item&gt;&gt; <span class="function">Node&lt;Item&gt; <span class="title">merge</span><span class="params">(Node&lt;Item&gt; beforeA, Node&lt;Item&gt; endA, Node&lt;Item&gt; endB)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 要归并的子链表是[beforeA.next, endA) 和 [endA, endB)</span></span><br><span class="line">    <span class="comment">// before是要归并的第一个子链表的首结点之前的结点</span></span><br><span class="line">    <span class="comment">// endA=begB，是第一个子链表的尾结点的下一个结点</span></span><br><span class="line">    <span class="comment">// 也是第二个子链表的首结点</span></span><br><span class="line">    <span class="comment">// endB是要归并的第二个子链表的尾结点的下一个结点</span></span><br><span class="line">    <span class="comment">// 只保证beforeA和endB不变</span></span><br><span class="line">    <span class="comment">// 排序需要拿到尾结点，因此返回尾结点</span></span><br><span class="line">    Node&lt;Item&gt; curA = beforeA.next;</span><br><span class="line">    Node&lt;Item&gt; curB = endA;</span><br><span class="line">    Node&lt;Item&gt; curC = beforeA;</span><br><span class="line">    <span class="keyword">while</span> (curA != endA &amp;&amp; curB != endB) &#123;</span><br><span class="line">        <span class="keyword">if</span> (less(curB.item, curA.item)) &#123;</span><br><span class="line">            Node&lt;Item&gt; cur = curB;</span><br><span class="line">            curB = curB.next;</span><br><span class="line">            cur.next = <span class="keyword">null</span>;</span><br><span class="line">            curC.next = cur;</span><br><span class="line">            curC = cur;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Node&lt;Item&gt; cur = curA;</span><br><span class="line">            curA = curA.next;</span><br><span class="line">            cur.next = <span class="keyword">null</span>;</span><br><span class="line">            curC.next = cur;</span><br><span class="line">            curC = cur;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 把剩余结点连接在后面，</span></span><br><span class="line">    <span class="comment">// 但需要保证尾结点的后一个节点是endB</span></span><br><span class="line">    <span class="keyword">if</span> (curB == endB) &#123;</span><br><span class="line">        Node&lt;Item&gt; restBeg = curA;</span><br><span class="line">        <span class="keyword">while</span>(curA.next!=endA) curA = curA.next;</span><br><span class="line">        curA.next = endB;</span><br><span class="line">        curC.next = restBeg;</span><br><span class="line">        <span class="keyword">return</span> curA;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;Item&gt; restBeg = curB;</span><br><span class="line">        <span class="keyword">while</span>(curB.next != endB) curB = curB.next;</span><br><span class="line">        curB.next = endB;</span><br><span class="line">        curC.next = restBeg;</span><br><span class="line">        <span class="keyword">return</span> curB;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;Item extends Comparable&lt;Item&gt;&gt; <span class="function">Node&lt;Item&gt; <span class="title">sort</span><span class="params">(Node&lt;Item&gt; first)</span> </span>&#123;</span><br><span class="line">    Node&lt;Item&gt; head = <span class="keyword">new</span> Node&lt;&gt;();</span><br><span class="line">    head.next = first;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="comment">// 一轮排序后的首结点是谁？永远是head.next</span></span><br><span class="line">        Node&lt;Item&gt; begA, endA, endB, prev, beforeA;</span><br><span class="line">        <span class="comment">// 找到第一个子链表的首结点之前的结点（beforeA）</span></span><br><span class="line">        <span class="comment">// 以及第二个子链表的首结点（它也是第一个子链表的尾结点的下一个结点endA）</span></span><br><span class="line">        <span class="comment">// 和第二个子链表的尾结点的下一个结点（它也是下一次第一个子链表的首结点）</span></span><br><span class="line">        <span class="comment">// 尾结点是下一次的beforeA</span></span><br><span class="line">        <span class="keyword">for</span> (beforeA = head, begA = head.next; begA != <span class="keyword">null</span>; beforeA = prev, begA = endB) &#123;</span><br><span class="line">            <span class="comment">// 第一个循环中，prev表示endA的前一个结点</span></span><br><span class="line">            <span class="comment">// 循环的作用是找到endA</span></span><br><span class="line">            <span class="keyword">for</span>(prev = begA, endA = begA.next;</span><br><span class="line">                endA != <span class="keyword">null</span> &amp;&amp; !less(endA.item, prev.item);</span><br><span class="line">                prev = endA, endA = endA.next);</span><br><span class="line">            <span class="keyword">if</span>(endA == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span>(begA == head.next) <span class="keyword">return</span> head.next;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 第二个循环中，prev表示endB的前一个结点</span></span><br><span class="line">            <span class="comment">// 循环的作用是找到endB</span></span><br><span class="line">            <span class="keyword">for</span>(prev = endA,endB = endA.next;</span><br><span class="line">                endB != <span class="keyword">null</span> &amp;&amp; !less(endB.item, prev.item);</span><br><span class="line">                prev = endB, endB = endB.next);</span><br><span class="line">            <span class="comment">// merge完了尾结点也会变化，endB虽然不变但prev不是endB的prev</span></span><br><span class="line">            prev = merge(beforeA, endA, endB);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>完整代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">Item</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Item</span>&gt;&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    Item item;</span><br><span class="line">    Node&lt;Item&gt; next;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Item[] a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">assert</span> a.length &gt; <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.item = a[<span class="number">0</span>];</span><br><span class="line">        Node prev = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            Node node = <span class="keyword">new</span> Node();</span><br><span class="line">            node.item = a[i];</span><br><span class="line">            prev.next = node;</span><br><span class="line">            prev = node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        sb.append(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(Item item: <span class="keyword">this</span>) &#123;</span><br><span class="line">            sb.append(item == <span class="keyword">null</span>? <span class="string">&quot;null&quot;</span>:item.toString());</span><br><span class="line">            sb.append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        sb.replace(sb.length()-<span class="number">2</span>, sb.length(), <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> NodeIterator(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">NodeIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Node&lt;Item&gt; cur;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">NodeIterator</span><span class="params">(Node&lt;Item&gt; first)</span> </span>&#123;</span><br><span class="line">            cur = first;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> cur != <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            Item item = cur.item;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MergeLinkedList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item extends Comparable&lt;Item&gt;&gt; <span class="function">Node&lt;Item&gt; <span class="title">merge</span><span class="params">(Node&lt;Item&gt; beforeA, Node&lt;Item&gt; endA, Node&lt;Item&gt; endB)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 要归并的子链表是[beforeA.next, endA) 和 [endA, endB)</span></span><br><span class="line">        <span class="comment">// before是要归并的第一个子链表的首结点之前的结点</span></span><br><span class="line">        <span class="comment">// endA=begB，是第一个子链表的尾结点的下一个结点</span></span><br><span class="line">        <span class="comment">// 也是第二个子链表的首结点</span></span><br><span class="line">        <span class="comment">// endB是要归并的第二个子链表的尾结点的下一个结点</span></span><br><span class="line">        <span class="comment">// 只保证beforeA和endB不变</span></span><br><span class="line">        <span class="comment">// 排序需要拿到尾结点，因此尾结点</span></span><br><span class="line">        Node&lt;Item&gt; curA = beforeA.next;</span><br><span class="line">        Node&lt;Item&gt; curB = endA;</span><br><span class="line">        Node&lt;Item&gt; curC = beforeA;</span><br><span class="line">        <span class="keyword">while</span> (curA != endA &amp;&amp; curB != endB) &#123;</span><br><span class="line">            <span class="keyword">if</span> (less(curB.item, curA.item)) &#123;</span><br><span class="line">                Node&lt;Item&gt; cur = curB;</span><br><span class="line">                curB = curB.next;</span><br><span class="line">                cur.next = <span class="keyword">null</span>;</span><br><span class="line">                curC.next = cur;</span><br><span class="line">                curC = cur;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Node&lt;Item&gt; cur = curA;</span><br><span class="line">                curA = curA.next;</span><br><span class="line">                cur.next = <span class="keyword">null</span>;</span><br><span class="line">                curC.next = cur;</span><br><span class="line">                curC = cur;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (curB == endB) &#123;</span><br><span class="line">            Node&lt;Item&gt; restBeg = curA;</span><br><span class="line">            <span class="keyword">while</span>(curA.next!=endA) curA = curA.next;</span><br><span class="line">            curA.next = endB;</span><br><span class="line">            curC.next = restBeg;</span><br><span class="line">            <span class="keyword">return</span> curA;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 把从curB到endB的连接在后面</span></span><br><span class="line">            Node&lt;Item&gt; restBeg = curB;</span><br><span class="line">            <span class="comment">// 有BUG</span></span><br><span class="line">            <span class="keyword">while</span>(curB.next != endB) curB = curB.next;</span><br><span class="line">            curB.next = endB;</span><br><span class="line">            curC.next = restBeg;</span><br><span class="line">            <span class="keyword">return</span> curB;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item extends Comparable&lt;Item&gt;&gt; <span class="function">Node&lt;Item&gt; <span class="title">sort</span><span class="params">(Node&lt;Item&gt; first)</span> </span>&#123;</span><br><span class="line">        Node&lt;Item&gt; head = <span class="keyword">new</span> Node&lt;&gt;();</span><br><span class="line">        head.next = first;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 一轮排序后的首结点是谁？永远是head.next</span></span><br><span class="line">            Node&lt;Item&gt; begA, endA, endB, prev, beforeA;</span><br><span class="line">            <span class="comment">// 找到第一个子链表的首结点之前的结点（beforeA）</span></span><br><span class="line">            <span class="comment">// 以及第二个子链表的首结点（它也是第一个子链表的尾结点的下一个结点endA）</span></span><br><span class="line">            <span class="comment">// 和第二个子链表的尾结点的下一个结点（它也是下一次第一个子链表的首结点）</span></span><br><span class="line">            <span class="comment">// 尾结点是下一次的beforeA</span></span><br><span class="line">            <span class="keyword">for</span> (beforeA = head, begA = head.next; begA != <span class="keyword">null</span>; beforeA = prev, begA = endB) &#123;</span><br><span class="line">                <span class="comment">// 第一个循环中，prev表示endA的前一个结点</span></span><br><span class="line">                <span class="comment">// 循环的作用是找到endA</span></span><br><span class="line">                <span class="keyword">for</span>(prev = begA, endA = begA.next;</span><br><span class="line">                    endA != <span class="keyword">null</span> &amp;&amp; !less(endA.item, prev.item);</span><br><span class="line">                    prev = endA, endA = endA.next);</span><br><span class="line">                <span class="keyword">if</span>(endA == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(begA == head.next) <span class="keyword">return</span> head.next;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 第二个循环中，prev表示endB的前一个结点</span></span><br><span class="line">                <span class="comment">// 循环的作用是找到endB</span></span><br><span class="line">                <span class="keyword">for</span>(prev = endA,endB = endA.next;</span><br><span class="line">                    endB != <span class="keyword">null</span> &amp;&amp; !less(endB.item, prev.item);</span><br><span class="line">                    prev = endB, endB = endB.next);</span><br><span class="line">                <span class="comment">// merge完了尾结点也会变化，endB虽然不变但prev不是endB的prev</span></span><br><span class="line">                prev = merge(beforeA, endA, endB);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v, Comparable w)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v.compareTo(w) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;Item extends Comparable&lt;Item&gt;&gt; <span class="function"><span class="keyword">boolean</span> <span class="title">isSorted</span><span class="params">(Node&lt;Item&gt; first)</span> </span>&#123;</span><br><span class="line">        Node&lt;Item&gt; prev = first;</span><br><span class="line">        <span class="keyword">for</span>(Node&lt;Item&gt; cur = prev.next; cur != <span class="keyword">null</span>; prev=cur, cur=cur.next) &#123;</span><br><span class="line">            <span class="keyword">if</span>(less(cur.item, prev.item)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> N = <span class="number">1</span>; N &lt; <span class="number">10000</span>; N++) &#123;</span><br><span class="line">            Integer[] a = <span class="keyword">new</span> Integer[N];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">                a[i] = i;</span><br><span class="line">            &#125;</span><br><span class="line">            StdRandom.shuffle(a);</span><br><span class="line">            Node&lt;Integer&gt; first = <span class="keyword">new</span> Node&lt;&gt;(a);</span><br><span class="line">            first = sort(first);</span><br><span class="line">            <span class="keyword">if</span>(!isSorted(first)) System.out.println(first);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2218"><a class="markdownIt-Anchor" href="#2218"></a> 2.2.18?</h3>
<blockquote>
<p>打乱链表。实现一个分治算法，使用线性对数级别的时间和对数级别的额外空间随机打乱一条链表。</p>
</blockquote>
<p>分成两部分打乱？不行，最后会变成每两个元素交换了.<br />
分成第一个元素和后面的元素？</p>
<p>打乱算法是：每次从<code>A[i, N)</code>中随机选一个元素与<code>A[i]</code>交换<br />
每次选最后一个就成了平方级别了。</p>
<h3 id="2219"><a class="markdownIt-Anchor" href="#2219"></a> 2.2.19?</h3>
<blockquote>
<p>倒置。编写一个线性对数级别的算法统计给定数组中的“倒置”数量（即插入排序所需的交换次数，请见 2.1 节）。这个数量和 Kendal1 tau 距离有关，请见 2.5 节。</p>
</blockquote>
<p>所有不重复的二元组有<code>N-1+N-2+...+1=N(N-1)/2</code>个，遍历的话是平方级别的。</p>
<h3 id="2220"><a class="markdownIt-Anchor" href="#2220"></a> 2.2.20</h3>
<blockquote>
<p>间接排序。编写一个不改变数组的归并排序，它返回一个 int[] 数组 perm，其中 perm[i] 的值是原数组中第 i 小的元素的位置。</p>
</blockquote>
<p>拷贝到新数组，再原地归并排序。<br />
如果不拷贝到新数组，原数组不能动，第一轮归并使得新数组中出现了一些有序子数组，但从第二轮开始原数组就没有有效信息，你必须基于有序子数组来归并，也就是基于新数组。</p>
<h3 id="2221"><a class="markdownIt-Anchor" href="#2221"></a> 2.2.21</h3>
<blockquote>
<p>一式三份。给定三个列表，每个列表中包含 N 个名字，编写一个线性对数级别的算法来判定三份列表中是否含有公共的名字，如果有，返回第一个被找到的这种名字。</p>
</blockquote>
<p>将第二个和第三个列表排序，花费NlogN。<br />
排序后的列表可以进行二分查找，对第一个列表中的每个元素，在第二个列表中二分查找，在第三个列表中二分查找，最多花费NlogN</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">findCommon</span><span class="params">(String[] a, String[] b, String[] c)</span> </span>&#123;</span><br><span class="line">    Merge.sort(b);</span><br><span class="line">    Merge.sort(c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(BinarySearch.rank(a[i], b) != -<span class="number">1</span> &amp;&amp;</span><br><span class="line">           BinarySearch.rank(a[i], c) != -<span class="number">1</span>)</span><br><span class="line">           <span class="keyword">return</span> a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2222"><a class="markdownIt-Anchor" href="#2222"></a> 2.2.22</h3>
<blockquote>
<p>三向归并排序。假设每次我们是把数组分成三个部分而不是两个部分并将它们分别排序，然后进行三向归并。这种算法的运行时间的增长数量级是多少？</p>
</blockquote>
<p>Nlog3N</p>
<h3 id="2223"><a class="markdownIt-Anchor" href="#2223"></a> 2.2.23</h3>
<blockquote>
<p>改进。用实验评估正文中所提到的归并排序的三项改进（请见练习 2.2.11）的效果，并比较正文中实现的归并和练习 2.2.10 所实现的归并之间的性能。根据经验给出应该在何时为子数组切换到插入排序。</p>
</blockquote>
<p>以下均为100次对随机数组排序时间的平均值<br />
原版 vs 测试数组是否已经有序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">N       Origin     Quick        Ratio</span><br><span class="line">1000   0.000630   0.000620   1.016129</span><br><span class="line">2000   0.000470   0.000000   Infinity</span><br><span class="line">4000   0.000470   0.000470   1.000000</span><br><span class="line">8000   0.001400   0.001410   0.992908</span><br><span class="line">16000   0.002810   0.002660   1.056391</span><br><span class="line">32000   0.006040   0.005620   1.074733</span><br><span class="line">64000   0.011890   0.012180   0.976190</span><br><span class="line">128000   0.025740   0.027830   0.924901</span><br><span class="line">256000   0.059870   0.064410   0.929514</span><br><span class="line">512000   0.143110   0.150670   0.949824</span><br><span class="line">1024000   0.340050   0.357020   0.952468</span><br></pre></td></tr></table></figure>
<p>改进后效率反而低，这可能是因为<code>less</code>函数的开销略大。<br />
不使用<code>less</code>函数而是直接<code>v.compare()</code>测试如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">N       Origin     Quick        Ratio</span><br><span class="line">1000   0.000630   0.001090   0.577982</span><br><span class="line">2000   0.000470   0.000310   1.516129</span><br><span class="line">4000   0.000630   0.000630   1.000000</span><br><span class="line">8000   0.001260   0.001090   1.155963</span><br><span class="line">16000   0.003590   0.003280   1.094512</span><br><span class="line">32000   0.006550   0.005790   1.131261</span><br><span class="line">64000   0.012680   0.012820   0.989080</span><br><span class="line">128000   0.028660   0.027580   1.039159</span><br><span class="line">256000   0.064230   0.063410   1.012932</span><br><span class="line">512000   0.151100   0.151900   0.994733</span><br><span class="line">1024000   0.357550   0.355890   1.004664</span><br></pre></td></tr></table></figure>
<p>仍然没有太大的改进。恰好是有序数组的情况可能没有那么多。</p>
<p>原版 vs 小数组插入排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">N       Origin     Quick        Ratio</span><br><span class="line">1000   0.000630   0.000620   1.016129</span><br><span class="line">2000   0.000310   0.000160   1.937500</span><br><span class="line">4000   0.000630   0.000630   1.000000</span><br><span class="line">8000   0.001260   0.001260   1.000000</span><br><span class="line">16000   0.003280   0.002670   1.228464</span><br><span class="line">32000   0.006250   0.005470   1.142596</span><br><span class="line">64000   0.013190   0.011970   1.101921</span><br><span class="line">128000   0.027790   0.025490   1.090231</span><br><span class="line">256000   0.064250   0.059890   1.072800</span><br><span class="line">512000   0.152470   0.142800   1.067717</span><br><span class="line">1024000   0.355180   0.345490   1.028047</span><br></pre></td></tr></table></figure>
<p>原版 vs 小数组插入排序+不将数组复制到辅助数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">N       Origin     Quick        Ratio</span><br><span class="line">1000   0.000470   0.000620   0.758065</span><br><span class="line">2000   0.000310   0.000630   0.492063</span><br><span class="line">4000   0.000930   0.000630   1.476190</span><br><span class="line">8000   0.001250   0.000950   1.315789</span><br><span class="line">16000   0.003130   0.002040   1.534314</span><br><span class="line">32000   0.006550   0.004840   1.353306</span><br><span class="line">64000   0.012800   0.009820   1.303462</span><br><span class="line">128000   0.026150   0.020950   1.248210</span><br><span class="line">256000   0.064750   0.050780   1.275108</span><br><span class="line">512000   0.153780   0.116660   1.318190</span><br><span class="line">1024000   0.362800   0.276270   1.313208</span><br></pre></td></tr></table></figure>
<p>改进后的效率大约是原来的1.3倍</p>
<p>原版 vs 颠倒第二个子数组的不稳定的归并排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">N       Origin     Quick        Ratio</span><br><span class="line">1000   0.000630   0.000310   2.032258</span><br><span class="line">2000   0.000310   0.000160   1.937500</span><br><span class="line">4000   0.000620   0.000620   1.000000</span><br><span class="line">8000   0.001560   0.001410   1.106383</span><br><span class="line">16000   0.002640   0.002500   1.056000</span><br><span class="line">32000   0.006900   0.005620   1.227758</span><br><span class="line">64000   0.012740   0.010490   1.214490</span><br><span class="line">128000   0.027350   0.024330   1.124127</span><br><span class="line">256000   0.064590   0.057500   1.123304</span><br><span class="line">512000   0.151240   0.134220   1.126807</span><br><span class="line">1024000   0.364180   0.314790   1.156898</span><br></pre></td></tr></table></figure>
<h3 id="2224"><a class="markdownIt-Anchor" href="#2224"></a> 2.2.24</h3>
<blockquote>
<p>改进的有序测试。在实验中用大型随机数组评估练习 2.2.8 所做的修改的效果。根据经验用 N（被排序的原始数组的大小）的函数描述条件语句（a[mid] &lt; =a[mid+1]）成立（无论数组是否有序）的平均次数。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">N      count</span><br><span class="line">1000   292</span><br><span class="line">2000   586</span><br><span class="line">4000   1170</span><br><span class="line">8000   2348</span><br><span class="line">16000   4689</span><br><span class="line">32000   9377</span><br><span class="line">64000   18726</span><br><span class="line">128000   37514</span><br><span class="line">256000   74966</span><br><span class="line">512000   149959</span><br><span class="line">1024000   299952</span><br></pre></td></tr></table></figure>
<p><img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20210102195728220_6868.png" alt="" /><br />
<code>0.3N</code><br />
为什么？</p>
<h3 id="2225"><a class="markdownIt-Anchor" href="#2225"></a> 2.2.25</h3>
<blockquote>
<p>多向归并排序。实现一个 k 向（相对双向而言）归并排序程序。分析你的算法，估计最佳的 k 值并通过实验验证猜想。</p>
</blockquote>
<p>k个有序子数组怎么归并？k个指针？难道两两归并？这又不是多向归并了</p>
<h3 id="2226"><a class="markdownIt-Anchor" href="#2226"></a> 2.2.26</h3>
<blockquote>
<p>创建数组。使用 SortCompare 粗略比较在你的计算机上在 merge() 中和在 sort() 中创建 aux[] 的性能差异。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">For 10000 random Doubles</span><br><span class="line"> Merge is 1.2 times faster than MergeTest</span><br></pre></td></tr></table></figure>
<h3 id="2227"><a class="markdownIt-Anchor" href="#2227"></a> 2.2.27</h3>
<blockquote>
<p>子数组长度。用归并将大型随机数组排序，根据经验用 N（某次归并时两个子数组的长度之和）的函数估计当一个子数组用尽时另一个子数组的平均长度。</p>
</blockquote>
<p>另一个子数组平均长度是2，似乎与N无关</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 整个数组 a[lo,hi]</span></span><br><span class="line">    <span class="comment">// 左半部分 a[lo, mid]</span></span><br><span class="line">    <span class="comment">// 右半部分 a[mid+1, hi]</span></span><br><span class="line">    <span class="keyword">int</span> i = lo, j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">        aux[k] = a[k];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">boolean</span> first = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; mid) &#123;</span><br><span class="line">            <span class="keyword">if</span>(first) &#123;</span><br><span class="line">                <span class="keyword">int</span> size = hi - lo + <span class="number">1</span>;</span><br><span class="line">                <span class="comment">// [j, hi]</span></span><br><span class="line">                <span class="keyword">int</span> remain = hi - j + <span class="number">1</span>;</span><br><span class="line">                <span class="comment">// 没有除以次数</span></span><br><span class="line">                <span class="keyword">if</span>(dict.containsKey(size)) &#123;</span><br><span class="line">                    dict.put(size, dict.get(size) + remain);</span><br><span class="line">                    dictTimes.put(size, dictTimes.get(size) + <span class="number">1</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    dict.put(size, remain);</span><br><span class="line">                    dictTimes.put(size, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                first = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            a[k] = aux[j++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi) &#123;</span><br><span class="line">            <span class="keyword">if</span>(first) &#123;</span><br><span class="line">                <span class="keyword">int</span> size = hi - lo + <span class="number">1</span>;</span><br><span class="line">                <span class="comment">// [i, mid]</span></span><br><span class="line">                <span class="keyword">int</span> remain = mid - i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(dict.containsKey(size)) &#123;</span><br><span class="line">                    dict.put(size, dict.get(size) + remain);</span><br><span class="line">                    dictTimes.put(size, dictTimes.get(size) + <span class="number">1</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    dict.put(size, remain);</span><br><span class="line">                    dictTimes.put(size, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                first = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            a[k] = aux[i++];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (less(aux[j], aux[i])) a[k] = aux[j++];</span><br><span class="line">        <span class="keyword">else</span> a[k] = aux[i++];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1000万个元素的随机数组排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">N   平均长度   用尽的次数</span><br><span class="line">2	1.0	4194304</span><br><span class="line">3	1.3331138543569783	1611392</span><br><span class="line">1250000	2.625	8</span><br><span class="line">4	1.3326436923583662	485760</span><br><span class="line">1220	2.008223684210526	2432</span><br><span class="line">5	1.4989512173325918	1611392</span><br><span class="line">1221	1.9793402777777778	5760</span><br><span class="line">2500000	2.0	4</span><br><span class="line">9	1.6645112812911727	485760</span><br><span class="line">2441	1.9864309210526316	2432</span><br><span class="line">10	1.6667276694337048	562816</span><br><span class="line">2442	1.9981971153846154	1664</span><br><span class="line">19531	2.1223958333333335	384</span><br><span class="line">76	1.954097510373444	92544</span><br><span class="line">19532	2.203125	128</span><br><span class="line">5000000	2.0	2</span><br><span class="line">77	1.956187707641196	38528</span><br><span class="line">4882	2.0286458333333335	384</span><br><span class="line">19	1.8171586791831358	485760</span><br><span class="line">4883	2.0006009615384617	1664</span><br><span class="line">20	1.8081654900332227	38528</span><br><span class="line">39062	1.9453125	128</span><br><span class="line">39063	2.0703125	128</span><br><span class="line">152	1.9733042061611374	27008</span><br><span class="line">156250	2.03125	64</span><br><span class="line">10000000	1.0	1</span><br><span class="line">153	1.9796771179401993	38528</span><br><span class="line">625000	1.9375	16</span><br><span class="line">610	1.9946347891566265	10624</span><br><span class="line">611	1.9696180555555556	5760</span><br><span class="line">9765	1.9192708333333333	384</span><br><span class="line">38	1.8964877289639381	223616</span><br><span class="line">9766	1.9328125	640</span><br><span class="line">39	1.9072882059800664	38528</span><br><span class="line">78125	1.8515625	128</span><br><span class="line">312500	1.9375	32</span><br><span class="line">305	1.9839306872037914	27008</span><br><span class="line">306	1.9701388888888889	5760</span><br></pre></td></tr></table></figure>
<p>整体在1-3之间，如果忽略次数低于200的，可以作出下图<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/_v_images/20210103133122380_29498.png" alt="" /></p>
<h3 id="2228"><a class="markdownIt-Anchor" href="#2228"></a> 2.2.28</h3>
<blockquote>
<p>自顶向下与自底向上。对于 N=<code>10^3</code>、<code>10^4</code>、<code>10^5</code> 和 <code>10^6</code>，使用 SortCompare 比较自顶向下和自底向上的归并排序的性能。</p>
</blockquote>
<p>不管怎么比，自顶向下的效率都要高</p>
<p>N=<code>10^3</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java SortCompare Merge MergeBU 1000 10000</span><br><span class="line">For 1000 random Doubles</span><br><span class="line"> Merge is 1.0 times faster than MergeBU (1.126000        1.156000)</span><br><span class="line"></span><br><span class="line">java SortCompare Merge MergeBU 1000 10000</span><br><span class="line">For 1000 random Doubles</span><br><span class="line"> Merge is 1.0 times faster than MergeBU (1.206000        1.155000)</span><br><span class="line"></span><br><span class="line">java SortCompare Merge MergeBU 1000 10000</span><br><span class="line">For 1000 random Doubles</span><br><span class="line"> Merge is 1.0 times faster than MergeBU (1.125000        1.161000)</span><br></pre></td></tr></table></figure>
<p>N=<code>10^4</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java SortCompare Merge MergeBU 10000 10000</span><br><span class="line">For 10000 random Doubles</span><br><span class="line"> Merge is 1.1 times faster than MergeBU (14.231000       15.216000)</span><br><span class="line"></span><br><span class="line">java SortCompare Merge MergeBU 10000 10000</span><br><span class="line">For 10000 random Doubles</span><br><span class="line"> Merge is 1.1 times faster than MergeBU (14.013000       15.093000)</span><br><span class="line"></span><br><span class="line">java SortCompare Merge MergeBU 10000 10000</span><br><span class="line">For 10000 random Doubles</span><br><span class="line"> Merge is 1.0 times faster than MergeBU (14.435000       14.728000)</span><br></pre></td></tr></table></figure>
<p>N=<code>10^5</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java SortCompare Merge MergeBU 100000 1000</span><br><span class="line">For 100000 random Doubles</span><br><span class="line"> Merge is 1.1 times faster than MergeBU (19.468000       20.748000)</span><br><span class="line"></span><br><span class="line">java SortCompare Merge MergeBU 100000 1000</span><br><span class="line">For 100000 random Doubles</span><br><span class="line"> Merge is 1.0 times faster than MergeBU (20.596000       20.927000)</span><br><span class="line"></span><br><span class="line">java SortCompare Merge MergeBU 100000 1000</span><br><span class="line">For 100000 random Doubles</span><br><span class="line"> Merge is 1.1 times faster than MergeBU (19.283000       20.526000)</span><br></pre></td></tr></table></figure>
<p>N=<code>10^6</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java SortCompare Merge MergeBU 1000000 100</span><br><span class="line">For 1000000 random Doubles</span><br><span class="line"> Merge is 1.1 times faster than MergeBU (32.982000       37.270000)</span><br><span class="line"></span><br><span class="line">java SortCompare Merge MergeBU 1000000 100</span><br><span class="line">For 1000000 random Doubles</span><br><span class="line"> Merge is 1.1 times faster than MergeBU (34.979000       39.726000)</span><br><span class="line"></span><br><span class="line">java SortCompare Merge MergeBU 1000000 100</span><br><span class="line">For 1000000 random Doubles</span><br><span class="line"> Merge is 1.2 times faster than MergeBU (32.996000       38.561000)</span><br></pre></td></tr></table></figure>
<h3 id="2229"><a class="markdownIt-Anchor" href="#2229"></a> 2.2.29</h3>
<blockquote>
<p>自然的归并排序。对于 N=<code>10^3</code>、<code>10^6</code> 和 <code>10^9</code>，类型为 Long 的随机主键数组，根据经验给出自然的归并排序（请见练习 2.2.16）所需要的遍数。提示：不需要实现这个排序（甚至不需要生成所有完整的 64 位主键）也能完成这道练习。</p>
</blockquote>
<p><code>10^3</code>：10-11次，平均为10次<br />
<code>10^6</code>：20次</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">100		7</span><br><span class="line">1000	10</span><br><span class="line">10000	14</span><br><span class="line">100000	17</span><br><span class="line">1000000	20</span><br><span class="line">10000000	24</span><br></pre></td></tr></table></figure>
<p><code>y=alog10(x)+b</code><br />
<code>y=3log10(x)+1</code></p>
<h2 id="23-快速排序"><a class="markdownIt-Anchor" href="#23-快速排序"></a> 2.3 快速排序</h2>
<h3 id="231"><a class="markdownIt-Anchor" href="#231"></a> 2.3.1</h3>
<blockquote>
<p>按照partition()方法的轨迹的格式给出该方法是如何切分数组 E A S Y Q U E S T I O N的。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i  j  0 1 2 3 4 5 6 7 8 9 10 11</span><br><span class="line">0  12 E A S Y Q U E S T I  O  N  初始值</span><br><span class="line">2  6  E A-S Y Q U E-S-T-I--O--N  扫描</span><br><span class="line">2  6  E A E Y Q U S S T I  O  N  交换</span><br><span class="line">3  2  E A E-Y-Q-U-S S T I  O  N  扫描</span><br><span class="line">3  2  E A E Y Q U S S T I  O  N  最终交换</span><br><span class="line">   2      E                      结果</span><br></pre></td></tr></table></figure>
<h3 id="232"><a class="markdownIt-Anchor" href="#232"></a> 2.3.2</h3>
<blockquote>
<p>按照本节中快速排序所示轨迹的格式给出快速排序是如何将数组 E A S Y Q U E S T I O N 排序的（出于练习的目的，可以忽略开头打乱数组的部分）。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">lo j  hi  0 1 2 3 4 5 6 7 8 9 10 11</span><br><span class="line">          E A S Y Q U E S T I  O  N</span><br><span class="line">0  2  11  E A E Y Q U S S T I  O  N</span><br><span class="line">0  1   1  A E E Y Q U S S T I  O  N</span><br><span class="line">0      0  不排序</span><br><span class="line">2      1  不排序</span><br><span class="line">3  11 11  A E E N Q U S S T I  O  Y</span><br><span class="line">3   4 10  A E E I N U S S T Q  O  Y</span><br><span class="line">3      3  不排序</span><br><span class="line">5  10 10  A E E I N O S S T Q  U  Y</span><br><span class="line">5   5  9  A E E I N O S S T Q  U  Y</span><br><span class="line">5      4  不排序</span><br><span class="line">6   7  9  A E E I N O Q S T S  U  Y</span><br><span class="line">6      6  不排序</span><br><span class="line">8   9  9  A E E I N O Q S S T  U  Y</span><br><span class="line">8      8  不排序</span><br><span class="line">10     9  不排序</span><br><span class="line">11    10  不排序</span><br><span class="line">12    11  不排序</span><br></pre></td></tr></table></figure>
<h3 id="233"><a class="markdownIt-Anchor" href="#233"></a> 2.3.3?</h3>
<blockquote>
<p>对于长度为 N 的数组，在 Quick.sort() 执行时，其最大的元素最多会被交换多少次？</p>
</blockquote>
<p>如果最大的元素在第一个位置，第一次切分会使得它到达最终位置，只会交换1次。<br />
如果最大的元素在最后一个位置，从右到左遍历时找小于等于v的元素，一定会跳过它，因此会交换0次。<br />
最大的元素在中间</p>
<h3 id="234"><a class="markdownIt-Anchor" href="#234"></a> 2.3.4</h3>
<blockquote>
<p>假如跳过开头打乱数组的操作，给出六个含有 10 个元素的数组，使得 Quick.sort() 所需的比较次数达到最坏情况。</p>
</blockquote>
<p>最坏情况是在每次切分后两个子数组之一总是空的，即切分元素总是第一个或者最后一个。</p>
<p>0 1 2 3 4 5 6 7 8 9<br />
9 1 2 3 4 5 6 7 8 0<br />
0 9 2 3 4 5 6 7 8 1<br />
0 1 9 3 4 5 6 7 8 2<br />
0 1 2 9 4 5 6 7 8 3<br />
0 1 2 3 9 5 6 7 8 4</p>
<h3 id="235"><a class="markdownIt-Anchor" href="#235"></a> 2.3.5</h3>
<blockquote>
<p>给出一段代码将已知只有两种主键值的数组排序。</p>
</blockquote>
<p>这等价于一次快速排序的切分，将小于等于v的元素放在v左边，将大于等于v的元素放在v右边<br />
思路是错的，这样0 0 <code>0</code> 1 0 1 1这样的数组也满足条件，然而它并不是有序的。选择的切分元素可能是最大值也可能是最小值，你是不知道这个信息的。</p>
<ol>
<li>小于v的放左边，大于等于v的放右边，无法排序例如<code>0</code> 0 1 0 1</li>
<li>小于v的放左边，大于v的放右边，等于v的呢？放中间。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 切分成小于v、等于v、大于v的三部分</span></span><br><span class="line">    <span class="comment">// 既适用于三个主键排序，也适用于两个主键排序</span></span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> lt = lo, i = lo + <span class="number">1</span>, gt = hi;</span><br><span class="line">    Comparable v = a[lo];</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= gt) &#123;</span><br><span class="line">        <span class="keyword">int</span> cmp = a[i].compareTo(v);</span><br><span class="line">        <span class="keyword">if</span>(cmp &lt; <span class="number">0</span>) exch(a, lt++, i++);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(cmp &gt; <span class="number">0</span>) exch(a, i, gt--);</span><br><span class="line">        <span class="keyword">else</span> i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>小于等于v的放左边，大于v的放右边，无法排序，例如0 1 0 <code>1</code></li>
<li>小于等于v的放左边，大于等于v的放右边，无法排序，例如0 0 <code>0</code> 1 0 1 1</li>
<li>等于v的放左边，不等于v的放右边，若v是最小值则可排序，若v是最大值则逆序。这种办法必须知道v是两个主键中最大的还是最小的，可能还需要O(N)来得到这个信息</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> lo = <span class="number">0</span>, hi = a.length - <span class="number">1</span>;</span><br><span class="line">    Comparable v = a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> i = lo, j = hi + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(a[++i].compareTo(v) == <span class="number">0</span>) <span class="keyword">if</span>(i == hi) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(a[i].compareTo(v) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// v是最小值</span></span><br><span class="line">        <span class="comment">// 左指针找第一个不等于v的值</span></span><br><span class="line">        <span class="comment">// 右指针找第一个等于v的值</span></span><br><span class="line">        <span class="comment">// 交换后a[lo+1, i] == v, a[j, hi] != v</span></span><br><span class="line">        <span class="comment">// 交换前i停在了!=v的元素上，j停在了=v的元素上</span></span><br><span class="line">        i--;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span>(a[++i].compareTo(v) == <span class="number">0</span>) <span class="keyword">if</span>(i == hi) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">while</span>(a[--j].compareTo(v) != <span class="number">0</span>) <span class="keyword">if</span>(j == lo) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= j) <span class="keyword">break</span>;</span><br><span class="line">            exch(a, i, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// v是最大值</span></span><br><span class="line">        <span class="comment">// 左指针找第一个等于v的值</span></span><br><span class="line">        <span class="comment">// 右指针找第一个不等于v的值</span></span><br><span class="line">        <span class="comment">// 交换后a[lo+1, i] != v, a[j, hi] == v</span></span><br><span class="line">        <span class="comment">// 交换前a[i] == v, a[j] != v, a[j+1, hi] == v</span></span><br><span class="line">        i = lo;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span>(a[++i].compareTo(v) != <span class="number">0</span>) <span class="keyword">if</span>(i == hi) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">while</span>(a[--j].compareTo(v) == <span class="number">0</span>) <span class="keyword">if</span>(j == lo) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= j) <span class="keyword">break</span>;</span><br><span class="line">            exch(a, i, j);</span><br><span class="line">        &#125;</span><br><span class="line">        exch(a, lo, j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="236"><a class="markdownIt-Anchor" href="#236"></a> 2.3.6</h3>
<blockquote>
<p>编写一段代码来计算 <code>C_N</code> 的准确值，在 N=100、1000 和 10 000 的情况下比较准确值和估计值 <code>2NlnN</code> 的差距。</p>
</blockquote>
<p>估计值中只计算了数组元素比较的成本，因此只需要在less()方法内计数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> N = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">int</span> T = Integer.parseInt(args[<span class="number">1</span>]);</span><br><span class="line"><span class="keyword">double</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> t = <span class="number">0</span>; t &lt; T; t++) &#123;</span><br><span class="line">    Double[] a = <span class="keyword">new</span> Double[N];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        a[i] = StdRandom.uniform();</span><br><span class="line">    count += sort(a);</span><br><span class="line">&#125;</span><br><span class="line">count /= T;</span><br><span class="line"><span class="keyword">double</span> estimate = <span class="number">2</span>*N*Math.log(N);</span><br><span class="line">StdOut.printf(<span class="string">&quot;%d   %f   %f&quot;</span>,N, count, estimate);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">10万次平均</span><br><span class="line">N      准确值          估计值</span><br><span class="line">100    763.754780     921.034037     (921-763)&#x2F;921&#x3D;17%</span><br><span class="line">1000   12152.250560   13815.510558   12%</span><br><span class="line">10000  167419.870160  184206.807440   9%</span><br></pre></td></tr></table></figure>
<p>随着N的增大与估计值的差距越来越小</p>
<h3 id="237"><a class="markdownIt-Anchor" href="#237"></a> 2.3.7</h3>
<blockquote>
<p>在使用快速排序将 N 个不重复的元素排序时，计算大小为 0、1 和 2 的子数组的数量。如果你喜欢数学，请推导；如果你不喜欢，请做一些实验并提出猜想。</p>
</blockquote>
<p>子数组的大小取决于切分元素的位置j，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">100000次测试</span><br><span class="line">N        c0      c1      c2</span><br><span class="line">10      3.7     3.7     1.8</span><br><span class="line">100     33.7    33.7    16.8</span><br><span class="line">1000    333.7   333.6   166.9</span><br><span class="line">10000   3333.6  3333.7  1666.9</span><br></pre></td></tr></table></figure>
<p><code>c0=c1=(N-1)/3</code><br />
<code>c2=(N+2)/6</code></p>
<h3 id="238"><a class="markdownIt-Anchor" href="#238"></a> 2.3.8</h3>
<blockquote>
<p>Quick.sort() 在处理 N 个全部重复的元素时大约需要多少次比较？</p>
</blockquote>
<p>全重复元素，左指针和右指针每次前进1格就会找到大于等于和小于等于的元素，因此会进行<code>Ceil(size/2)</code>次比较。最终找到的切分元素是中间或中间靠左的元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">size</span><br><span class="line">N</span><br><span class="line">(N-1)&#x2F;2</span><br><span class="line">(N-3)&#x2F;4</span><br><span class="line">(N-7)&#x2F;8</span><br><span class="line">(N-15)&#x2F;16</span><br><span class="line">(N-2^n+1)&#x2F;2^n</span><br></pre></td></tr></table></figure>
<p>实验</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">N          次数           NlogN        NlogN比次数</span><br><span class="line">100        564           664.385619	  1.177988686</span><br><span class="line">1000       8898          9965.784285  1.120002729</span><br><span class="line">10000      121014        132877.1238  1.098031003</span><br><span class="line">100000     1561130       1660964.047  1.063949862</span><br><span class="line">1000000    18818572      19931568.57  1.059143519</span><br><span class="line">10000000   220480656     232534966.6  1.054672872</span><br></pre></td></tr></table></figure>
<p>大约NlogN次比较，就是每次分一半数组的情况</p>
<h3 id="239"><a class="markdownIt-Anchor" href="#239"></a> 2.3.9?</h3>
<blockquote>
<p>请说明 Quick.sort() 在处理只有两种主键值的数组时的行为，以及在处理只有三种主键值的数组时的行为。</p>
</blockquote>
<p>选择的切分元素是随机的，<br />
若选的切分元素是最小值，则左指针每次只能前进1格，因为每个元素都是大于等于它的。而右指针会找到第一个等于它的元素，最少前进1格，最多可能前进多格。因此最终的切分元素一定位于左半部分。<br />
若选的切分元素是最大值，则右指针每次只能前进1格，因为每个元素都是小于等于它的。而左指针会找到第一个等于它的元素，最少前进1格，最多可能前进多格。因此最终的切分元素一定位于右半部分。</p>
<h3 id="2310"><a class="markdownIt-Anchor" href="#2310"></a> 2.3.10?</h3>
<blockquote>
<p>Chebyshev 不等式表明，一个随机变量的标准差距离均值大于 k 的概率小于 <code>1/k^2</code>。对于 N=100 万，用 Chebyshev 不等式计算快速排序所使用的比较次数大于 1000 亿次的概率 （<code>0.1N^2</code>）。</p>
</blockquote>
<p>比较次数是一个随机变量，其平均次数是<code>2NlnN</code><br />
<code>2*1000000*ln(1000000)=27631021.1159285482</code></p>
<p>标准差距离均值大于<code>100000000000-27631021=99972368979</code>的概率小于<code>1*10^-22</code></p>
<h3 id="2311"><a class="markdownIt-Anchor" href="#2311"></a> 2.3.11</h3>
<blockquote>
<p>假如在遇到和切分元素重复的元素时我们继续扫描数组而不是停下来，证明使用这种方法的快速排序在处理只有若干种元素值的数组时的运行时间是平方级别的。</p>
</blockquote>
<p>如果只有2个元素，<br />
如果切分元素是最小值，则左指针找第一个大于它的元素，右指针必定前进到尽头为lo。<br />
此时切分元素的位置是第一个元素，左边的子数组是空的。每次都是左边为空，因此需要<code>N+(N-1)+(N-2)+...+2+1=(N+1)N/2</code>次比较<br />
如果切分元素是最大值，则左指针找第一个小于它的元素，左指针必定前进到尽头为hi，右指针找第一个小于它的元素。？概率50%</p>
<p>此时切分元素的位置是最后一个元素，右子数组是空的，每次都会右边为空，也需要<code>~N^2</code>次比较。</p>
<p>3个元素，若选最大值，左指针必前进到尽</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:rcocco@qq.com">rcocco</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://rcocco.github.io/categories/计算机/数据结构与算法/Algs4习题.html">https://rcocco.github.io/categories/计算机/数据结构与算法/Algs4习题.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://rcocco.github.io">rcocco's Blog</a>！</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%AC%AC%E5%9B%9B%E7%89%88.html"><i class="fa fa-chevron-left">  </i><span>算法第四版</span></a></div><div class="next-post pull-right"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html"><span>计算机网络</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'a2cb0efab90aafe77d70',
  clientSecret: '4ab6a1536933e9a284900f708bef988ffb8c152f',
  repo: 'gitalk_comments',
  owner: 'rcocco',
  admin: 'rcocco',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(/bg.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2021 By rcocco</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>