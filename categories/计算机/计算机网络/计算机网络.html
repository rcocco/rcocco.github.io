<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="计算机网络"><meta name="keywords" content=""><meta name="author" content="rcocco,rcocco@qq.com"><meta name="copyright" content="rcocco"><title>计算机网络 | rcocco's Blog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2f232b8a2af9088714735280ce974c8b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-193110637-1', 'auto');
ga('send', 'pageview');</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%80%A7%E7%9A%84%E9%87%8D%E8%A6%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text"> 基础性的重要问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%BE%93%E5%B1%82"><span class="toc-number">1.1.</span> <span class="toc-text"> 运输层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text"> 网络层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.3.</span> <span class="toc-text"> 链路层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8"><span class="toc-number">1.4.</span> <span class="toc-text"> 网络安全</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#http"><span class="toc-number">2.</span> <span class="toc-text"> HTTP</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0"><span class="toc-number">3.</span> <span class="toc-text"> 第一章</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%9B%A0%E7%89%B9%E7%BD%91"><span class="toc-number">3.1.</span> <span class="toc-text"> 什么是因特网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E6%9E%84%E6%88%90%E6%8F%8F%E8%BF%B0"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 具体构成描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E6%8F%8F%E8%BF%B0"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 服务描述</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.</span> <span class="toc-text"> 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E7%B1%BB%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 人类协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 网络协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%BE%B9%E7%BC%98"><span class="toc-number">3.3.</span> <span class="toc-text"> 网络边缘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B6%E5%BA%AD%E6%8E%A5%E5%85%A5dsl-%E7%94%B5%E7%BC%86-ftth-%E6%8B%A8%E5%8F%B7%E5%92%8C%E5%8D%AB%E6%98%9F"><span class="toc-number">3.3.1.</span> <span class="toc-text"> 家庭接入:DSL、电缆、FTTH、拨号和卫星</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dsl"><span class="toc-number">3.3.1.1.</span> <span class="toc-text"> DSL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E7%BC%86%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8E%A5%E5%85%A5"><span class="toc-number">3.3.1.2.</span> <span class="toc-text"> 电缆因特网接入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%89%E7%BA%A4%E5%88%B0%E6%88%B7"><span class="toc-number">3.3.1.3.</span> <span class="toc-text"> 光纤到户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%81%E4%B8%9A%E5%92%8C%E5%AE%B6%E5%BA%AD%E6%8E%A5%E5%85%A5%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%92%8Cwifi"><span class="toc-number">3.3.2.</span> <span class="toc-text"> 企业(和家庭)接入:以太网和Wifi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%BF%E5%9F%9F%E6%97%A0%E7%BA%BF%E6%8E%A5%E5%85%A53g%E5%92%8Clte"><span class="toc-number">3.3.3.</span> <span class="toc-text"> 广域无线接入:3G和LTE</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%AA%92%E4%BD%93"><span class="toc-number">3.4.</span> <span class="toc-text"> 物理媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8C%E7%BB%9E%E9%93%9C%E7%BA%BF"><span class="toc-number">3.4.1.</span> <span class="toc-text"> 双绞铜线</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E8%BD%B4%E7%94%B5%E7%BC%86"><span class="toc-number">3.4.2.</span> <span class="toc-text"> 同轴电缆</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%89%E7%BA%A4"><span class="toc-number">3.4.3.</span> <span class="toc-text"> 光纤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%86%E5%9C%B0%E6%97%A0%E7%BA%BF%E7%94%B5%E4%BF%A1%E9%81%93"><span class="toc-number">3.4.4.</span> <span class="toc-text"> 陆地无线电信道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%AB%E6%98%9F%E6%97%A0%E7%BA%BF%E7%94%B5%E4%BF%A1%E9%81%93"><span class="toc-number">3.4.5.</span> <span class="toc-text"> 卫星无线电信道</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E8%B7%AF%E6%A0%B8%E5%BF%83"><span class="toc-number">3.5.</span> <span class="toc-text"> 网路核心</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">3.5.1.</span> <span class="toc-text"> 分组交换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%E4%BC%A0%E8%BE%93"><span class="toc-number">3.5.1.1.</span> <span class="toc-text"> 存储转发传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E6%97%B6%E5%BB%B6%E5%92%8C%E5%88%86%E7%BB%84%E4%B8%A2%E5%A4%B1"><span class="toc-number">3.5.1.2.</span> <span class="toc-text"> 排队时延和分组丢失</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%8F%91%E8%A1%A8%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.5.1.3.</span> <span class="toc-text"> 转发表与路由协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">3.5.2.</span> <span class="toc-text"> 电路交换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%A4%8D%E7%94%A8"><span class="toc-number">3.5.2.1.</span> <span class="toc-text"> 电路交换网络中的复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E4%B8%8E%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-number">3.5.2.2.</span> <span class="toc-text"> 分组交换与电路交换的对比</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/avatar.jpg"></div><div class="author-info__name text-center">rcocco</div><div class="author-info__description text-center">personal blog</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/rcocco">我的Github</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">186</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">27</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/bg.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">rcocco's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">计算机网络</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-03-12</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/">计算机</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>DDNS，将域名动态绑定到修改的IP</p>
<h1 id="基础性的重要问题"><a class="markdownIt-Anchor" href="#基础性的重要问题"></a> 基础性的重要问题</h1>
<h2 id="运输层"><a class="markdownIt-Anchor" href="#运输层"></a> 运输层</h2>
<ul>
<li>建立在不可靠的网络层上的可靠通信</li>
<li>连接建立/拆除与握手</li>
<li>拥塞和流量控制</li>
<li>多路复用</li>
</ul>
<span id="more"></span>
<h2 id="网络层"><a class="markdownIt-Anchor" href="#网络层"></a> 网络层</h2>
<ul>
<li>在两台路由器之间找到“好的”路径</li>
<li>互联大量的异构网络</li>
<li>管理现代网络的复杂性</li>
</ul>
<h2 id="链路层"><a class="markdownIt-Anchor" href="#链路层"></a> 链路层</h2>
<ul>
<li>共享多路访问通道</li>
</ul>
<h2 id="网络安全"><a class="markdownIt-Anchor" href="#网络安全"></a> 网络安全</h2>
<ul>
<li>提供机密性、鉴别和报文完整性的技术都基于密码学基本理论</li>
</ul>
<p>由于我们在本书的每个版本中都增加了新材料，故我们不得不删去某些现有主题以保持篇幅的合理。例如，为了在本版中为新材料腾出空间,我们删除了有关FTP、分布式散列表和多播方面的材料。出现在本书较早版本中的材料仍然是有益的，并且能够在本书Web网站上找到<br />
<a target="_blank" rel="noopener" href="http://www.pearsonhighered.com/cs-resources">http://www.pearsonhighered.com/cs-resources</a></p>
<p>除了配套网站外，作者维护了一个公共网站<br />
<a target="_blank" rel="noopener" href="http://gaia.cs.umass.edu/kurose_ross/in%C2%AD-teractive">http://gaia.cs.umass.edu/kurose_ross/in­-teractive</a></p>
<p>物理层<br />
链路层：在两台直接相邻的设备之间收发数据<br />
网络层：在网络中任意两台设备间收发数据<br />
传输层：在两个应用程序间发送数据<br />
应用层</p>
<h1 id="http"><a class="markdownIt-Anchor" href="#http"></a> HTTP</h1>
<p>HTTP报文是字符流<br />
<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2616#section-4">https://tools.ietf.org/html/rfc2616#section-4</a><br />
接收的是报文，报文的内容可以是从某个实际文件读取的，也可以是服务器直接写入的（此时不存在实际的网页文件）</p>
<p>请求报文的格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">METHOD PATH HTTP&#x2F;1.1</span><br><span class="line">HeaderName1: HeaderValue1</span><br><span class="line">HeaderName2: HeaderValue2</span><br><span class="line"></span><br><span class="line">CONTENT</span><br></pre></td></tr></table></figure>
<p>其中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">METHOD &#x3D; GET|DELETE|PUT|POST</span><br></pre></td></tr></table></figure>
<p>GET方法表示获取一个资源<br />
DELETE方法表示删除一个资源<br />
PUT方法表示替换一个资源<br />
POST方法表示发送消息<br />
服务器不一定会处理这些方法，一是服务器可能没有实现这些方法对应的行为，二是你可能没有权限服务器拒绝做这些事情。</p>
<p>CONTENT是内容，它与首部有一个空行分隔，有些方法不需要CONTENT，例如GET和DELETE。</p>
<p>例如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET &#x2F;17_http.html HTTP&#x2F;1.1</span><br><span class="line">Host: www.baidu.com</span><br><span class="line">Content-Length: 20</span><br><span class="line">Content-Type: text&#x2F;html</span><br></pre></td></tr></table></figure>
<p>服务端程序所谓路由，只不过是根据请求报文的Host头和路径部分来返回不同的内容。</p>
<h1 id="第一章"><a class="markdownIt-Anchor" href="#第一章"></a> 第一章</h1>
<p>第1章概述了计算机网络和因特网。这一章的目标是从整体上粗线条地勾勒计算机网络的概貌，并且描述本书内容的框架。这一章包括大量的背景知识，讨论大量的计算机网络构件，而且将它们放在整个网络的大环境中进行讨论。<br />
本章将以如下方式组织计算机网络的概述：在介绍了某些基本术语和概念后，将首先查看构成网络的基本硬件和软件组件。我们从网络的边缘开始，考察在网络中运行的端系统和网络应用；接下来探究计算机网络的核心，查看传输数据的链路和交换机，以及将端系统与网络核心相连接的接入网和物理媒体。我们将了解因特网是“网络的网络”，并将得知这些网络是怎样彼此连接起来的。<br />
在浏览完计算机网络的边缘和核心之后，本章的后半部分将从更广泛、更抽象的角度来考察计算机网络。我们将考察在计算机网络中数据的时延、丢包和吞吐量，给出一个端到端吞吐量和时延的简单定量模型：该模型兼顾了传输、传播和排队时延等因素。接下来，我们将介绍计算机联网时的一些关键的体系结构原则，如协议分层和服务模型。我们还将了解到计算机网络对于许多不同类型的攻击来说是脆弱的，将回顾其中的某些攻击并且考虑使计算机网络更为安全的方法。最后，我们将以计算机网络的简要历史结束本章的学习。</p>
<h2 id="什么是因特网"><a class="markdownIt-Anchor" href="#什么是因特网"></a> 什么是因特网</h2>
<p>回答这个问题有两种方式：</p>
<ol>
<li>其一，我们能够描述因特网的具体构成，即构成因特网的基本硬件和软件组件；</li>
<li>其二，我们能够根据为分布式应用提供服务的联网基础设施来描述因特网。</li>
</ol>
<p>我们先从描述因特网的具体构成开始，并用图1-1举例说明我们的讨论。</p>
<h3 id="具体构成描述"><a class="markdownIt-Anchor" href="#具体构成描述"></a> 具体构成描述</h3>
<p>连接因特网的各种设备（PC、手机、服务器）称为主机(host)或端系统(end system)。</p>
<p>端系统通过通信链路(communication link)和分组交换机(packet switch)连接到一起。</p>
<p>通信链路有许多类型，它们由不同类型的物理媒体组成，这些物理媒体包括同轴电缆、铜线、光纤和无线电频谱，不同链路能够以不同的速率传输数据，链路的传输速率(transmission rate)以比特/秒(bit/s或bps)度量。</p>
<p>当一台端系统要向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节，由此形成的信息包用计算机网络的术语来说称为分组(packet)，这些分组通过网络发送到目的端系统，在那里被装配成初始数据。</p>
<p>分组交换机从它的一条入通信链路接收到达的分组，并从它的一条出通信链路转发该分组。市面上流行着各种类型的分组交换机，最著名的两种是路由器(router)和链路层交换机(link-layer switch)。这两种类型的交换机朝着最终目的地转发分组。链路层交换机通常用于接入网中，而路由器通常用于网络核心中。</p>
<p>一个分组所经历的一系列通信链路和分组交换机称为通过该网络的路径(route或path)。</p>
<p>用于传送分组的分组交换网络在许多方面类似于承载运输车辆的运输网络。分组类似于卡车，通信链路类似于高速公路和公路，分组交换机类似于交叉口，端系统类似于建筑物。卡车沿着高速公路和公路，并经过一系列交叉口到达最终目的建筑物。卡车选取运输网络的一条路径前行，分组则选取计算机网络的一条路径前行。</p>
<p>端系统通过因特网服务提供商(Internet Service Provider简称ISP)接入因特网，包括如本地电缆或电话公司那样的住宅区ISP、公司ISP、大学ISP，以及在公共场所提供Wifi接入的ISP。<br />
每个ISP自身就是一个由多台分组交换机和多段通信链路组成的网络。各ISP为端系统提供了各种不同类型的网络接入，包括如线缆调制解调器或DSL那样的住宅宽带接入、高速局域网接入和移动无线接入。</p>
<p>因特网就是将端系统彼此互联，因此为端系统提供接入的ISP也必须互联。较低层的ISP通过国家的、国际的较高层ISP（中国电信、中国联通）互联起来。较高层的ISP是由通过高速光纤链路互联的高速路由器组成的。无论是较高层还是较低层ISP网络，它们每个都是独立管理的，运行着IP协议，遵从一定的命名和地址规则。</p>
<p>端系统、分组交换机和其他因特网部件都要运行一系列协议(protocol)，这些协议控制因特网中信息的接收和发送。TCP(Transmission Control Protocol，传输控制协议)和IP(Internet Protocol，网际协议)是因特网中两个最为重要的协议。<br />
IP协议定义了在路由器和端系统之间发送和接收的分组格式。因特网的主要协议统称为TCP/IP。</p>
<p>鉴于因特网协议的重要性，每个人就各个协议及其作用取得一致认识是很重要的，这样人们就能够协同工作的系统和产品。这正是标准发挥作用的地方。因特网标准(Internet standard)由因特网工程任务组(Internet Engineering Task Force，IETF)研发。IETF的标准文档称为请求评论(Request For Comment，RFC)。RFC最初只是普通的请求评论（因此而得名），目的是解决因特网先驱者们面临的网络和协议问题。RFC文档往往是技术性很强并相当详细的，它们定义了TCP、IP、HTTP和SMTP等协议，目前已经有将近7000个RFC。其他组织也在制定用于网络组件的标准，最著名的是针对网络链路的标准，例如IEEE 802 LAN/MAN标准化委员会制定了以太网和无线Wifi的标准。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210118165928328_27223.png" alt="" width="621" /></p>
<h3 id="服务描述"><a class="markdownIt-Anchor" href="#服务描述"></a> 服务描述</h3>
<p>换一个角度，从为应用提供服务的基础设施的角度描述因特网，即将因特网描述为应用程序的平台。<br />
有许多应用程序都是因特网应用，例如流媒体、即时通讯、多人游戏等，这些应用程序涉及多个相互交换数据的端系统，因而称为分布式应用程序(distributed application)。<br />
因特网应用程序运行在端系统上，它们并不运行在网络核心中的分组交换机中。</p>
<p>假如你正在研发一种分布式因特网应用程序，运行在不同端系统上的软件需要互相发送数据，此时碰到了一个核心的问题：运行在一个端系统上的应用程序怎样才能通过因特网向运行在另一个端系统的软件发送数据？<br />
与因特网相连的端系统提供了一个套接字接口(socket interface)，该接口规定了运行在一个端系统上的程序请求因特网基础设施向运行在另一个端系统上的特定目的地程序交付数据的方式。因特网套接字接口是一套发送程序必须遵循的规则集合，因此因特网能够将数据交付目的地。例如邮局提供的邮政服务接口，要求发信人在信封上贴邮票，然后投递到信箱里。<br />
邮政服务向顾客提供了多种服务，例如快递、挂号、普通服务等。因特网也向应用程序提供了多种服务，当你研发一种因特网应用程序时，也必须为你的应用程序选择其中一种因特网服务。</p>
<h2 id="协议"><a class="markdownIt-Anchor" href="#协议"></a> 协议</h2>
<h3 id="人类协议"><a class="markdownIt-Anchor" href="#人类协议"></a> 人类协议</h3>
<p>人类无时无刻不在执行协议，例如询问时间的人类协议，第一个人说“你好”，以开始与另一个人通信。对“你好”的典型回应是“你好”以表示第一个人可以继续下去，也有可能是“不要烦我”表明不能进行通信，根据协议第一个人就不能向第二个人询问时间了。还可能根本得不到回应，此时发话者通常会放弃向这个人询问时间。<br />
在人类协议中，有发送的特定报文，也有根据接收到的应答报文或其他事件（例如在某个给定时间内没有回答）采取的动作。<br />
如果人们使用不同的协议，例如一个人讲礼貌另一个人不讲礼貌，这些协议就不能交互，因而不能完成有用的工作。在网络中，为了完成一项工作，要求两个（或多个）通信实体运行相同的协议。</p>
<p>再考虑“提问与回答”协议：<br />
老师讲解计算机网络，停下来问：“同学们有什么问题吗？”（教师发送出一个报文，该报文被所有没有睡觉的学生接收到）<br />
你举起手（向老师发送了一个隐含的报文）<br />
老师示意你说“请讲”（老师发出报文鼓励你提出问题）<br />
然后你就提出问题（向老师传输了你的报文）<br />
老师听取了你的问题（接收了你的问题报文）<br />
并加以回答（向你传输了回答报文）</p>
<h3 id="网络协议"><a class="markdownIt-Anchor" href="#网络协议"></a> 网络协议</h3>
<p>网络协议类似人类协议，区别在于交换报文和采取动作的实体是某些设备（如计算机、手机、路由器等具有网络能力的设备）的硬件或软件组件。在因特网中，涉及两个或多个远程通信实体的所有活动都受协议的制约。例如，在两台物理连接的计算机，硬件实现的协议控制了在两块网络接口卡间的“线上”比特流。在端系统中，拥塞控制协议控制了在发送方和接收方之间传输的分组发送的速率。路由器中的协议决定了分组从源到目的地的路径。</p>
<p>从上面的例子可见，报文的交换以及发送和接收这些报文时所采取的动作是定义一个协议的关键元素：<br />
<strong>协议</strong>(protocol)定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和/或接收一条报文或其他事件所采取的动作。</p>
<p>计算机网络广泛地使用了协议，不同的协议用于完成不同的通信任务。</p>
<h2 id="网络边缘"><a class="markdownIt-Anchor" href="#网络边缘"></a> 网络边缘</h2>
<p>之前我们给出了因特网和网络协议的总体概述。现在我们将更深入一些来探究计算机网络的部件。</p>
<p>端系统也称为主机(host)，因为它们容纳（即运行）应用程序，如Web浏览器程序、Web服务器程序、电子邮件客户程序或电子邮件服务器程序。<br />
主机有时又被进一步划分为两类：客户(client)和服务器(server)。客户通常是桌面PC、移动PC和智能手机等，而服务器通常是更为强大的机器，用于存储和发布Web页面、流视频、中继电子邮件等。大部分提供搜索结果、电子邮件、Web页面和视频的服务器都属于大型数据中心(data center)</p>
<p>考虑了位于“网络边缘”的应用程序和端系统后，接下来考虑接入网。<br />
接入网是指将端系统物理连接到其边缘路由器(edge router)的网络。<br />
图中用粗的、带阴影的线显示了几种类型的接入链路和使用接入网的几种环境（家庭、公司和广域移动无线）<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210119102855074_8163.png" alt="" width="621" /></p>
<h3 id="家庭接入dsl-电缆-ftth-拨号和卫星"><a class="markdownIt-Anchor" href="#家庭接入dsl-电缆-ftth-拨号和卫星"></a> 家庭接入:DSL、电缆、FTTH、拨号和卫星</h3>
<p>宽带住宅接入有两种最流行的流行：数字用户线(Digital Subscriber Line，DSL)和电缆。<br />
在无法提供DSL、电缆和FTTH的地方，能够使用卫星链路将住宅以超过1Mbps的速率与因特网相连。<br />
除此之外，使用传统电话线的拨号接入与DSL基于相同的模式：家庭的调制解调器经过电话线连接到ISP的调制解调器。与DSL和其他宽带接入网相比，拨号接入只有56kbps的慢速率（在上网的过程中无法同时拨打电话）</p>
<h4 id="dsl"><a class="markdownIt-Anchor" href="#dsl"></a> DSL</h4>
<p>住户通常从提供本地电话接入的本地电话公司处获得DSL因特网接入，因此当使用DSL时，用户的本地电话公司也是它的ISP。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210119103503523_15715.png" alt="" width="621" /><br />
如上图所示，每个用户的DSL调制解调器使用现有的电话线（即双绞铜线）与位于电话公司的本地中心局(Central office，CO)中的数字用户线接入复用器(DSLAM)交换数据。家庭的DSL调制解调器得到数字数据后将其转换为高频音，以通过电话线传输给本地中心局。来自许多家庭的模拟信号在DSLAM处被转换回数字形式。<br />
家庭电话线同时承载了数据和传统电话信号，它们用不同的频率进行编码：<br />
高速下行通道，位于50kHz到1MHz频段<br />
中速上行通道，位于4kHz到50kHz频段。<br />
普通的双向电话通道，位于0到4kHz频段。<br />
这种方法使单根DSL线路按起来像有3根单独的线路一样，因此一个电话呼叫和一个因特网连接能够同时共享DSL链路。在用户侧，分配器把到达家庭的数据信号和电话信号分开，并把数据信号转发给DSL调制解调器。在电话公司侧，在本地中心局，DSLAM把数据和电话信号分隔开，并将数据送往因特网。数百甚至上千个家庭与同一个DSLAM相连。<br />
DSL标准定义了多个传输速率，包括12Mbps下行和1.8Mbps上行传输速率，以及55Mbps下行和15Mbps上行传输速率。因为上下行速率不同，所以这种接入被称为不对称的(Asymmetric)。实际取得的下行和上行传输速率也许小于上述速率，因为DSL提供商可能根据价格限制了住宅速率，也可能因为家庭和本地中心局之间的距离、双绞线的规格、电气干扰的程度而使最大速率受限。<br />
由于DSL是为家庭与本地中心局之间的短距离接入而设计的，因此如果住宅不是位于本地中心局的8-16千米范围内，该住宅必须采用其他形式的因特网接入。</p>
<h4 id="电缆因特网接入"><a class="markdownIt-Anchor" href="#电缆因特网接入"></a> 电缆因特网接入</h4>
<p>DSL利用电话公司现有的本地电话基础设施，而电缆因特网接入(cable Internet access)利用了有线电视公司现有的有线电视基础设施。住宅从提供有线电视的公司获得了电缆因特网接入。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210119115508477_14217.png" alt="" width="621" /><br />
光缆将电缆头端连接到地区枢纽，从这里使用传统的同轴电缆（有线电视所用的线）到达各家各户和公寓。每个地区枢纽通常支持500-5000个家庭。由于在这个系统中应用了光纤和同轴电缆，所以它经常被称为混合光纤同轴(Hybrid Fiber Coax，HFC)系统。<br />
电缆因特网接入需要特殊的调制解调器，称为电缆调制解调器(cable modern)。类似DSL调制解调器，电缆调制解调器通常是一个外部设备，通过一个以太网端口连接到家庭PC。在电缆头端，电缆调制解调器端接系统(Cable Modem Termination System，CMTS)与DSL网络的DSLAM具有类似的功能，它将来自许多下行家庭中的电缆调制解调器发送的模拟信号转换为数字形式。<br />
电缆调制解调器将HFC网络划分为下行和上行两个信道，如同DSL，接入通常是不对称的，下行信道分配的传输速率通常比上行信道高，DOCSIS 2.0标准定义了42.8Mbps的下行速率和30.7Mbps的上行速率，由于较低的合同数据率或媒体损耗，实际可能不一定达到最大可取得的速率。<br />
电缆因特网接入的一个重要特征是共享广播媒体。特别是，由头端发送的每个分组向下行经每段链路到每个家庭；每个家庭发送的每个分组经上行信道向头端传输。因此，如果几个用户同时经下行信道下载一个视频文件，每个用户接收视频文件的实际速率将大大低于电缆总计的下行速率。另一方面，如果只有很少的活跃用户，那么在完全相同的时刻请求网页的概率很低，所以每个用户都可以以全部的下行速率接收Web网页。由于上行信道也是共享的，需要一个分布式多路访问协议来协调传输和避免碰撞。</p>
<h4 id="光纤到户"><a class="markdownIt-Anchor" href="#光纤到户"></a> 光纤到户</h4>
<p>一种提供更高速率的新兴技术是光纤到户(Fiber To The Home，FTTH)。它是指从本地中心局直接到家庭提供了一条光纤路径。<br />
从本地中心局到家庭有几种竞争性的光纤分布方案。最简单的光纤分布网络称为直接光纤，从本地中心局到每户设置一根光纤，更为一般的是，从本地中心局出来的每根光纤实际上由许多家庭共享，直到相对接近这些家庭的位置，该光纤才分成每户一根光纤。进行这种分配有两种竞争性的光纤分布体系结构：主动光纤网络(Active Optical Network，AON)和被动光纤网络(Passive Optical Network，PON)。<br />
AON本质上就是交换因特网。<br />
PON技术用于Verizon的FIOS服务中，下图显示了使用PON分布体系结构的FTTH。每个家庭具有一个光纤网络端接器(Optical Network Terminator，ONT)，它由专门的光纤连接到临近的分配器(splitter)。该分配器把一些家庭（通常少于100个）集结到一根共享的光纤，该光纤再连接到中心局中的光纤线路端接器(Optical Line Terminator，OLT)。该OLT提供了光信号和电信号之间的转换，经过本地电话公司路由器与因特网相连。在家庭中，用户将一台家庭路由器（通常是无线路由器）与ONT相连，并经过这台家庭路由器接入因特网。在PON体系结构中，所有从OLT发送到分配器的分组在分配器（类似于一个电缆头端）处复制。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210119161622811_23574.png" alt="" width="621" /></p>
<h3 id="企业和家庭接入以太网和wifi"><a class="markdownIt-Anchor" href="#企业和家庭接入以太网和wifi"></a> 企业(和家庭)接入:以太网和Wifi</h3>
<p>在公司、高校以及越来越多的家庭环境中，使用局域网(LAN)将端系统连接到边缘路由器。<br />
尽管有许多不同类型的局域网技术，但以太网是其中最流行的接入技术。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210119200112005_14985.png" alt="" width="621" /><br />
如图，以太网用户使用双绞铜线与一台以太网交换机相连，以太网交换机或这样相连的交换机网络，则再与更大的因特网相连。使用以太网接入，用户通常以100Mbps或1Gbps速率接入以太网交换机，而服务器可能具有1Gbps甚至10Gbps的接入速率。<br />
如今，越来越多的人从手机、平板电脑无线接入因特网。在无线LAN环境中，无线用户从/到一个接入点发送/接收分组，该接入点与企业网连接（很可能使用了有线以太网），企业网再与有线因特网相连。一个无线LAN用户通常必须位于接入点的几十米范围内。基于IEEE 802.11技术的无线LAN接入，更通俗地称为Wifi，目前几乎无处不在。<a target="_blank" rel="noopener" href="https://wigle.net/">此网站</a>列出了全球的7亿Wifi，实际数量比这多得多。802.11今天提供了高达100Mbps的共享传输速率。<br />
近来许多家庭将宽带住宅接入（即电缆调制解调器或DSL）与廉价的无线局域网技术结合起来，以产生强大的家用网络。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210119202429191_22112.png" alt="" width="621" /></p>
<h3 id="广域无线接入3g和lte"><a class="markdownIt-Anchor" href="#广域无线接入3g和lte"></a> 广域无线接入:3G和LTE</h3>
<p>手机等设备经常在移动中发送消息，这些设备应用了与蜂窝移动电话相同的无线基础设施，通过蜂窝网提供商运营的基站来发送和接收分组。与Wifi不同的是，一个用户仅需要位于基站的数万米（而不是几十米）的范围内。<br />
电信公司已经在所谓第三代(3G)无线技术进行了大量投资，3G为分组交换广域无线因特网接入提供了超过1Mbps的速率。更高速率的广域接入技术即第四代(4G)广域无线网络也已经被部署了。LTE(Long-Term Evolution，长期演进)来源于3G技术，它能够取得超过10Mbps的速率，几十Mbps的LTE下行速率已经在商业部署中得到应用</p>
<h2 id="物理媒体"><a class="markdownIt-Anchor" href="#物理媒体"></a> 物理媒体</h2>
<p>之前我们概述了因特网中某些最为重要的网络接入技术，当我们描述这些技术时，我们也指出了所使用的物理媒体。例如，我们说HFC使用了光缆和同轴电缆相结合的技术，DSL和以太网使用了双绞铜线，移动接入网使用了无线电频谱。这里我们简要概述一下这些和其他常在因特网中使用的传输媒体。</p>
<p>考虑一个比特的传输历程，比特从一个端系统开始传输，通过一系列链路和路由器，到达另一个端系统。这个比特被传输了许许多多次，源端系统首先发射这个比特，不久后第一台路由器接收该比特；第一台路由器发射该比特，不久后第二台路由器接收该比特。因此，这个比特从源到目的地传输时，通过一系列“发射器-接收器”对，对于每个发射器-接收器对，通过跨越一种物理媒体(physical medium)传播电磁波或光脉冲来发送该比特。该物理媒体可具有多种形状和形式，并且对沿途的每个发射器-接收器对而言不必具有相同的类型。<br />
物理媒体的例子包括双绞铜线、同轴电缆、多模光纤缆、陆地无线电频谱和卫星无线电频谱。<br />
物理媒体分成两种类型：导引型媒体(guided media)和非导引型媒体(unguided media)。<br />
对于导引型媒体，电波沿着固定媒体前行，如光缆、双绞铜线或同轴电缆。<br />
对于非导引型媒体，电波在空气或外层空间中传播，例如在无线局域网或数字卫星频道中。</p>
<p>物理链路（铜线、光缆等）的实际成本与其他网络成本相比通常是相当小的，特别是安装物理链路的劳动力成本比材料成本高出几个数量级。因此，建筑商通常会同时安装双绞线、光缆和同轴电缆，这样将来不必另行铺设，即便现在不使用。</p>
<h3 id="双绞铜线"><a class="markdownIt-Anchor" href="#双绞铜线"></a> 双绞铜线</h3>
<p>最便宜且最常用的导引型传输媒体是双绞铜线。一百多年来，它一直用于电话网。<br />
双绞线由两根绝缘铜线组成，每根大约1mm粗，以规则的螺旋状排列着。这两根线被绞合起来，以减少邻近类似的双绞线的电气干扰。通常许多双绞线捆扎在一起形成一根电缆，并在这些双绞线外面覆盖上保护性防护层。一对电线构成了一个通信链路。<br />
无屏蔽双绞线(Unshieldde Twisted Pair，UTP）常用在建筑物内的计算机网络中，即用于局域网(LAN)中。目前局域网中的双绞线的数据速率从10Mbps到10Gbps。所能达到的数据传输速率取决于线的粗细以及传输方和接收方之间的距离。双绞线最终已经作为高速LAN联网的主导性解决方案。<br />
双绞线也常用于住宅因特网接入，拨号调制解调器技术通过双绞线能以56kbps的速率接入。数字用户线(DSL)技术通过双绞线使住宅用户以超过数十Mbps的速率接入因特网（当用户靠近ISP的中心局居住时）</p>
<h3 id="同轴电缆"><a class="markdownIt-Anchor" href="#同轴电缆"></a> 同轴电缆</h3>
<p>与双绞线类似，同轴电缆由两个铜导体组成，但是这两个导体是同心的而不是并行的。借助于这种结构及特殊的绝缘体和保护层，同轴电缆能够达到较高的数据传输速率。同轴电缆在电缆电视系统中相当普遍。电缆电视系统与电缆调制解调器结合起来，可以为住宅用户提供数十Mbps速率的因特网接入。在电缆电视和电缆因特网接入中，发送设备将数字信号调制到某个特定的频段，产生的模拟信号从发送设备传送到一个或多个接收方。<br />
同轴电缆能被用作导引型共享媒体(shared medium)。特别是，许多端系统能够直接与该电缆相连，每个端系统都能接收由其他端系统发送的内容。</p>
<h3 id="光纤"><a class="markdownIt-Anchor" href="#光纤"></a> 光纤</h3>
<p>光纤是一种细而柔软的、能够导引光脉冲的媒体。每个脉冲表示一个比特，一根光纤能够支持极高的比特速率，高达数十甚至数百Gbps。它们不受电磁干扰，长达100km的光缆信号衰减极低，并且很难窃听。这些特征使得光纤称为长途导引型传输媒体，特别是跨海链路。<br />
美国等一些地方的长途电话也全面使用光纤。光纤也广泛用于因特网的主干，然而高成本的光设备，如发射器、接收器和交换机，阻碍光纤在短途传输中的应用。如在LAN或家庭接入网中就不使用它们。<br />
光载波(Optical Carrier，OC)标准链路速率的范围从51.8Mbps到39.8Gbps；这些标准常别称为OC-n，其中的链路速率等于n乘51.8Mbps。目前正在使用的标准包括OC-1、OC-3、OC-12、OC-24、OC-48、OC-96、OC-192、OC-768。</p>
<h3 id="陆地无线电信道"><a class="markdownIt-Anchor" href="#陆地无线电信道"></a> 陆地无线电信道</h3>
<p>无线电信道承载电磁频谱中的信号。它不需要安装物理链路，并具有穿透墙壁、提供与移动用户的连接以及长距离承载信号的能力，因而成为一种有吸引力的媒体。无线电信道的特性极大地依赖于传播环境和信号传输速率。环境上的考虑取决于路径消耗和遮挡衰落（即当信号跨距离传播和绕过/通过阻碍物体时信号强度降低）、多径衰落（由于干扰对象的信号反射）以及干扰（由于其他传输或电磁信号）。<br />
陆地无线电信道能够大致划分为三类：<br />
一类运行在很短距离（如1米或2米），个人设备如无线头戴式耳机、键盘和医疗设备跨短距离运行。<br />
另一类运行在局域，通常跨越数十到几百米，无线LAN技术使用了局域无线电信道。<br />
第三类运行在广域，跨越数万米。蜂窝接入技术使用了广域无线电信道。</p>
<h3 id="卫星无线电信道"><a class="markdownIt-Anchor" href="#卫星无线电信道"></a> 卫星无线电信道</h3>
<p>一颗通信卫星连接地球上的两个或多个微波发射器/接收器，它们被称为地面站。卫星在一个频段上接收传输，使用一个转发器再生信号，并在另一个频率上发射信号。<br />
通信中通常使用两类卫星：同步卫星(geostationary satellite)和近地轨道(Low-Earth Orbiting，LEO)卫星。<br />
同步卫星永久地停留在地球上方的相同点上，这种静止性是通过将卫星置于地球表面上方36000km的轨道上取得的。从地面站到卫星再回到地面站的巨大距离引入了280ms信号传播时延。能以数百Mbps速率运行的卫星链路通常用于那些无法使用DSL或电缆因特网接入的区域。<br />
近地轨道卫星放置得非常靠近地球，并且不是永久地停留在地球上方的一个点。它们围绕地球旋转，就像月亮围绕地球旋转那样，并且彼此之间可进行通信，也可以与地面站通信。为了提供对一个区域的连续覆盖，需要在轨道上放置许多卫星。当前有许多低轨道通信系统在研制中，LEO卫星技术未来也许能够用于因特网接入。</p>
<h2 id="网路核心"><a class="markdownIt-Anchor" href="#网路核心"></a> 网路核心</h2>
<p>在考虑了因特网边缘后，我们现在更深入地研究网络核心，即由互联因特网端系统的分组交换机和链路构成的网状网络。下图用加粗阴影线勾画出网络核心部分。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210120094246852_11868.png" alt="" width="621" /></p>
<h3 id="分组交换"><a class="markdownIt-Anchor" href="#分组交换"></a> 分组交换</h3>
<p>在各种网络应用中，端系统彼此交换报文(message)。报文能够包含协议设计者需要的任何东西。报文可以执行一种控制功能（例如“你好”报文），也可以包含数据（例如文本、图像）。为了从源端系统向目的端系统发送一个报文，源将长报文划分为较小的数据块，称之为分组(packet)。在源和目的地之间，每个分组都通过通信链路和分组交换机(packet switch)传送。交换机主要有两类：路由器(router)和链路层交换机(link-layer switch)。<br />
分组以等于该链路的最大传输速率的速度传输通过通信链路，因此，如果某源端系统或分组交换机经过一条链路发送一个L比特的分组，链路的传输速率（这个是指比特在线缆上的运动速度，还是指端系统将比特发送到线缆上的速度？应该是后者）为R比特/秒，则传输该分组的时间为L/R秒。</p>
<h4 id="存储转发传输"><a class="markdownIt-Anchor" href="#存储转发传输"></a> 存储转发传输</h4>
<p>多数分组交换机在链路的输入端使用存储转发传输(store-and-forward transmission)机制。存储转发传输是指在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个分组。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210120105134966_29438.png" alt="" width="621" /><br />
考虑由两个端系统经一台路由器构成的简单网络，如上图，一台路由器通常有多条繁忙的链路，因此它的任务就是把一个入分组交换到一条出链路。在这个简单网络中，该路由器的任务就是两分组从一条输入链路转移到另一条唯一的连接链路。在上图所示的特定时刻，源已经传输了分组1的一部分，分组1的前沿已经到达了路由器。因为该路由器应用了存储转发机制，所以此时它还不能传输已经接收的比特，而是必须先缓存（即存储）该分组的比特。仅当路由器已经接收完该分组的所有比特后，它才能开始向出链路传输（即转发）该分组。</p>
<p>现在计算一下从源开始发送分组到目的地接收到整个分组所经过的时间（这里我们忽略传播时延——指这些比特以接近光速的速度跨越线路所需要的时间）源在时刻0开始传输，在时刻L/R秒，因为该路由器刚好接收到整个分组，所以它能够朝着目的地向出链路开始传输分组。在时刻2L/R，路由器已经传输了整个分组，并且整个分组已经被目的地接收。所以总时延是2L/R。如果交换机一旦比特到达就转发比特（不必首先收到整个分组），则总时延将是L/R，但正如下节讨论的那样，路由器在转发前需要接收、存储和处理整个分组。</p>
<p>再计算从源开始发送第一个分组到目的地接收到所有三个分组所需的时间。在时刻L/R，路由器开始转发第一个分组，此时源开始发送第二个分组，因为它已经完成了第一个分组的完整发送）；在时刻2L/R，目的地接收到第一个分组，路由器接收到第二个分组，源开始发送第三个分组；在时刻3L/R，目的地接收到第二个分组，路由器接收到第三个分组；在时刻4L/R，目的地接收到第三个分组。<br />
因此，对于一般情况：假设路径上有N条链路，每条链路的传输速率为R比特每秒，从源到目的地发送一个分组，端到端时延是中途每个发送设备发送分组所需的时间。N条链路中间有N-1台路由器，同时源端系统也是发送设备，因此总共有N个发送设备，每个设备发送分组所需的时间都是L/R，因此端到端时延等于<code>N*L/R</code></p>
<p>再考虑P个分组经过N条链路的时延，它是等待前P-1个分组发送的时间，以及中途每个发送设备发送第P个（最后一个）分组所需的时间。等待P-1个分组发送的时间为<code>(P-1)*L/R</code>，中途每个发送设备发送最后一个分组所需的时间为<code>N*L/R</code>，因此端到端时延等于<code>(P-1)*L/R+N*L/R=(P-1+N)*L/R</code></p>
<h4 id="排队时延和分组丢失"><a class="markdownIt-Anchor" href="#排队时延和分组丢失"></a> 排队时延和分组丢失</h4>
<p>每台分组交换机有多条链路与之相连，对于每条相连的链路，该分组交换机具有一个输出缓存(output buffer，也称为输出队列output queue)，它用于存储路由器准备发往那条链路的分组。如果到达的分组需要传输到某条链路，但发现该链路正忙于传输其他分组，该到达分组必须在输出缓存中等待。因此，除了存储转发时延以外，分组还要承受输出缓存的排队时延(queuing delay)，这些时延是变化的，变化的程度取决于网络的拥塞程度。因为缓存空间的大小是有限的，一个到达的分组可能发现该缓存已被其他等待传输的分组完全充满了。在此情况下，将出现分组丢失（丢包）(packet loss)，到达的分组或已经排队的分组之一将被丢弃。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210120200224464_1626.png" alt="" width="621" /><br />
上图中，假定主机A和B向主机E发送分组，主机A和主机B先通过100Mbps的以太网链路向第一个路由器发送分组，该路由器则将这些分组导向一条15Mbps（传输/发送速率）的链路，在某个短时间间隔内，如果分组到达路由器的到达率（转换为每秒比特）超过了15Mbps，这些分组在通过链路传输之前，将在链路输出缓存中排队，在该路由器中将出现拥塞。例如，如果主机A和主机B每个都同时发送了5个紧接着的分组突发块，则这些分组中的大多数将在队列中等待一些时间。</p>
<h4 id="转发表与路由协议"><a class="markdownIt-Anchor" href="#转发表与路由协议"></a> 转发表与路由协议</h4>
<p>路由器从与它相连的一条通信链路得到分组，然后向与它相连的另一条通信链路转发该分组，但路由器如何决定它应当向哪条链路转发？不同的计算机网络实际上是以不同的方式完成分组转发的。<br />
在因特网中，每个端系统具有一个称为IP地址的地址，当源主机要向目的端系统发送一个分组时，源在该分组的首部包含了目的地的IP地址，类似邮政地址，IP地址具有一种等级结构。当一个分组到达网络中的路由器时，路由器检查该分组的目的地址的一部分，并向一台相邻路由器转发该分组。每台路由器具有一个转发表(forwarding table)，用于将目的地址（或目的地址的一部分）映射成为输出链路。当某分组到达一台路由器时，路由器检查该地址，并用这个目的地址搜索其转发表，以发现适当的出链路。<br />
转发表是如何进行设置的？是通过人工对每台路由器逐台进行配置，还是因特网使用更为自动的过程进行配置？因特网具有一些特殊的路由选择协议(routing protocol)，用于自动地设置这些转发表。例如，一个路由选择协议可以决定从每台路由器到每个目的地的最短路径，并使用这些最短路径来配置路由器中的转发表。</p>
<h3 id="电路交换"><a class="markdownIt-Anchor" href="#电路交换"></a> 电路交换</h3>
<p>通过网络链路和交换机移动数据有两种基本方法：电路交换(circuit switching)和分组交换(packet switching)。<br />
在电路交换网络中，在端系统间通信会话期间，预留了端系统间沿路径通信所需要的资源（缓存、链路传输速率）。在分组交换网络中，这些资源不是预留的，会话的报文按需使用这些资源，其后果可能是不得不等待（即排队）接入通信线路。就好比两家餐馆，一家需要预订，另一家不需要预订，但不保证能安排顾客。对于需要预订的餐馆，我们在离开家之前必须承受先打电话预订的麻烦，但当我们到达餐馆时，原则上我们能够立即入座并点菜。对于不需要预订的餐馆，我们不必麻烦地预订餐桌，但当我们到达该餐馆时，也许不得不先等待一张餐桌空闲后才能入座。<br />
传统的电话网络是电路交换网络的例子。考虑当一个人通过电话网向另一个人发送信息（语音或传真）时所发生的情况。在发送方能够发送信息之前，该网络必须在发送方和接收方之间建立一条连接(connection)。这是一个名副其实的连接，因为此时沿着发送方和接收方之间路径上的交换机都将为该连接维护连接状态。用电话的术语来说，该连接被称为一条电路(circuit)。当网络创建这种电路时，它也在连接期间在该网络链路上预留了恒定的传输速率（表示为每条链路传输容量的一部分）。既然已经为该发送方-接收方连接预留了带宽，则发送方能够以确保的恒定速率向接收方传送数据。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210120205655305_10414.png" alt="" width="621" /><br />
上图显示了一个电路交换网络，在这个网络中，用4条链路(link)互联了4台电路交换机。每条链路都有4条电路，因此每条链路能够支持4条并行的连接(connection)。每台主机都与一台交换机直接相连。当两台主机之间要通信时，该网络在两台主机之间创建一条专用的端到端连接(end-to-end connection)。因此，主机A为了向主机B发送报文，网络必须在两条链路的每条上先预留一条电路，即蓝线通过的两条电路。因为每条链路具有4条电路，对于由端到端连接所使用的每条链路(link)而言，该连接在连接期间获得链路(link)总传输容量的1/4。例如，如果两台邻近交换机之间每条链路具有1Mbps传输速率，则每个端到端电路交换连接获得250kbps专用的传输速率。（连接和电路可以认为是指同一个东西）</p>
<p>与此相反，考虑一台主机要经过分组交换网络（如因特网）向另一台主机发送分组所发生的情况。与使用电路交换相同，该分组经过一系列通信链路传输。但与电路交换不同的是，该分组被发送进网络，而不预留任何链路资源之类的东西。如果因为此时其他分组也需要经该链路进行传输而使链路之一出现拥塞，则该分组将不得不在传输链路发送侧的缓存中等待而产生时延。因特网尽最大努力以实时方式交付分组，但它不做任何保证。</p>
<h4 id="电路交换网络中的复用"><a class="markdownIt-Anchor" href="#电路交换网络中的复用"></a> 电路交换网络中的复用</h4>
<p>链路中的电路是通过频分复用(Frequency-Division Multiplexing，FDM)或时分复用(Time-Division Multiplexing，TMD)来实现的。<br />
对于FDM，链路的频谱由跨越链路创建的所有连接共享，特别是，在连接期间链路为每条连接专用一个频段。在电话网络中，这个频段的宽度通常是4kHz（即每秒4000周期）。该频段的宽度称为带宽(bandwidth)。调频无线电台也适用FDM来共享88MHz-108MHz的频谱，其中每个电台被分配一个特定的频段。<br />
对于一台TDM链路，时间被划分为固定期间的帧，并且每个帧又被划分为固定数量的时隙。当网络跨越一条链路创建一条连接时，网络在每个帧中为该连接指定一个时隙，这些时隙专门由该连接单独使用，一个时隙（在每个帧内）可用于传输该连接的数据。<br />
<img src="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/_v_images/20210121102227267_9487.png" alt="" width="621" /><br />
上图显示了一个支持多达4条电路的特定网络链路的FDM和TDM。<br />
对于FDM其频率域被分割为4个频段，每个频段的带宽是4kHz。<br />
对于TDM，其时域被分割为帧，在每个帧中具有4个时隙，在循环的TDM帧中每条电路被分配相同的专用时隙。一条电路的传输速率等于帧速率乘以一个时隙中的比特数量。例如，如果链路每秒传输8000个帧，每个时隙由8个比特组成，则每条电路的传输速率是64kbps。</p>
<p>考虑从主机A到主机B经一个电路交换网络发送一个640000比特的文件需要多长时间。假如在该网络中所有链路使用具有24时隙的TDM，比特速率为1.536Mbps。同时假定在主机A能够开始传输该文件之前，需要500ms创建一条端到端电路。它需要多长时间才能发送该文件？每条电路具有的传输速率是1.536Mbps/24=64kbps，因此传输该文件需要(640kb)/(64kbps)=10s。这个10s，再加上电路创建时间，这样就需要10.5s发送该文件。值得注意的是，该传输时间与链路数量无关（因为没有转发的时延，电路已经建立好了）：端到端电路不管是通过一条链路还是100条链路，传输时间都将是10s（实际的端到端时延还包括传播时延）</p>
<h4 id="分组交换与电路交换的对比"><a class="markdownIt-Anchor" href="#分组交换与电路交换的对比"></a> 分组交换与电路交换的对比</h4>
<p>电路交换不考虑需求，而预先分配了传输链路使用，这使得已分配而并不需要的链路时间未被使用。<br />
分组交换按需分配链路使用，链路传输能力将在所有需要在链路上传输分组的用户之间逐分组地被共享。<br />
虽然分组交换和电路交换在今天的电信网络中都是普遍采用的方式，但趋势是朝着分组交换方向发展，许多电路交换电话网也正在缓慢地向分组交换迁移，特别是电话网在昂贵的海外电话部分使用分组交换。</p>
<p>电路交换的缺点：</p>
<ul>
<li>分组交换的支持者主张，电路交换因为在静默期(silent period)专用电路空闲而不够经济。例如，打电话的一个人停止讲话，网络资源（在沿该连接路由的链路中的频段或时隙）分配给了该连接但没有使用（即被浪费了），也不能被其他进行中的连接所使用。另外，创建端到端电路和预留端到端带宽是复杂的，需要复杂的信令软件以协调沿端到端路径的交换机操作。</li>
</ul>
<p>分组交换的优点：</p>
<ul>
<li>分组交换的支持者主张，分组交换提供了比电路交换更好的带宽共享。</li>
<li>分组交换比电路交换更简单、有效、实现成本更低。</li>
</ul>
<p>分组交换的缺点：</p>
<ul>
<li>分组交换的批评者主张，分组交换不适合实时服务（例如电话和视频会议），因为它的端到端时延是可变的和不可预测的（主要是因为排队时延的变动和不可预测所致）。</li>
</ul>
<p>分组交换为什么更有效？<br />
假定多个用户共享一条1Mbps链路，再假定每个用户活跃周期是变化的，某用户时而以100kbps恒定速率产生数据，时而静止，此时不产生数据。进一步假定该用户仅有10%的时间活跃（余下的90%时间空闲下来喝咖啡）。<br />
对于电路交换，在所有的时间内必须为每个用户预留100kbps，因此，该电路交换链路仅能支持10（1Mbps/100kbps）个并发的用户。例如，对于电路交换的TDM，如果一个1s的帧被划分为10个时隙，每个时隙为100ms，则每帧将为每个用户分配一个时隙。<br />
对于分组交换，一个特定用户活跃的概率是0.1（即10%）。如果有35个用户，有11个或更多并发活跃用户的概率大约是0.0004。当有10个或更少并发用户（概率为0.9996），数据的总到达速率小于或等于该链路的输出速率1Mbps。因此，当有10个或更少的活跃用户时，通过该链路的分组流基本上没有时延，这与电路交换的情况一样。当同时活跃用户超过10个时，分组的总到达速率超过该链路的输出容量，则输出队列将开始变长（一直增长到总到达速率重新低于1Mbps，此后该队列长度才会减少）。由于同时活跃用户超过10个的概率极小，分组交换几乎总是提供了与电路交换相同的性能，即便用户总数是电路交换时的3倍。</p>
<p>另一个例子是，假定有10个用户，某个用户突然产生1000个1000比特的分组，而其他用户保持静默不产生分组。在每秒100个帧，每帧具有10个时隙并且每个时隙包含1000比特的TDM电路交换的情况下，活跃用户仅能使用每帧中的一个时隙来传输数据，而帧中剩余的9个时隙保持空闲，该活跃用户传输完所有<code>10^6</code>比特数据需要<code>10^6/1000=1000</code>个帧，即<code>1000/100=10</code>秒。<br />
在分组交换情况下，活跃用户能够连续地以1Mbps的全部链路速率发送其分组，因为没有其他用户产生分组与该活跃用户的分组进行复用。在此情况下，该活跃用户的所有数据将在1s内发送完毕。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:rcocco@qq.com">rcocco</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://rcocco.github.io/categories/计算机/计算机网络/计算机网络.html">https://rcocco.github.io/categories/计算机/计算机网络/计算机网络.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://rcocco.github.io">rcocco's Blog</a>！</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/Algs4%E4%B9%A0%E9%A2%98.html"><i class="fa fa-chevron-left">  </i><span>Algs4习题</span></a></div><div class="next-post pull-right"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%89%8D%E7%AB%AF/Vue.html"><span>Vue</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'a2cb0efab90aafe77d70',
  clientSecret: '4ab6a1536933e9a284900f708bef988ffb8c152f',
  repo: 'gitalk_comments',
  owner: 'rcocco',
  admin: 'rcocco',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer class="footer-bg" style="background-image: url(/bg.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 - 2021 By rcocco</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>